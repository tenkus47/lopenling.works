/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkteminusclient"] = self["webpackChunkteminusclient"] || []).push([["default-app_components_TextDetail2_SplitText_js"],{

/***/ "./app/components/TextDetail2/SplitText.js":
/*!*************************************************!*\
  !*** ./app/components/TextDetail2/SplitText.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ SplitTextComponent)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/esm/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/esm/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n/* harmony import */ var react_virtualized_dist_es_AutoSizer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-virtualized/dist/es/AutoSizer */ \"./node_modules/react-virtualized/dist/es/AutoSizer/index.js\");\n/* harmony import */ var react_virtualized__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-virtualized */ \"./node_modules/react-virtualized/dist/es/index.js\");\n/* harmony import */ var react_virtualized_dist_es_CellMeasurer__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react-virtualized/dist/es/CellMeasurer */ \"./node_modules/react-virtualized/dist/es/CellMeasurer/index.js\");\n/* harmony import */ var react_virtualized_styles_css__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react-virtualized/styles.css */ \"./node_modules/react-virtualized/styles.css\");\n/* harmony import */ var react_virtualized_styles_css__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react_virtualized_styles_css__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _Text2__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./Text2 */ \"./app/components/TextDetail2/Text2.js\");\n/* harmony import */ var lib_SplitText__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! lib/SplitText */ \"./app/lib/SplitText.js\");\n/* harmony import */ var _SplitText_css__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./SplitText.css */ \"./app/components/TextDetail2/SplitText.css\");\n/* harmony import */ var _SplitText_css__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_SplitText_css__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var lib_TextSegment__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! lib/TextSegment */ \"./app/lib/TextSegment.js\");\n/* harmony import */ var lib_Witness__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! lib/Witness */ \"./app/lib/Witness.js\");\n/* harmony import */ var grapheme_splitter__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! grapheme-splitter */ \"./node_modules/grapheme-splitter/index.js\");\n/* harmony import */ var grapheme_splitter__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(grapheme_splitter__WEBPACK_IMPORTED_MODULE_20__);\n\n\n\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar _searchResultsCache = {};\n\nvar SplitTextComponent = /*#__PURE__*/function (_React$PureComponent) {\n  (0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(SplitTextComponent, _React$PureComponent);\n\n  var _super = _createSuper(SplitTextComponent);\n\n  // Whether the mouse button is down\n  function SplitTextComponent(props) {\n    var _this;\n\n    (0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this, SplitTextComponent);\n\n    _this = _super.call(this, props);\n    _this.textAlignmentById = [];\n    _this.changeScrollToId = props.changeScrollToId;\n    _this.list = null;\n    _this.splitText = null;\n    _this.cache = new react_virtualized_dist_es_CellMeasurer__WEBPACK_IMPORTED_MODULE_12__.CellMeasurerCache({\n      fixedWidth: true\n    });\n    _this.rowRenderer = _this.rowRenderer.bind((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this));\n    _this.isPanelLinked = _this.props.isPanelLinked;\n    _this.activeSelection = null;\n    _this.selectedNodes = null;\n    _this._mouseDown = false;\n    _this._activeWitness = null;\n    _this._didSetInitialScrollPosition = false;\n    _this._modifyingSelection = false;\n    _this.imageHeight = null;\n    _this.imageWidth = null;\n    _this.calculatedImageHeight = null;\n    _this.selectedWindow = _this.props.selectedWindow;\n    _this.scrollEvent = _this.scrollEvent.bind((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this)); // this.processProps(props);\n\n    _this.scrollTop = 0;\n    return _this;\n  }\n\n  (0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(SplitTextComponent, [{\n    key: \"scrollEvent\",\n    value: function scrollEvent(e) {\n      if (this.selectedWindow === 1) return null;\n\n      if (this.selectedWindow === 2 && this.isPanelLinked) {\n        var list = [];\n        this.textAlignmentById.map(function (l) {\n          var number = document.getElementById(\"s2_\" + l.TStart);\n\n          if (number) {\n            var _position = number.getBoundingClientRect();\n\n            if (_position.top > 90) {\n              list.push({\n                id: l.id,\n                start: l.start,\n                TStart: l.TStart,\n                end: l.end,\n                TEnd: l.TEnd\n              });\n            }\n          }\n        });\n\n        if (!lodash__WEBPACK_IMPORTED_MODULE_17___default().isEmpty(list)) {\n          if (this.selectedWindow === 2) {\n            this.debouncedScroll(list);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"selectedListRow\",\n    value: function selectedListRow(props) {\n      var row = null;\n\n      if (props.activeAnnotation) {\n        row = props.splitText.getTextIndexOfPosition(props.activeAnnotation.start);\n      }\n\n      return row;\n    }\n  }, {\n    key: \"handleSelection\",\n    value: function handleSelection(e) {\n      if (!this._modifyingSelection) {\n        this.activeSelection = document.getSelection();\n\n        if (!this._mouseDown) {\n          // sometimes, this gets called after the mouseDown event handler\n          this.mouseUp();\n        }\n      } else {\n        e.stopPropagation(); // Need to set this here. If set at callsite, the event will not\n        // have time to propagate.\n\n        this._modifyingSelection = false;\n      }\n    }\n  }, {\n    key: \"mouseDown\",\n    value: function mouseDown() {\n      this._mouseDown = true;\n    }\n  }, {\n    key: \"mouseUp\",\n    value: function mouseUp() {\n      this._mouseDown = false;\n\n      if (this.activeSelection) {\n        // let segmentIds = this.processSelection(this.activeSelection);\n        // if (!segmentIds) {\n        //     segmentIds = [];\n        // }\n        // this.props.didSelectSegmentIds(segmentIds);\n        this.activeSelection = null;\n      }\n    } // processSelection(selection: Selection): string[] | null {\n    //     if (\n    //         selection.rangeCount === 0 ||\n    //         selection.isCollapsed ||\n    //         selection.type === \"Caret\"\n    //     ) {\n    //         this.selectedNodes = null;\n    //         return null;\n    //     }\n    //     const range = selection.getRangeAt(0);\n    //     const start = range.startContainer;\n    //     const startSpan = this.getNodeSegmentSpan(start);\n    //     if (!(startSpan && startSpan.parentNode)) {\n    //         If the selection is not a text segment, ignore.\n    //         Assuming if the first node is a non-segment, they\n    //         all are.\n    //         return null;\n    //     }\n    //     let nodes = this.getRangeNodes(range, startSpan.parentNode);\n    //     Check if the selection starts after the end of a node, and\n    //     if so remove that node.\n    //     if (nodes.length > 0) {\n    //         let firstNode = nodes[0];\n    //         if (range.startOffset === firstNode.textContent.length) {\n    //             nodes.shift();\n    //         }\n    //     }\n    //     const end = range.endContainer;\n    //     const endSpan = this.getNodeSegmentSpan(end);\n    //     if (!(endSpan && endSpan.parentNode)) {\n    //         return null;\n    //     }\n    //     if (endSpan && startSpan.parentNode !== endSpan.parentNode) {\n    //         Selection is spanning Texts.\n    //         We assume a selection can only run across a maximum\n    //         of two Texts.\n    //         nodes = nodes.concat(this.getRangeNodes(range, endSpan.parentNode));\n    //     } else {\n    //         Check if the selection ends before the start of a node, and\n    //         if so remove that node.\n    //         if (range.endOffset === 0) {\n    //             nodes.pop();\n    //         }\n    //     }\n    //     this.selectedNodes = nodes;\n    //     let nodeIds = [];\n    //     nodes.reduce((accumulator: string[], current: Node) => {\n    //         if (current instanceof Element) {\n    //             accumulator.push(current.id);\n    //         }\n    //         return accumulator;\n    //     }, nodeIds);\n    //     return nodeIds;\n    // }\n    // getRangeNodes(range: Range, parentNode: Node): Node[] {\n    //     let rangeSpans = [];\n    //     for (let i = 0, len = parentNode.childNodes.length; i < len; i++) {\n    //         const node = parentNode.childNodes[i];\n    //         // TODO: add polyfill for i.e.?\n    //         // e.g. https://gist.github.com/jonathansampson/6d09bd6d2e8c22c53868aec42e66b0f9\n    //         if (range.intersectsNode(node)) {\n    //             rangeSpans.push(node);\n    //         }\n    //     }\n    //     return rangeSpans;\n    // }\n\n  }, {\n    key: \"getNodeSegmentSpan\",\n    value: function getNodeSegmentSpan(node) {\n      var currentNode = node;\n      var span = null;\n      var test = /^(i|s|ds)_/;\n\n      while (!span && currentNode.parentNode) {\n        if (currentNode instanceof Element && test.test(currentNode.id)) {\n          span = currentNode;\n        }\n\n        currentNode = currentNode.parentNode;\n      }\n\n      return span;\n    }\n  }, {\n    key: \"updateList\",\n    value: function updateList() {\n      var resetCache = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var resetRows = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      if (this.props.showImages && !this.calculatedImageHeight && this.imageHeight && this.imageWidth) {\n        this.calculatedImageHeight = this.calculateImageHeight();\n      }\n\n      if (this.list) {\n        var list = this.list;\n\n        if (resetCache) {\n          if (resetRows !== null) {\n            if (!Array.isArray(resetRows)) {\n              this.cache.clear(resetRows);\n            } else if (Array.isArray(resetRows)) {\n              for (var i = 0; i < resetRows.length; i++) {\n                var resetRow = resetRows[i];\n                this.cache.clear(resetRow);\n              }\n            }\n          } else {\n            this.cache.clearAll();\n            list.measureAllRows();\n            list.recomputeRowHeights(0);\n          }\n        }\n\n        list.forceUpdateGrid();\n      }\n    }\n  }, {\n    key: \"processProps\",\n    value: function processProps(props) {\n      var _this2 = this;\n\n      var changedWitness = false;\n\n      if (!this.props.selectedWitness || props.selectedWitness && props.selectedWitness.id !== this.props.selectedWitness.id) {\n        changedWitness = true;\n        this._didSetInitialScrollPosition = false;\n      }\n\n      if (props.selectedSearchResult && (!this.props.selectedSearchResult || props.selectedSearchResult.start !== this.props.selectedSearchResult.start || props.selectedSearchResult.textId !== this.props.selectedSearchResult.textId)) {\n        console.log(\"resetting scroll position from search result\");\n        this._didSetInitialScrollPosition = false;\n      } // TODO: check if new selectedSearchResult and if so\n      // set this._didSetInitialScrollPosition = false\n      // make sure there's no numbers in selectedAnnotatedSegments\n      // as we want to pass it to Text which only expects TextSegments\n      // this._filteredSelectedAnnotatedSegments = props.selectedAnnotatedSegments.reduce(\n      //     (acc, current: TextSegment | number) => {\n      //         if (current instanceof TextSegment) acc.push(current);\n      //         return acc;\n      //     },\n      //     []\n      // );\n\n\n      var controlsMeasurements = this.getControlsMeasurements(props);\n\n      if (controlsMeasurements) {\n        this.selectedTextIndex = controlsMeasurements.selectedTextIndex;\n        this.firstSelectedSegment = controlsMeasurements.firstSelectedSegment;\n        this.splitTextRect = controlsMeasurements.splitTextRect;\n        this.selectedElementId = controlsMeasurements.selectedElementId;\n        this.selectedElementIds = controlsMeasurements.selectedElementIds;\n      }\n\n      if (props.textListVisible !== this.textListVisible || props.editMenuVisible !== this.editMenuVisible) {\n        setTimeout(function () {\n          _this2.textListVisible = props.textListVisible;\n          _this2.editMenuVisible = props.editMenuVisible;\n\n          _this2.updateList(true);\n        }, 500);\n      } else {\n        if (changedWitness) {\n          this.updateList(true);\n        } else if (this.pageBreaksChanged(this.props, props)) {\n          var selectedRows = null;\n          var currentSelectedRow = this.selectedListRow(this.props);\n          var newSelectedRow = this.selectedListRow(props);\n\n          if (currentSelectedRow && newSelectedRow) {\n            var firstChangedRow = currentSelectedRow > newSelectedRow ? newSelectedRow : currentSelectedRow;\n            var splitRowTexts = this.props.splitText.texts;\n            selectedRows = [];\n\n            for (var i = firstChangedRow, len = splitRowTexts.length; i < len; i++) {\n              selectedRows.push(i);\n            }\n          }\n\n          this.updateList(true, selectedRows);\n        } else if (this.lineBreaksChanges(this.props, props)) {\n          var selectedRow = this.selectedListRow(props);\n          if (!selectedRow) selectedRow = this.selectedListRow(this.props);\n          var _splitRowTexts = this.props.splitText.texts;\n          var _selectedRows = [];\n\n          if (selectedRow !== null) {\n            for (var _i = selectedRow, _len = _splitRowTexts.length; _i < _len; _i++) {\n              _selectedRows.push(_i);\n            }\n\n            this.updateList(true, _selectedRows);\n          }\n        } else if (this.props.fontSize !== props.fontSize) {\n          this.updateList(true);\n        } else if (this.props.activeAnnotation && props.activeAnnotation && this.annotationsInSameLocation(this.props.activeAnnotation, props.activeAnnotation)) {\n          this.updateList(true, this.selectedListRow(props));\n        } else {\n          this.updateList(this.shouldResetListCache(this.props, props));\n        }\n      }\n    }\n  }, {\n    key: \"pageBreaksChanged\",\n    value: function pageBreaksChanged(oldProps, newProps) {\n      var oldTextBreaks = oldProps.splitText.getTextsFinalPositions();\n      var newTextBreaks = newProps.splitText.getTextsFinalPositions();\n      if (oldTextBreaks.length !== newTextBreaks.length) return true;\n      return JSON.stringify(oldTextBreaks) !== JSON.stringify(newTextBreaks);\n    }\n  }, {\n    key: \"lineBreaksChanges\",\n    value: function lineBreaksChanges(oldProps, newProps) {\n      var oldActiveAnnotation = oldProps.activeAnnotation;\n      var newActiveAnnotation = newProps.activeAnnotation;\n      var hasChanged = false;\n\n      if (oldActiveAnnotation && oldActiveAnnotation.isType(ANNOTATION_TYPES.lineBreak) && newProps.activeAnnotations && !newProps.activeAnnotations.hasOwnProperty(oldActiveAnnotation.uniqueId)) {\n        hasChanged = true;\n      }\n\n      if (newActiveAnnotation && newActiveAnnotation.isType(ANNOTATION_TYPES.lineBreak) && oldProps.activeAnnotations && !oldProps.activeAnnotations.hasOwnProperty(newActiveAnnotation.uniqueId)) {\n        hasChanged = true;\n      }\n\n      return hasChanged;\n    }\n  }, {\n    key: \"shouldResetListCache\",\n    value: function shouldResetListCache(oldProps, newProps) {\n      var shouldReset = false;\n\n      if (oldProps.showImages !== newProps.showImages || this.pageBreaksChanged(oldProps, newProps)) {\n        shouldReset = true;\n      }\n\n      return shouldReset;\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(props) {\n      this.processProps(props);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      this.resizeHandler = lodash__WEBPACK_IMPORTED_MODULE_17___default().throttle(function () {\n        _this3.calculatedImageHeight = null;\n\n        _this3.updateList();\n      }, 500).bind(this);\n      window.addEventListener(\"resize\", this.resizeHandler);\n      this.debouncedScroll = lodash__WEBPACK_IMPORTED_MODULE_17___default().debounce(function (list) {\n        _this3.changeScrollToId({\n          id: list[0].TStart,\n          from: 2\n        });\n      }, 1000);\n      this.selectionHandler = lodash__WEBPACK_IMPORTED_MODULE_17___default().debounce(function (e) {\n        _this3.handleSelection(e);\n      }, 200).bind(this);\n      document.addEventListener(\"selectionchange\", this.selectionHandler);\n      document.addEventListener(\"mousedown\", this.mouseDown.bind(this), true);\n      document.addEventListener(\"mouseup\", this.mouseUp.bind(this), true);\n      this.processProps(this.props);\n      this.componentDidUpdate();\n      this.timer = setTimeout(function () {\n        _this3.resizeHandler();\n      }, 2000);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _Alignment$target,\n          _this$props,\n          _this$props2,\n          _this4 = this;\n\n      var scrollToId = this.props.scrollToId;\n      this.targetId2 = this.props.syncIdOnClick;\n      this.isPanelLinked = this.props.isPanelLinked;\n      this.selectedWindow = this.props.selectedWindow;\n      var SearchSyncId = this.props.syncIdOnSearch || null;\n      var list = this.list;\n      var result = this.props.searchResults;\n      var Alignment = this.props.textAlignment;\n      this.condition = (Alignment === null || Alignment === void 0 ? void 0 : (_Alignment$target = Alignment.target) === null || _Alignment$target === void 0 ? void 0 : _Alignment$target.witness) === this.props.selectedWitness.id;\n      var con = (prevProps === null || prevProps === void 0 ? void 0 : prevProps.searchResults) !== ((_this$props = this.props) === null || _this$props === void 0 ? void 0 : _this$props.searchResults) || (prevProps === null || prevProps === void 0 ? void 0 : prevProps.syncIdOnSearch) !== ((_this$props2 = this.props) === null || _this$props2 === void 0 ? void 0 : _this$props2.syncIdOnSearch); // for scrolling for search results;\n\n      if (con && result) {\n        if (SearchSyncId) {\n          var selectedTextIndex = this.props.splitText.getTextIndexOfPosition(SearchSyncId);\n          setTimeout(function () {\n            list.scrollToRow(selectedTextIndex);\n            setTimeout(function () {\n              list.scrollToPosition(list.props.scrollTop - 300);\n            }, 0);\n          }, 100);\n        }\n      } //for scrolling to id aligned with first window\n      //scroll control linked\n\n\n      if (this.selectedWindow === 1 && scrollToId.from === 1 && this.isPanelLinked && this.condition && scrollToId.id !== null) {\n        var _list = this.list;\n        this.textAlignmentById = this.props.textAlignmentById || [];\n        this.splitText.style.scrollBehavior = \"smooth\";\n\n        if (Alignment && this.isPanelLinked) {\n          var req = this.textAlignmentById.find(function (l) {\n            return l.start === scrollToId.id;\n          });\n          var TStart = req === null || req === void 0 ? void 0 : req.TStart;\n\n          if (TStart !== null) {\n            var _selectedTextIndex = this.props.splitText.getTextIndexOfPosition(TStart);\n\n            setTimeout(function () {\n              _list.scrollToRow(_selectedTextIndex);\n\n              setTimeout(function () {\n                _list.scrollToPosition(_list.props.scrollTop - 300);\n              }, 0);\n            }, 100);\n          }\n        }\n      } //for scrolling to the highlighted alignment if its outside visible DOM\n\n\n      if (this.isPanelLinked && this.targetId2 && scrollToId.from === null && this.selectedWindow === 1 && scrollToId.id === null && this.condition) {\n        var _clickIdObj$target_se;\n\n        var clickIdObj = Alignment.alignment.find(function (l) {\n          return _this4.targetId2 >= l.source_segment.start && _this4.targetId2 < l.source_segment.end;\n        });\n        var syncClickTargetId = clickIdObj === null || clickIdObj === void 0 ? void 0 : (_clickIdObj$target_se = clickIdObj.target_segment) === null || _clickIdObj$target_se === void 0 ? void 0 : _clickIdObj$target_se.start;\n\n        var _selectedTextIndex2 = this.props.splitText.getTextIndexOfPosition(syncClickTargetId);\n\n        setTimeout(function () {\n          list.scrollToRow(_selectedTextIndex2);\n          setTimeout(function () {\n            list.scrollToPosition(list.props.scrollTop - 300);\n          }, 0);\n        }, 100);\n      } // if (this.selectedNodes && this.selectedNodes.length > 0) {\n      //     const selectedNodes = this.selectedNodes;\n      //     const selectedSegments = this.props.selectedAnnotatedSegments;\n      //     setTimeout(() => {\n      //         let selRange = document.createRange();\n      //         let startNode = selectedNodes[0];\n      //         let endNode = selectedNodes[selectedNodes.length - 1];\n      //         // let lastSegment = selectedSegments[selectedSegments.length - 1];\n      //         if (lastSegment instanceof TextSegment) {\n      //             let lastElement = document.getElementById(\n      //                 idForSegment(lastSegment)\n      //             );\n      //             if (lastElement) endNode = lastElement;\n      //         }\n      //         if (\n      //             startNode instanceof Element &&\n      //             endNode instanceof Element\n      //         ) {\n      //             startNode = document.getElementById(startNode.id);\n      //             endNode = document.getElementById(endNode.id);\n      //             if (startNode && endNode) {\n      //                 selRange.setStart(startNode, 0);\n      //                 selRange.setEnd(endNode, endNode.childNodes.length);\n      //                 let sel = document.getSelection();\n      //                 if (sel) {\n      //                     this._modifyingSelection = true;\n      //                     sel.removeAllRanges();\n      //                     sel.addRange(selRange);\n      //                     this.selectedNodes = null;\n      //                 }\n      //             }\n      //         }\n      //     }, 0);\n      // }\n\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener(\"mousedown\", this);\n      document.removeEventListener(\"mouseup\", this);\n      window.removeEventListener(\"resize\", this.resizeHandler);\n      document.removeEventListener(\"selectionchange\", this.selectionHandler);\n      clearTimeout(this.timer);\n    }\n  }, {\n    key: \"getSelectedTextIndex\",\n    value: function getSelectedTextIndex() {\n      var selectedTextIndex = 0;\n      var startPos = null;\n\n      if (this.props.activeAnnotation) {\n        var _this$props$splitText = this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation);\n\n        var _this$props$splitText2 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_this$props$splitText, 1);\n\n        startPos = _this$props$splitText2[0];\n      } else if (this.props.selectedSearchResult) {\n        var _segment = this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start);\n\n        if (_segment instanceof lib_TextSegment__WEBPACK_IMPORTED_MODULE_18__[\"default\"]) {\n          startPos = _segment.start;\n        } else if (typeof _segment === \"number\") {\n          startPos = _segment;\n        }\n      }\n\n      if (startPos) {\n        selectedTextIndex = this.props.splitText.getTextIndexOfPosition(startPos);\n      }\n\n      return selectedTextIndex;\n    }\n  }, {\n    key: \"getControlsMeasurements\",\n    value: function getControlsMeasurements(props) {\n      if (!this.splitText) {\n        return null;\n      }\n\n      var splitTextComponent = this.splitText;\n      var selectedTextIndex = null;\n      var firstSelectedSegment = null;\n      var selectedElementId = null;\n      var splitTextRect = null;\n      var segmentIdFunction = null;\n      var selectedElementIds = [];\n      var startPos = 0;\n\n      if (props.activeAnnotation) {\n        var activeAnnotation = props.activeAnnotation;\n\n        var _props$splitText$anno = props.splitText.annotatedText.getPositionOfAnnotation(activeAnnotation);\n\n        var _props$splitText$anno2 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_props$splitText$anno, 1);\n\n        startPos = _props$splitText$anno2[0];\n\n        if (startPos === null) {\n          console.warn(\"No startPos in getControlsMeasurements\");\n          return null;\n        }\n\n        if (activeAnnotation.type === ANNOTATION_TYPES.pageBreak) {\n          startPos -= 1;\n        }\n\n        if (activeAnnotation.type === ANNOTATION_TYPES.lineBreak) {\n          startPos -= 1;\n        } // Index of text containing end of annotation\n\n\n        var positionEnd = startPos + activeAnnotation.length;\n        if (activeAnnotation.length > 0) positionEnd -= 1;\n        selectedTextIndex = props.splitText.getTextIndexOfPosition(positionEnd);\n        splitTextRect = splitTextComponent.getBoundingClientRect();\n      }\n\n      var selectedAnnotatedSegments = [];\n\n      if (props.selectedAnnotatedSegments && props.selectedAnnotatedSegments.length > 0) {\n        selectedAnnotatedSegments = props.selectedAnnotatedSegments;\n\n        for (var i = 0; i < selectedAnnotatedSegments.length; i++) {\n          var _segment2 = selectedAnnotatedSegments[i];\n\n          if (firstSelectedSegment === null && _segment2 instanceof lib_TextSegment__WEBPACK_IMPORTED_MODULE_18__[\"default\"]) {\n            firstSelectedSegment = _segment2;\n            break;\n          }\n        }\n\n        if (firstSelectedSegment) {\n          if (firstSelectedSegment.length === 0 && props.activeAnnotation && props.activeAnnotation.isInsertion) {\n            selectedElementId = idForInsertion(firstSelectedSegment);\n            segmentIdFunction = idForInsertion;\n          } else {\n            selectedElementId = idForSegment(firstSelectedSegment);\n            segmentIdFunction = idForSegment;\n          }\n        }\n      } else if (props.activeAnnotation) {\n        if (props.activeAnnotation.isDeletion) {\n          var _segment3 = new lib_TextSegment__WEBPACK_IMPORTED_MODULE_18__[\"default\"](startPos, \"\");\n\n          selectedElementId = idForDeletedSegment(_segment3);\n          segmentIdFunction = idForDeletedSegment;\n          firstSelectedSegment = _segment3;\n          selectedAnnotatedSegments = [firstSelectedSegment];\n        } else if (props.activeAnnotation.isInsertion) {\n          var _props$splitText$anno3 = props.splitText.annotatedText.getPositionOfAnnotation(props.activeAnnotation),\n              _props$splitText$anno4 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_props$splitText$anno3, 1),\n              start = _props$splitText$anno4[0];\n\n          if (start) {\n            var _segment4 = new lib_TextSegment__WEBPACK_IMPORTED_MODULE_18__[\"default\"](start, \"\");\n\n            selectedElementId = idForInsertion(_segment4);\n            segmentIdFunction = idForInsertion;\n            firstSelectedSegment = _segment4;\n            selectedAnnotatedSegments = [firstSelectedSegment];\n          }\n        } else if (props.activeAnnotation.type === ANNOTATION_TYPES.pageBreak) {\n          var _segment5 = new lib_TextSegment__WEBPACK_IMPORTED_MODULE_18__[\"default\"](startPos + 1, \"\");\n\n          var prevSegment = new lib_TextSegment__WEBPACK_IMPORTED_MODULE_18__[\"default\"](startPos, \"\");\n          selectedElementId = idForPageBreak(prevSegment);\n          firstSelectedSegment = _segment5;\n          selectedAnnotatedSegments = [_segment5];\n          selectedElementIds = [selectedElementId];\n        } else if (props.activeAnnotation.type === ANNOTATION_TYPES.lineBreak) {\n          var _segment6 = new lib_TextSegment__WEBPACK_IMPORTED_MODULE_18__[\"default\"](startPos + 1, \"\");\n\n          var _prevSegment = new lib_TextSegment__WEBPACK_IMPORTED_MODULE_18__[\"default\"](startPos, \"\");\n\n          selectedElementId = idForLineBreak(_prevSegment);\n          firstSelectedSegment = _segment6;\n          selectedAnnotatedSegments = [_segment6];\n          selectedElementIds = [selectedElementId];\n        }\n      }\n\n      if (segmentIdFunction) {\n        for (var _i2 = 0; _i2 < selectedAnnotatedSegments.length; _i2++) {\n          var _segment7 = selectedAnnotatedSegments[_i2];\n\n          if (_segment7 instanceof lib_TextSegment__WEBPACK_IMPORTED_MODULE_18__[\"default\"]) {\n            var _segmentId = segmentIdFunction(_segment7);\n\n            selectedElementIds.push(_segmentId);\n          }\n        }\n      }\n\n      if (selectedTextIndex != null && firstSelectedSegment && selectedElementId && splitTextRect) {\n        return {\n          selectedTextIndex: selectedTextIndex,\n          firstSelectedSegment: firstSelectedSegment,\n          selectedElementId: selectedElementId,\n          splitTextRect: splitTextRect,\n          selectedElementIds: selectedElementIds\n        };\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var props = this.props;\n      var rowRenderer = this.rowRenderer;\n      var cache = this.cache;\n      var key = props.selectedWitness ? props.selectedWitness.id : 0;\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement(\"div\", {\n        className: (_SplitText_css__WEBPACK_IMPORTED_MODULE_16___default().splitText2),\n        ref: function ref(div) {\n          return _this5.splitText = div;\n        },\n        key: key,\n        style: {\n          cursor: \"pointer\"\n        }\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement(\"button\", {\n        id: \"updateList2\",\n        style: {\n          display: \"none\"\n        },\n        onClick: function onClick() {\n          return _this5.updateList(true);\n        }\n      }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement(react_virtualized_dist_es_AutoSizer__WEBPACK_IMPORTED_MODULE_10__.AutoSizer, {\n        disableWidth: true\n      }, function (_ref) {\n        var height = _ref.height;\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement(react_virtualized__WEBPACK_IMPORTED_MODULE_11__.List, {\n          ref: function ref(list) {\n            return _this5.list = list;\n          },\n          height: height,\n          rowCount: props.splitText.texts.length,\n          rowHeight: cache.rowHeight,\n          rowRenderer: rowRenderer,\n          width: 1,\n          overscanRowCount: 1,\n          deferredMeasurementCache: cache,\n          onScroll: _this5.scrollEvent,\n          scrollToAlignment: \"start\",\n          containerStyle: {\n            width: \"100%\",\n            maxWidth: \"100%\"\n          },\n          style: {\n            width: \"100%\"\n          }\n        });\n      }));\n    }\n  }, {\n    key: \"getStringPositions\",\n    value: function getStringPositions(text, string, index) {\n      var uniqueId = this.props.splitText.annotatedText.getUniqueId();\n\n      if (!_searchResultsCache.hasOwnProperty(uniqueId)) {\n        _searchResultsCache = (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, uniqueId, {});\n      }\n\n      if (!_searchResultsCache[uniqueId].hasOwnProperty(string)) {\n        _searchResultsCache[uniqueId] = (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, string, {});\n      }\n\n      if (_searchResultsCache[uniqueId][string].hasOwnProperty(index)) {\n        return _searchResultsCache[uniqueId][string][index];\n      }\n\n      var splitter = new (grapheme_splitter__WEBPACK_IMPORTED_MODULE_20___default())();\n      var content = text.getText();\n      var firstSegment = text.segments[0];\n      var startingPosition = firstSegment.start;\n      var positions = [];\n      var position = content.indexOf(string);\n\n      while (position !== -1) {\n        positions.push(position);\n        position = content.indexOf(string, position + 1);\n      } // Position needs to be position in complete text\n\n\n      var verifiedPositions = {};\n\n      if (positions.length > 0) {\n        var graphemes = splitter.splitGraphemes(content);\n        var _position2 = 0;\n        var activePosition = null;\n\n        for (var i = 0; i < graphemes.length; i++) {\n          var grapheme = graphemes[i];\n          var graphemeEnd = _position2 + (grapheme.length - 1);\n\n          if (activePosition !== null) {\n            var expectedEnd = activePosition + (string.length - 1);\n\n            if (graphemeEnd >= expectedEnd) {\n              verifiedPositions[activePosition + startingPosition] = [activePosition + startingPosition, graphemeEnd + startingPosition];\n              activePosition = null;\n            }\n          } else if (positions.indexOf(_position2) !== -1) {\n            if (string.length === grapheme.length) {\n              verifiedPositions[_position2 + startingPosition] = [_position2 + startingPosition, graphemeEnd + startingPosition];\n            } else if (string.length > grapheme.length) {\n              activePosition = _position2;\n            }\n          } else {\n            activePosition = null;\n          }\n\n          _position2 += grapheme.length;\n        }\n      }\n\n      _searchResultsCache[uniqueId][string][index] = verifiedPositions;\n      return verifiedPositions;\n    }\n  }, {\n    key: \"rowRenderer\",\n    value: function rowRenderer(_ref2) {\n      var key = _ref2.key,\n          index = _ref2.index,\n          parent = _ref2.parent,\n          style = _ref2.style;\n      var props = this.props;\n      var cache = this.cache;\n      var searchStringPositions = {};\n      var searchValue = this.props.searchValue;\n\n      if (searchValue && searchValue.length > 0 && props.splitText) {\n        searchStringPositions = this.getStringPositions(props.splitText.texts[index], searchValue, index);\n      }\n\n      var newStyle = _objectSpread(_objectSpread({}, style), {}, {\n        height: style.height + 10\n      });\n\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement(react_virtualized_dist_es_CellMeasurer__WEBPACK_IMPORTED_MODULE_12__.CellMeasurer, {\n        columnIndex: 0,\n        key: key,\n        parent: parent,\n        rowIndex: index,\n        cache: cache\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement(\"div\", {\n        key: key,\n        style: newStyle,\n        ref: this.splitTextRef,\n        id: \"index2_\".concat(index),\n        className: (_SplitText_css__WEBPACK_IMPORTED_MODULE_16___default().splitTextRow)\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement(\"div\", {\n        className: (_SplitText_css__WEBPACK_IMPORTED_MODULE_16___default().splitTextRowContent)\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_8__.createElement(_Text2__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n        segmentedText: props.splitText.texts[index],\n        row: index,\n        selectedSegmentId: props.selectedSegmentId // searchValue={searchValue}\n        // selectedSearchResult={\n        //     this.props.selectedSearchResult\n        // }\n        ,\n        searchStringPositions: searchStringPositions,\n        textAlignmentById: props.textAlignmentById,\n        fontSize: props.fontSize,\n        isPanelLinked: this.props.isPanelLinked,\n        selectedSourceRange: props.selectedSourceRange,\n        selectedTargetRange: props.selectedTargetRange,\n        changeSelectedRange: props.changeSelectedRange,\n        changeSyncIdOnClick: this.props.changeSyncIdOnClick,\n        changeScrollToId: this.props.changeScrollToId,\n        condition: this.condition\n      }))));\n    }\n  }]);\n\n  return SplitTextComponent;\n}(react__WEBPACK_IMPORTED_MODULE_8__.PureComponent);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hcHAvY29tcG9uZW50cy9UZXh0RGV0YWlsMi9TcGxpdFRleHQuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsSUFBSWUsbUJBTUgsR0FBRyxFQU5KOztJQWlDcUJDOzs7OztFQWlCakI7RUFlQSw0QkFBWUMsS0FBWixFQUEwQjtJQUFBOztJQUFBOztJQUN0QiwwQkFBTUEsS0FBTjtJQUNBLE1BQUtDLGlCQUFMLEdBQXlCLEVBQXpCO0lBQ0EsTUFBS0MsZ0JBQUwsR0FBd0JGLEtBQUssQ0FBQ0UsZ0JBQTlCO0lBRUEsTUFBS0MsSUFBTCxHQUFZLElBQVo7SUFDQSxNQUFLQyxTQUFMLEdBQWlCLElBQWpCO0lBQ0EsTUFBS0MsS0FBTCxHQUFhLElBQUlqQixzRkFBSixDQUFzQjtNQUMvQmtCLFVBQVUsRUFBRTtJQURtQixDQUF0QixDQUFiO0lBR0EsTUFBS0MsV0FBTCxHQUFtQixNQUFLQSxXQUFMLENBQWlCQyxJQUFqQixpR0FBbkI7SUFDQSxNQUFLQyxhQUFMLEdBQXFCLE1BQUtULEtBQUwsQ0FBV1MsYUFBaEM7SUFDQSxNQUFLQyxlQUFMLEdBQXVCLElBQXZCO0lBQ0EsTUFBS0MsYUFBTCxHQUFxQixJQUFyQjtJQUNBLE1BQUtDLFVBQUwsR0FBa0IsS0FBbEI7SUFDQSxNQUFLQyxjQUFMLEdBQXNCLElBQXRCO0lBQ0EsTUFBS0MsNEJBQUwsR0FBb0MsS0FBcEM7SUFDQSxNQUFLQyxtQkFBTCxHQUEyQixLQUEzQjtJQUNBLE1BQUtDLFdBQUwsR0FBbUIsSUFBbkI7SUFDQSxNQUFLQyxVQUFMLEdBQWtCLElBQWxCO0lBQ0EsTUFBS0MscUJBQUwsR0FBNkIsSUFBN0I7SUFDQSxNQUFLQyxjQUFMLEdBQXNCLE1BQUtuQixLQUFMLENBQVdtQixjQUFqQztJQUNB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RUFBRSxLQUFLQyxZQUhkO1FBSUksRUFBRSxtQkFBWXRCLEtBQVosQ0FKTjtRQUtJLFNBQVMsRUFBRWxNLHFFQUFtQnlOO01BTGxDLGdCQU9JO1FBQUssU0FBUyxFQUFFek4sNEVBQTBCME47TUFBMUMsZ0JBQ0ksaURBQUMsK0NBQUQ7UUFDSSxhQUFhLEVBQUVqTixLQUFLLENBQUNJLFNBQU4sQ0FBZ0JxRixLQUFoQixDQUFzQmdHLEtBQXRCLENBRG5CO1FBRUksR0FBRyxFQUFFQSxLQUZUO1FBR0ksaUJBQWlCLEVBQUV6TCxLQUFLLENBQUNrTixpQkFIN0IsQ0FJSTtRQUNBO1FBQ0E7UUFDQTtRQVBKO1FBUUkscUJBQXFCLEVBQUVQLHFCQVIzQjtRQVNJLGlCQUFpQixFQUFFM00sS0FBSyxDQUFDQyxpQkFUN0I7UUFVSSxRQUFRLEVBQUVELEtBQUssQ0FBQzZGLFFBVnBCO1FBV0ksYUFBYSxFQUFFLEtBQUs3RixLQUFMLENBQVdTLGFBWDlCO1FBWUksbUJBQW1CLEVBQUVULEtBQUssQ0FBQ21OLG1CQVovQjtRQWFJLG1CQUFtQixFQUFFbk4sS0FBSyxDQUFDb04sbUJBYi9CO1FBY0ksbUJBQW1CLEVBQUVwTixLQUFLLENBQUNxTixtQkFkL0I7UUFlSSxtQkFBbUIsRUFBRSxLQUFLck4sS0FBTCxDQUFXc04sbUJBZnBDO1FBZ0JJLGdCQUFnQixFQUFFLEtBQUt0TixLQUFMLENBQVdFLGdCQWhCakM7UUFpQkksU0FBUyxFQUFFLEtBQUtzSTtNQWpCcEIsRUFESixDQVBKLENBUEosQ0FESjtJQXVDSDs7OztFQXI1QjJDekoiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZW1pbnVzY2xpZW50Ly4vYXBwL2NvbXBvbmVudHMvVGV4dERldGFpbDIvU3BsaXRUZXh0LmpzPzI1MzIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQGZsb3dcclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XHJcbmltcG9ydCB7IEF1dG9TaXplciB9IGZyb20gXCJyZWFjdC12aXJ0dWFsaXplZC9kaXN0L2VzL0F1dG9TaXplclwiO1xyXG5pbXBvcnQgeyBMaXN0IH0gZnJvbSBcInJlYWN0LXZpcnR1YWxpemVkXCI7XHJcbmltcG9ydCB7XHJcbiAgICBDZWxsTWVhc3VyZXIsXHJcbiAgICBDZWxsTWVhc3VyZXJDYWNoZSxcclxufSBmcm9tIFwicmVhY3QtdmlydHVhbGl6ZWQvZGlzdC9lcy9DZWxsTWVhc3VyZXJcIjtcclxuaW1wb3J0IFwicmVhY3QtdmlydHVhbGl6ZWQvc3R5bGVzLmNzc1wiO1xyXG5pbXBvcnQgVGV4dDIgZnJvbSBcIi4vVGV4dDJcIjtcclxuaW1wb3J0IFNwbGl0VGV4dCBmcm9tIFwibGliL1NwbGl0VGV4dFwiO1xyXG5pbXBvcnQgc3R5bGVzIGZyb20gXCIuL1NwbGl0VGV4dC5jc3NcIjtcclxuaW1wb3J0IF8sIHsgc3BsaXQgfSBmcm9tIFwibG9kYXNoXCI7XHJcbmltcG9ydCBUZXh0U2VnbWVudCBmcm9tIFwibGliL1RleHRTZWdtZW50XCI7XHJcbmltcG9ydCBXaXRuZXNzIGZyb20gXCJsaWIvV2l0bmVzc1wiO1xyXG5pbXBvcnQgR3JhcGhlbWVTcGxpdHRlciBmcm9tIFwiZ3JhcGhlbWUtc3BsaXR0ZXJcIjtcclxuaW1wb3J0IHsgQm94IH0gZnJvbSBcIkBtdWkvbWF0ZXJpYWxcIjtcclxuXHJcbmxldCBfc2VhcmNoUmVzdWx0c0NhY2hlOiB7XHJcbiAgICBbc3BsaXRUZXh0VW5pcXVlSWQ6IHN0cmluZ106IHtcclxuICAgICAgICBbc2VhcmNoVGVybTogc3RyaW5nXToge1xyXG4gICAgICAgICAgICBbaW5kZXg6IG51bWJlcl06IHsgW3Bvc2l0aW9uOiBudW1iZXJdOiBbbnVtYmVyLCBudW1iZXJdIH0sXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbn0gPSB7fTtcclxuXHJcbmV4cG9ydCB0eXBlIFByb3BzID0ge1xyXG4gICAgc3BsaXRUZXh0OiBTcGxpdFRleHQsXHJcbiAgICBkaWRTZWxlY3RTZWdtZW50SWRzOiAoc2VnbWVudElkczogc3RyaW5nW10pID0+IHZvaWQsXHJcbiAgICBsaW1pdFdpZHRoOiBib29sZWFuLFxyXG4gICAgLy8gc2VsZWN0ZWRBbm5vdGF0ZWRTZWdtZW50czogQXJyYXk8VGV4dFNlZ21lbnQgfCBudW1iZXI+LFxyXG4gICAgc2VsZWN0ZWRTZWdtZW50SWQ6IChzZWdtZW50SWQ6IHN0cmluZykgPT4gdm9pZCxcclxuICAgIHNlbGVjdGVkV2l0bmVzczogV2l0bmVzcyB8IG51bGwsXHJcbiAgICAvLyBzZWxlY3RlZFNlYXJjaFJlc3VsdDoge1xyXG4gICAgLy8gICAgIHRleHRJZDogbnVtYmVyLFxyXG4gICAgLy8gICAgIHN0YXJ0OiBudW1iZXIsXHJcbiAgICAvLyAgICAgbGVuZ3RoOiBudW1iZXJcclxuICAgIC8vIH0gfCBudWxsLFxyXG4gICAgLy8gc2VhcmNoVmFsdWU6IHN0cmluZyB8IG51bGwsXHJcbiAgICBmb250U2l6ZTogbnVtYmVyLFxyXG4gICAgaXNQYW5lbExpbmtlZDogQm9vbGVhbixcclxuICAgIHRleHRBbGlnbm1lbnQ6IHt9LFxyXG4gICAgdGV4dEFsaWdubWVudEJ5SWQ6IHt9LFxyXG4gICAgY2hhbmdlU2Nyb2xsVG9JZDogKCkgPT4gdm9pZCxcclxuICAgIHNlbGVjdGVkV2luZG93OiBCb29sZWFuLFxyXG4gICAgc2VsZWN0ZWRUYXJnZXRSYW5nZTogW10sXHJcbiAgICBzZWxlY3RlZFNvdXJjZVJhbmdlOiBbXSxcclxuICAgIHN5bmNJZE9uU2VhcmNoOiBTdHJpbmcsXHJcbiAgICBjaGFuZ2VTeW5jSWRPbkNsaWNrOiAoKSA9PiB2b2lkLFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3BsaXRUZXh0Q29tcG9uZW50IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxQcm9wcz4ge1xyXG4gICAgbGlzdDogTGlzdCB8IG51bGw7XHJcbiAgICBzcGxpdFRleHQ6IEhUTUxEaXZFbGVtZW50IHwgbnVsbDtcclxuICAgIGRpZFNlbGVjdFNlZ21lbnRJZHM7XHJcbiAgICBjYWNoZTogQ2VsbE1lYXN1cmVyQ2FjaGU7XHJcbiAgICByb3dSZW5kZXJlcjogKHBhcmFtczoge1xyXG4gICAgICAgIGtleTogc3RyaW5nLFxyXG4gICAgICAgIGluZGV4OiBudW1iZXIsXHJcbiAgICAgICAgcGFyZW50OiB7fSxcclxuICAgICAgICBzdHlsZToge30sXHJcbiAgICB9KSA9PiBSZWFjdC5FbGVtZW50PENlbGxNZWFzdXJlcj47XHJcbiAgICByZXNpemVIYW5kbGVyOiAoKSA9PiB2b2lkO1xyXG4gICAgc2VsZWN0aW9uSGFuZGxlcjogKGU6IEV2ZW50KSA9PiB2b2lkO1xyXG4gICAgdGV4dExpc3RWaXNpYmxlOiBib29sZWFuO1xyXG4gICAgZWRpdE1lbnVWaXNpYmxlOiBCb29sZWFuO1xyXG4gICAgYWN0aXZlU2VsZWN0aW9uOiBTZWxlY3Rpb24gfCBudWxsO1xyXG4gICAgc2VsZWN0ZWROb2RlczogTm9kZVtdIHwgbnVsbDtcclxuICAgIC8vIFdoZXRoZXIgdGhlIG1vdXNlIGJ1dHRvbiBpcyBkb3duXHJcbiAgICB0ZXh0QWxpZ25tZW50QnlJZDtcclxuICAgIGNoYW5nZVNjcm9sbFRvSWQ6ICgpID0+IHZvaWQ7XHJcblxyXG4gICAgc2VsZWN0ZWRUZXh0SW5kZXg6IG51bWJlciB8IG51bGw7XHJcbiAgICBzcGxpdFRleHRSZWN0OiBDbGllbnRSZWN0IHwgbnVsbDtcclxuICAgIGZpcnN0U2VsZWN0ZWRTZWdtZW50OiBUZXh0U2VnbWVudCB8IG51bGw7XHJcbiAgICBzZWxlY3RlZEVsZW1lbnRJZDogc3RyaW5nIHwgbnVsbDtcclxuICAgIHNlbGVjdGVkRWxlbWVudElkczogc3RyaW5nW10gfCBudWxsO1xyXG4gICAgc2VsZWN0ZWRXaW5kb3c6IEJvb2xlYW47XHJcbiAgICBzY3JvbGxFdmVudDogKCkgPT4gdm9pZDtcclxuICAgIG1vdXNlRW50ZXI6ICgpID0+IHZvaWQ7XHJcbiAgICBtb3VzZUxlZnQ6ICgpID0+IHZvaWQ7XHJcbiAgICBzY3JvbGxUb3A7XHJcbiAgICBkZWJvdW5jZWRTY3JvbGw7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy50ZXh0QWxpZ25tZW50QnlJZCA9IFtdO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlU2Nyb2xsVG9JZCA9IHByb3BzLmNoYW5nZVNjcm9sbFRvSWQ7XHJcblxyXG4gICAgICAgIHRoaXMubGlzdCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zcGxpdFRleHQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2FjaGUgPSBuZXcgQ2VsbE1lYXN1cmVyQ2FjaGUoe1xyXG4gICAgICAgICAgICBmaXhlZFdpZHRoOiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucm93UmVuZGVyZXIgPSB0aGlzLnJvd1JlbmRlcmVyLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5pc1BhbmVsTGlua2VkID0gdGhpcy5wcm9wcy5pc1BhbmVsTGlua2VkO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlU2VsZWN0aW9uID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX21vdXNlRG93biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2FjdGl2ZVdpdG5lc3MgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2RpZFNldEluaXRpYWxTY3JvbGxQb3NpdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX21vZGlmeWluZ1NlbGVjdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaW1hZ2VIZWlnaHQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW1hZ2VXaWR0aCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVkSW1hZ2VIZWlnaHQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRXaW5kb3cgPSB0aGlzLnByb3BzLnNlbGVjdGVkV2luZG93O1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsRXZlbnQgPSB0aGlzLnNjcm9sbEV2ZW50LmJpbmQodGhpcyk7XHJcbiAgICAgICAgLy8gdGhpcy5wcm9jZXNzUHJvcHMocHJvcHMpO1xyXG4gICAgICAgIHRoaXMuc2Nyb2xsVG9wID0gMDtcclxuICAgIH1cclxuICAgIHNjcm9sbEV2ZW50KGUpIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFdpbmRvdyA9PT0gMSkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRXaW5kb3cgPT09IDIgJiYgdGhpcy5pc1BhbmVsTGlua2VkKSB7XHJcbiAgICAgICAgICAgIGxldCBsaXN0ID0gW107XHJcbiAgICAgICAgICAgIHRoaXMudGV4dEFsaWdubWVudEJ5SWQubWFwKChsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbnVtYmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzMl9cIiArIGwuVFN0YXJ0KTtcclxuICAgICAgICAgICAgICAgIGlmIChudW1iZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcG9zaXRpb24gPSBudW1iZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uLnRvcCA+IDkwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogbC5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBsLnN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVFN0YXJ0OiBsLlRTdGFydCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbC5lbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBURW5kOiBsLlRFbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICghXy5pc0VtcHR5KGxpc3QpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFdpbmRvdyA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVib3VuY2VkU2Nyb2xsKGxpc3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNlbGVjdGVkTGlzdFJvdyhwcm9wczogUHJvcHMpOiBudW1iZXIgfCBudWxsIHtcclxuICAgICAgICBsZXQgcm93ID0gbnVsbDtcclxuICAgICAgICBpZiAocHJvcHMuYWN0aXZlQW5ub3RhdGlvbikge1xyXG4gICAgICAgICAgICByb3cgPSBwcm9wcy5zcGxpdFRleHQuZ2V0VGV4dEluZGV4T2ZQb3NpdGlvbihcclxuICAgICAgICAgICAgICAgIHByb3BzLmFjdGl2ZUFubm90YXRpb24uc3RhcnRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJvdztcclxuICAgIH1cclxuICAgIGhhbmRsZVNlbGVjdGlvbihlOiBFdmVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fbW9kaWZ5aW5nU2VsZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlU2VsZWN0aW9uID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fbW91c2VEb3duKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzb21ldGltZXMsIHRoaXMgZ2V0cyBjYWxsZWQgYWZ0ZXIgdGhlIG1vdXNlRG93biBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlVXAoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIC8vIE5lZWQgdG8gc2V0IHRoaXMgaGVyZS4gSWYgc2V0IGF0IGNhbGxzaXRlLCB0aGUgZXZlbnQgd2lsbCBub3RcclxuICAgICAgICAgICAgLy8gaGF2ZSB0aW1lIHRvIHByb3BhZ2F0ZS5cclxuICAgICAgICAgICAgdGhpcy5fbW9kaWZ5aW5nU2VsZWN0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbW91c2VEb3duKCkge1xyXG4gICAgICAgIHRoaXMuX21vdXNlRG93biA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgbW91c2VVcCgpIHtcclxuICAgICAgICB0aGlzLl9tb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVTZWxlY3Rpb24pIHtcclxuICAgICAgICAgICAgLy8gbGV0IHNlZ21lbnRJZHMgPSB0aGlzLnByb2Nlc3NTZWxlY3Rpb24odGhpcy5hY3RpdmVTZWxlY3Rpb24pO1xyXG4gICAgICAgICAgICAvLyBpZiAoIXNlZ21lbnRJZHMpIHtcclxuICAgICAgICAgICAgLy8gICAgIHNlZ21lbnRJZHMgPSBbXTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyB0aGlzLnByb3BzLmRpZFNlbGVjdFNlZ21lbnRJZHMoc2VnbWVudElkcyk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlU2VsZWN0aW9uID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHJvY2Vzc1NlbGVjdGlvbihzZWxlY3Rpb246IFNlbGVjdGlvbik6IHN0cmluZ1tdIHwgbnVsbCB7XHJcbiAgICAvLyAgICAgaWYgKFxyXG4gICAgLy8gICAgICAgICBzZWxlY3Rpb24ucmFuZ2VDb3VudCA9PT0gMCB8fFxyXG4gICAgLy8gICAgICAgICBzZWxlY3Rpb24uaXNDb2xsYXBzZWQgfHxcclxuICAgIC8vICAgICAgICAgc2VsZWN0aW9uLnR5cGUgPT09IFwiQ2FyZXRcIlxyXG4gICAgLy8gICAgICkge1xyXG4gICAgLy8gICAgICAgICB0aGlzLnNlbGVjdGVkTm9kZXMgPSBudWxsO1xyXG4gICAgLy8gICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIC8vICAgICB9XHJcblxyXG4gICAgLy8gICAgIGNvbnN0IHJhbmdlID0gc2VsZWN0aW9uLmdldFJhbmdlQXQoMCk7XHJcbiAgICAvLyAgICAgY29uc3Qgc3RhcnQgPSByYW5nZS5zdGFydENvbnRhaW5lcjtcclxuICAgIC8vICAgICBjb25zdCBzdGFydFNwYW4gPSB0aGlzLmdldE5vZGVTZWdtZW50U3BhbihzdGFydCk7XHJcbiAgICAvLyAgICAgaWYgKCEoc3RhcnRTcGFuICYmIHN0YXJ0U3Bhbi5wYXJlbnROb2RlKSkge1xyXG4gICAgLy8gICAgICAgICBJZiB0aGUgc2VsZWN0aW9uIGlzIG5vdCBhIHRleHQgc2VnbWVudCwgaWdub3JlLlxyXG4gICAgLy8gICAgICAgICBBc3N1bWluZyBpZiB0aGUgZmlyc3Qgbm9kZSBpcyBhIG5vbi1zZWdtZW50LCB0aGV5XHJcbiAgICAvLyAgICAgICAgIGFsbCBhcmUuXHJcbiAgICAvLyAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgLy8gICAgIH1cclxuXHJcbiAgICAvLyAgICAgbGV0IG5vZGVzID0gdGhpcy5nZXRSYW5nZU5vZGVzKHJhbmdlLCBzdGFydFNwYW4ucGFyZW50Tm9kZSk7XHJcbiAgICAvLyAgICAgQ2hlY2sgaWYgdGhlIHNlbGVjdGlvbiBzdGFydHMgYWZ0ZXIgdGhlIGVuZCBvZiBhIG5vZGUsIGFuZFxyXG4gICAgLy8gICAgIGlmIHNvIHJlbW92ZSB0aGF0IG5vZGUuXHJcbiAgICAvLyAgICAgaWYgKG5vZGVzLmxlbmd0aCA+IDApIHtcclxuICAgIC8vICAgICAgICAgbGV0IGZpcnN0Tm9kZSA9IG5vZGVzWzBdO1xyXG4gICAgLy8gICAgICAgICBpZiAocmFuZ2Uuc3RhcnRPZmZzZXQgPT09IGZpcnN0Tm9kZS50ZXh0Q29udGVudC5sZW5ndGgpIHtcclxuICAgIC8vICAgICAgICAgICAgIG5vZGVzLnNoaWZ0KCk7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICB9XHJcblxyXG4gICAgLy8gICAgIGNvbnN0IGVuZCA9IHJhbmdlLmVuZENvbnRhaW5lcjtcclxuICAgIC8vICAgICBjb25zdCBlbmRTcGFuID0gdGhpcy5nZXROb2RlU2VnbWVudFNwYW4oZW5kKTtcclxuICAgIC8vICAgICBpZiAoIShlbmRTcGFuICYmIGVuZFNwYW4ucGFyZW50Tm9kZSkpIHtcclxuICAgIC8vICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgIGlmIChlbmRTcGFuICYmIHN0YXJ0U3Bhbi5wYXJlbnROb2RlICE9PSBlbmRTcGFuLnBhcmVudE5vZGUpIHtcclxuICAgIC8vICAgICAgICAgU2VsZWN0aW9uIGlzIHNwYW5uaW5nIFRleHRzLlxyXG4gICAgLy8gICAgICAgICBXZSBhc3N1bWUgYSBzZWxlY3Rpb24gY2FuIG9ubHkgcnVuIGFjcm9zcyBhIG1heGltdW1cclxuICAgIC8vICAgICAgICAgb2YgdHdvIFRleHRzLlxyXG4gICAgLy8gICAgICAgICBub2RlcyA9IG5vZGVzLmNvbmNhdCh0aGlzLmdldFJhbmdlTm9kZXMocmFuZ2UsIGVuZFNwYW4ucGFyZW50Tm9kZSkpO1xyXG4gICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAvLyAgICAgICAgIENoZWNrIGlmIHRoZSBzZWxlY3Rpb24gZW5kcyBiZWZvcmUgdGhlIHN0YXJ0IG9mIGEgbm9kZSwgYW5kXHJcbiAgICAvLyAgICAgICAgIGlmIHNvIHJlbW92ZSB0aGF0IG5vZGUuXHJcbiAgICAvLyAgICAgICAgIGlmIChyYW5nZS5lbmRPZmZzZXQgPT09IDApIHtcclxuICAgIC8vICAgICAgICAgICAgIG5vZGVzLnBvcCgpO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgIHRoaXMuc2VsZWN0ZWROb2RlcyA9IG5vZGVzO1xyXG4gICAgLy8gICAgIGxldCBub2RlSWRzID0gW107XHJcbiAgICAvLyAgICAgbm9kZXMucmVkdWNlKChhY2N1bXVsYXRvcjogc3RyaW5nW10sIGN1cnJlbnQ6IE5vZGUpID0+IHtcclxuICAgIC8vICAgICAgICAgaWYgKGN1cnJlbnQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XHJcbiAgICAvLyAgICAgICAgICAgICBhY2N1bXVsYXRvci5wdXNoKGN1cnJlbnQuaWQpO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcclxuICAgIC8vICAgICB9LCBub2RlSWRzKTtcclxuXHJcbiAgICAvLyAgICAgcmV0dXJuIG5vZGVJZHM7XHJcbiAgICAvLyB9XHJcbiAgICAvLyBnZXRSYW5nZU5vZGVzKHJhbmdlOiBSYW5nZSwgcGFyZW50Tm9kZTogTm9kZSk6IE5vZGVbXSB7XHJcbiAgICAvLyAgICAgbGV0IHJhbmdlU3BhbnMgPSBbXTtcclxuICAgIC8vICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gcGFyZW50Tm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAvLyAgICAgICAgIGNvbnN0IG5vZGUgPSBwYXJlbnROb2RlLmNoaWxkTm9kZXNbaV07XHJcbiAgICAvLyAgICAgICAgIC8vIFRPRE86IGFkZCBwb2x5ZmlsbCBmb3IgaS5lLj9cclxuICAgIC8vICAgICAgICAgLy8gZS5nLiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9qb25hdGhhbnNhbXBzb24vNmQwOWJkNmQyZThjMjJjNTM4NjhhZWM0MmU2NmIwZjlcclxuICAgIC8vICAgICAgICAgaWYgKHJhbmdlLmludGVyc2VjdHNOb2RlKG5vZGUpKSB7XHJcbiAgICAvLyAgICAgICAgICAgICByYW5nZVNwYW5zLnB1c2gobm9kZSk7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICB9XHJcbiAgICAvLyAgICAgcmV0dXJuIHJhbmdlU3BhbnM7XHJcbiAgICAvLyB9XHJcbiAgICBnZXROb2RlU2VnbWVudFNwYW4obm9kZTogTm9kZSk6IEVsZW1lbnQgfCBudWxsIHtcclxuICAgICAgICBsZXQgY3VycmVudE5vZGUgPSBub2RlO1xyXG4gICAgICAgIGxldCBzcGFuID0gbnVsbDtcclxuICAgICAgICBjb25zdCB0ZXN0ID0gL14oaXxzfGRzKV8vO1xyXG4gICAgICAgIHdoaWxlICghc3BhbiAmJiBjdXJyZW50Tm9kZS5wYXJlbnROb2RlKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQgJiYgdGVzdC50ZXN0KGN1cnJlbnROb2RlLmlkKSkge1xyXG4gICAgICAgICAgICAgICAgc3BhbiA9IGN1cnJlbnROb2RlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN1cnJlbnROb2RlID0gY3VycmVudE5vZGUucGFyZW50Tm9kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzcGFuO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUxpc3QoXHJcbiAgICAgICAgcmVzZXRDYWNoZTogYm9vbGVhbiA9IHRydWUsXHJcbiAgICAgICAgcmVzZXRSb3dzOiBudW1iZXIgfCBudW1iZXJbXSB8IG51bGwgPSBudWxsXHJcbiAgICApIHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuc2hvd0ltYWdlcyAmJlxyXG4gICAgICAgICAgICAhdGhpcy5jYWxjdWxhdGVkSW1hZ2VIZWlnaHQgJiZcclxuICAgICAgICAgICAgdGhpcy5pbWFnZUhlaWdodCAmJlxyXG4gICAgICAgICAgICB0aGlzLmltYWdlV2lkdGhcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVkSW1hZ2VIZWlnaHQgPSB0aGlzLmNhbGN1bGF0ZUltYWdlSGVpZ2h0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxpc3QpIHtcclxuICAgICAgICAgICAgY29uc3QgbGlzdCA9IHRoaXMubGlzdDtcclxuICAgICAgICAgICAgaWYgKHJlc2V0Q2FjaGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNldFJvd3MgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVzZXRSb3dzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlLmNsZWFyKHJlc2V0Um93cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlc2V0Um93cykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXNldFJvd3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXNldFJvdyA9IHJlc2V0Um93c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUuY2xlYXIocmVzZXRSb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlLmNsZWFyQWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdC5tZWFzdXJlQWxsUm93cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3QucmVjb21wdXRlUm93SGVpZ2h0cygwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsaXN0LmZvcmNlVXBkYXRlR3JpZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm9jZXNzUHJvcHMocHJvcHM6IFByb3BzKSB7XHJcbiAgICAgICAgbGV0IGNoYW5nZWRXaXRuZXNzID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhdGhpcy5wcm9wcy5zZWxlY3RlZFdpdG5lc3MgfHxcclxuICAgICAgICAgICAgKHByb3BzLnNlbGVjdGVkV2l0bmVzcyAmJlxyXG4gICAgICAgICAgICAgICAgcHJvcHMuc2VsZWN0ZWRXaXRuZXNzLmlkICE9PSB0aGlzLnByb3BzLnNlbGVjdGVkV2l0bmVzcy5pZClcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgY2hhbmdlZFdpdG5lc3MgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9kaWRTZXRJbml0aWFsU2Nyb2xsUG9zaXRpb24gPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgcHJvcHMuc2VsZWN0ZWRTZWFyY2hSZXN1bHQgJiZcclxuICAgICAgICAgICAgKCF0aGlzLnByb3BzLnNlbGVjdGVkU2VhcmNoUmVzdWx0IHx8XHJcbiAgICAgICAgICAgICAgICBwcm9wcy5zZWxlY3RlZFNlYXJjaFJlc3VsdC5zdGFydCAhPT1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnNlbGVjdGVkU2VhcmNoUmVzdWx0LnN0YXJ0IHx8XHJcbiAgICAgICAgICAgICAgICBwcm9wcy5zZWxlY3RlZFNlYXJjaFJlc3VsdC50ZXh0SWQgIT09XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zZWxlY3RlZFNlYXJjaFJlc3VsdC50ZXh0SWQpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVzZXR0aW5nIHNjcm9sbCBwb3NpdGlvbiBmcm9tIHNlYXJjaCByZXN1bHRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpZFNldEluaXRpYWxTY3JvbGxQb3NpdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVE9ETzogY2hlY2sgaWYgbmV3IHNlbGVjdGVkU2VhcmNoUmVzdWx0IGFuZCBpZiBzb1xyXG4gICAgICAgIC8vIHNldCB0aGlzLl9kaWRTZXRJbml0aWFsU2Nyb2xsUG9zaXRpb24gPSBmYWxzZVxyXG5cclxuICAgICAgICAvLyBtYWtlIHN1cmUgdGhlcmUncyBubyBudW1iZXJzIGluIHNlbGVjdGVkQW5ub3RhdGVkU2VnbWVudHNcclxuICAgICAgICAvLyBhcyB3ZSB3YW50IHRvIHBhc3MgaXQgdG8gVGV4dCB3aGljaCBvbmx5IGV4cGVjdHMgVGV4dFNlZ21lbnRzXHJcbiAgICAgICAgLy8gdGhpcy5fZmlsdGVyZWRTZWxlY3RlZEFubm90YXRlZFNlZ21lbnRzID0gcHJvcHMuc2VsZWN0ZWRBbm5vdGF0ZWRTZWdtZW50cy5yZWR1Y2UoXHJcbiAgICAgICAgLy8gICAgIChhY2MsIGN1cnJlbnQ6IFRleHRTZWdtZW50IHwgbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICBpZiAoY3VycmVudCBpbnN0YW5jZW9mIFRleHRTZWdtZW50KSBhY2MucHVzaChjdXJyZW50KTtcclxuICAgICAgICAvLyAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgLy8gICAgIH0sXHJcbiAgICAgICAgLy8gICAgIFtdXHJcbiAgICAgICAgLy8gKTtcclxuXHJcbiAgICAgICAgY29uc3QgY29udHJvbHNNZWFzdXJlbWVudHMgPSB0aGlzLmdldENvbnRyb2xzTWVhc3VyZW1lbnRzKHByb3BzKTtcclxuICAgICAgICBpZiAoY29udHJvbHNNZWFzdXJlbWVudHMpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRleHRJbmRleCA9IGNvbnRyb2xzTWVhc3VyZW1lbnRzLnNlbGVjdGVkVGV4dEluZGV4O1xyXG4gICAgICAgICAgICB0aGlzLmZpcnN0U2VsZWN0ZWRTZWdtZW50ID1cclxuICAgICAgICAgICAgICAgIGNvbnRyb2xzTWVhc3VyZW1lbnRzLmZpcnN0U2VsZWN0ZWRTZWdtZW50O1xyXG4gICAgICAgICAgICB0aGlzLnNwbGl0VGV4dFJlY3QgPSBjb250cm9sc01lYXN1cmVtZW50cy5zcGxpdFRleHRSZWN0O1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRWxlbWVudElkID0gY29udHJvbHNNZWFzdXJlbWVudHMuc2VsZWN0ZWRFbGVtZW50SWQ7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRFbGVtZW50SWRzID0gY29udHJvbHNNZWFzdXJlbWVudHMuc2VsZWN0ZWRFbGVtZW50SWRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBwcm9wcy50ZXh0TGlzdFZpc2libGUgIT09IHRoaXMudGV4dExpc3RWaXNpYmxlIHx8XHJcbiAgICAgICAgICAgIHByb3BzLmVkaXRNZW51VmlzaWJsZSAhPT0gdGhpcy5lZGl0TWVudVZpc2libGVcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRleHRMaXN0VmlzaWJsZSA9IHByb3BzLnRleHRMaXN0VmlzaWJsZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWRpdE1lbnVWaXNpYmxlID0gcHJvcHMuZWRpdE1lbnVWaXNpYmxlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMaXN0KHRydWUpO1xyXG4gICAgICAgICAgICB9LCA1MDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChjaGFuZ2VkV2l0bmVzcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMaXN0KHRydWUpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGFnZUJyZWFrc0NoYW5nZWQodGhpcy5wcm9wcywgcHJvcHMpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRSb3dzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50U2VsZWN0ZWRSb3cgPSB0aGlzLnNlbGVjdGVkTGlzdFJvdyh0aGlzLnByb3BzKTtcclxuICAgICAgICAgICAgICAgIGxldCBuZXdTZWxlY3RlZFJvdyA9IHRoaXMuc2VsZWN0ZWRMaXN0Um93KHByb3BzKTtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2VsZWN0ZWRSb3cgJiYgbmV3U2VsZWN0ZWRSb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZmlyc3RDaGFuZ2VkUm93ID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNlbGVjdGVkUm93ID4gbmV3U2VsZWN0ZWRSb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbmV3U2VsZWN0ZWRSb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY3VycmVudFNlbGVjdGVkUm93O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgc3BsaXRSb3dUZXh0cyA9IHRoaXMucHJvcHMuc3BsaXRUZXh0LnRleHRzO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpID0gZmlyc3RDaGFuZ2VkUm93LCBsZW4gPSBzcGxpdFJvd1RleHRzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSA8IGxlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSsrXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93cy5wdXNoKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTGlzdCh0cnVlLCBzZWxlY3RlZFJvd3MpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMubGluZUJyZWFrc0NoYW5nZXModGhpcy5wcm9wcywgcHJvcHMpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRSb3cgPSB0aGlzLnNlbGVjdGVkTGlzdFJvdyhwcm9wcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkUm93KVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUm93ID0gdGhpcy5zZWxlY3RlZExpc3RSb3codGhpcy5wcm9wcyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3BsaXRSb3dUZXh0cyA9IHRoaXMucHJvcHMuc3BsaXRUZXh0LnRleHRzO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkUm93cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkUm93ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSBzZWxlY3RlZFJvdywgbGVuID0gc3BsaXRSb3dUZXh0cy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPCBsZW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkrK1xyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFJvd3MucHVzaChpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMaXN0KHRydWUsIHNlbGVjdGVkUm93cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5mb250U2l6ZSAhPT0gcHJvcHMuZm9udFNpemUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTGlzdCh0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYWN0aXZlQW5ub3RhdGlvbiAmJlxyXG4gICAgICAgICAgICAgICAgcHJvcHMuYWN0aXZlQW5ub3RhdGlvbiAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5hbm5vdGF0aW9uc0luU2FtZUxvY2F0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYWN0aXZlQW5ub3RhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5hY3RpdmVBbm5vdGF0aW9uXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVMaXN0KHRydWUsIHRoaXMuc2VsZWN0ZWRMaXN0Um93KHByb3BzKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxpc3QodGhpcy5zaG91bGRSZXNldExpc3RDYWNoZSh0aGlzLnByb3BzLCBwcm9wcykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBhZ2VCcmVha3NDaGFuZ2VkKG9sZFByb3BzOiBQcm9wcywgbmV3UHJvcHM6IFByb3BzKSB7XHJcbiAgICAgICAgY29uc3Qgb2xkVGV4dEJyZWFrcyA9IG9sZFByb3BzLnNwbGl0VGV4dC5nZXRUZXh0c0ZpbmFsUG9zaXRpb25zKCk7XHJcbiAgICAgICAgY29uc3QgbmV3VGV4dEJyZWFrcyA9IG5ld1Byb3BzLnNwbGl0VGV4dC5nZXRUZXh0c0ZpbmFsUG9zaXRpb25zKCk7XHJcblxyXG4gICAgICAgIGlmIChvbGRUZXh0QnJlYWtzLmxlbmd0aCAhPT0gbmV3VGV4dEJyZWFrcy5sZW5ndGgpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2xkVGV4dEJyZWFrcykgIT09IEpTT04uc3RyaW5naWZ5KG5ld1RleHRCcmVha3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGxpbmVCcmVha3NDaGFuZ2VzKG9sZFByb3BzOiBQcm9wcywgbmV3UHJvcHM6IFByb3BzKSB7XHJcbiAgICAgICAgbGV0IG9sZEFjdGl2ZUFubm90YXRpb24gPSBvbGRQcm9wcy5hY3RpdmVBbm5vdGF0aW9uO1xyXG4gICAgICAgIGxldCBuZXdBY3RpdmVBbm5vdGF0aW9uID0gbmV3UHJvcHMuYWN0aXZlQW5ub3RhdGlvbjtcclxuICAgICAgICBsZXQgaGFzQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIG9sZEFjdGl2ZUFubm90YXRpb24gJiZcclxuICAgICAgICAgICAgb2xkQWN0aXZlQW5ub3RhdGlvbi5pc1R5cGUoQU5OT1RBVElPTl9UWVBFUy5saW5lQnJlYWspICYmXHJcbiAgICAgICAgICAgIG5ld1Byb3BzLmFjdGl2ZUFubm90YXRpb25zICYmXHJcbiAgICAgICAgICAgICFuZXdQcm9wcy5hY3RpdmVBbm5vdGF0aW9ucy5oYXNPd25Qcm9wZXJ0eShcclxuICAgICAgICAgICAgICAgIG9sZEFjdGl2ZUFubm90YXRpb24udW5pcXVlSWRcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICBoYXNDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgbmV3QWN0aXZlQW5ub3RhdGlvbiAmJlxyXG4gICAgICAgICAgICBuZXdBY3RpdmVBbm5vdGF0aW9uLmlzVHlwZShBTk5PVEFUSU9OX1RZUEVTLmxpbmVCcmVhaykgJiZcclxuICAgICAgICAgICAgb2xkUHJvcHMuYWN0aXZlQW5ub3RhdGlvbnMgJiZcclxuICAgICAgICAgICAgIW9sZFByb3BzLmFjdGl2ZUFubm90YXRpb25zLmhhc093blByb3BlcnR5KFxyXG4gICAgICAgICAgICAgICAgbmV3QWN0aXZlQW5ub3RhdGlvbi51bmlxdWVJZFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGhhc0NoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGhhc0NoYW5nZWQ7XHJcbiAgICB9XHJcbiAgICBzaG91bGRSZXNldExpc3RDYWNoZShvbGRQcm9wczogUHJvcHMsIG5ld1Byb3BzOiBQcm9wcykge1xyXG4gICAgICAgIGxldCBzaG91bGRSZXNldCA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgb2xkUHJvcHMuc2hvd0ltYWdlcyAhPT0gbmV3UHJvcHMuc2hvd0ltYWdlcyB8fFxyXG4gICAgICAgICAgICB0aGlzLnBhZ2VCcmVha3NDaGFuZ2VkKG9sZFByb3BzLCBuZXdQcm9wcylcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgc2hvdWxkUmVzZXQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHNob3VsZFJlc2V0O1xyXG4gICAgfVxyXG5cclxuICAgIFVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKHByb3BzOiBQcm9wcykge1xyXG4gICAgICAgIHRoaXMucHJvY2Vzc1Byb3BzKHByb3BzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICB0aGlzLnJlc2l6ZUhhbmRsZXIgPSBfLnRocm90dGxlKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVkSW1hZ2VIZWlnaHQgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxpc3QoKTtcclxuICAgICAgICB9LCA1MDApLmJpbmQodGhpcyk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5yZXNpemVIYW5kbGVyKTtcclxuXHJcbiAgICAgICAgdGhpcy5kZWJvdW5jZWRTY3JvbGwgPSBfLmRlYm91bmNlKChsaXN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlU2Nyb2xsVG9JZCh7IGlkOiBsaXN0WzBdLlRTdGFydCwgZnJvbTogMiB9KTtcclxuICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGlvbkhhbmRsZXIgPSBfLmRlYm91bmNlKChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlU2VsZWN0aW9uKGUpO1xyXG4gICAgICAgIH0sIDIwMCkuYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNlbGVjdGlvbmNoYW5nZVwiLCB0aGlzLnNlbGVjdGlvbkhhbmRsZXIpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMubW91c2VEb3duLmJpbmQodGhpcyksIHRydWUpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMubW91c2VVcC5iaW5kKHRoaXMpLCB0cnVlKTtcclxuXHJcbiAgICAgICAgdGhpcy5wcm9jZXNzUHJvcHModGhpcy5wcm9wcyk7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnREaWRVcGRhdGUoKTtcclxuXHJcbiAgICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUhhbmRsZXIoKTtcclxuICAgICAgICB9LCAyMDAwKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcclxuICAgICAgICBsZXQgc2Nyb2xsVG9JZCA9IHRoaXMucHJvcHMuc2Nyb2xsVG9JZDtcclxuICAgICAgICB0aGlzLnRhcmdldElkMiA9IHRoaXMucHJvcHMuc3luY0lkT25DbGljaztcclxuICAgICAgICB0aGlzLmlzUGFuZWxMaW5rZWQgPSB0aGlzLnByb3BzLmlzUGFuZWxMaW5rZWQ7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZFdpbmRvdyA9IHRoaXMucHJvcHMuc2VsZWN0ZWRXaW5kb3c7XHJcbiAgICAgICAgbGV0IFNlYXJjaFN5bmNJZCA9IHRoaXMucHJvcHMuc3luY0lkT25TZWFyY2ggfHwgbnVsbDtcclxuICAgICAgICBsZXQgbGlzdCA9IHRoaXMubGlzdDtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5wcm9wcy5zZWFyY2hSZXN1bHRzO1xyXG4gICAgICAgIGxldCBBbGlnbm1lbnQgPSB0aGlzLnByb3BzLnRleHRBbGlnbm1lbnQ7XHJcbiAgICAgICAgdGhpcy5jb25kaXRpb24gPVxyXG4gICAgICAgICAgICBBbGlnbm1lbnQ/LnRhcmdldD8ud2l0bmVzcyA9PT0gdGhpcy5wcm9wcy5zZWxlY3RlZFdpdG5lc3MuaWQ7XHJcblxyXG4gICAgICAgIGxldCBjb24gPVxyXG4gICAgICAgICAgICBwcmV2UHJvcHM/LnNlYXJjaFJlc3VsdHMgIT09IHRoaXMucHJvcHM/LnNlYXJjaFJlc3VsdHMgfHxcclxuICAgICAgICAgICAgcHJldlByb3BzPy5zeW5jSWRPblNlYXJjaCAhPT0gdGhpcy5wcm9wcz8uc3luY0lkT25TZWFyY2g7XHJcblxyXG4gICAgICAgIC8vIGZvciBzY3JvbGxpbmcgZm9yIHNlYXJjaCByZXN1bHRzO1xyXG5cclxuICAgICAgICBpZiAoY29uICYmIHJlc3VsdCkge1xyXG4gICAgICAgICAgICBpZiAoU2VhcmNoU3luY0lkKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRUZXh0SW5kZXggPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuc3BsaXRUZXh0LmdldFRleHRJbmRleE9mUG9zaXRpb24oU2VhcmNoU3luY0lkKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3Quc2Nyb2xsVG9Sb3coc2VsZWN0ZWRUZXh0SW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0LnNjcm9sbFRvUG9zaXRpb24obGlzdC5wcm9wcy5zY3JvbGxUb3AgLSAzMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9mb3Igc2Nyb2xsaW5nIHRvIGlkIGFsaWduZWQgd2l0aCBmaXJzdCB3aW5kb3dcclxuICAgICAgICAvL3Njcm9sbCBjb250cm9sIGxpbmtlZFxyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRXaW5kb3cgPT09IDEgJiZcclxuICAgICAgICAgICAgc2Nyb2xsVG9JZC5mcm9tID09PSAxICYmXHJcbiAgICAgICAgICAgIHRoaXMuaXNQYW5lbExpbmtlZCAmJlxyXG4gICAgICAgICAgICB0aGlzLmNvbmRpdGlvbiAmJlxyXG4gICAgICAgICAgICBzY3JvbGxUb0lkLmlkICE9PSBudWxsXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGxldCBsaXN0ID0gdGhpcy5saXN0O1xyXG4gICAgICAgICAgICB0aGlzLnRleHRBbGlnbm1lbnRCeUlkID0gdGhpcy5wcm9wcy50ZXh0QWxpZ25tZW50QnlJZCB8fCBbXTtcclxuICAgICAgICAgICAgdGhpcy5zcGxpdFRleHQuc3R5bGUuc2Nyb2xsQmVoYXZpb3IgPSBcInNtb290aFwiO1xyXG4gICAgICAgICAgICBpZiAoQWxpZ25tZW50ICYmIHRoaXMuaXNQYW5lbExpbmtlZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlcSA9IHRoaXMudGV4dEFsaWdubWVudEJ5SWQuZmluZChcclxuICAgICAgICAgICAgICAgICAgICAobCkgPT4gbC5zdGFydCA9PT0gc2Nyb2xsVG9JZC5pZFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGxldCBUU3RhcnQgPSByZXE/LlRTdGFydDtcclxuICAgICAgICAgICAgICAgIGlmIChUU3RhcnQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRUZXh0SW5kZXggPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnNwbGl0VGV4dC5nZXRUZXh0SW5kZXhPZlBvc2l0aW9uKFRTdGFydCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0LnNjcm9sbFRvUm93KHNlbGVjdGVkVGV4dEluZGV4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5zY3JvbGxUb1Bvc2l0aW9uKGxpc3QucHJvcHMuc2Nyb2xsVG9wIC0gMzAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9mb3Igc2Nyb2xsaW5nIHRvIHRoZSBoaWdobGlnaHRlZCBhbGlnbm1lbnQgaWYgaXRzIG91dHNpZGUgdmlzaWJsZSBET01cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuaXNQYW5lbExpbmtlZCAmJlxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldElkMiAmJlxyXG4gICAgICAgICAgICBzY3JvbGxUb0lkLmZyb20gPT09IG51bGwgJiZcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFdpbmRvdyA9PT0gMSAmJlxyXG4gICAgICAgICAgICBzY3JvbGxUb0lkLmlkID09PSBudWxsICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGxldCBjbGlja0lkT2JqID0gQWxpZ25tZW50LmFsaWdubWVudC5maW5kKFxyXG4gICAgICAgICAgICAgICAgKGwpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRJZDIgPj0gbC5zb3VyY2Vfc2VnbWVudC5zdGFydCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0SWQyIDwgbC5zb3VyY2Vfc2VnbWVudC5lbmRcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbGV0IHN5bmNDbGlja1RhcmdldElkID0gY2xpY2tJZE9iaj8udGFyZ2V0X3NlZ21lbnQ/LnN0YXJ0O1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWRUZXh0SW5kZXggPVxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zcGxpdFRleHQuZ2V0VGV4dEluZGV4T2ZQb3NpdGlvbihzeW5jQ2xpY2tUYXJnZXRJZCk7XHJcblxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxpc3Quc2Nyb2xsVG9Sb3coc2VsZWN0ZWRUZXh0SW5kZXgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3Quc2Nyb2xsVG9Qb3NpdGlvbihsaXN0LnByb3BzLnNjcm9sbFRvcCAtIDMwMCk7XHJcbiAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGlmICh0aGlzLnNlbGVjdGVkTm9kZXMgJiYgdGhpcy5zZWxlY3RlZE5vZGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyAgICAgY29uc3Qgc2VsZWN0ZWROb2RlcyA9IHRoaXMuc2VsZWN0ZWROb2RlcztcclxuICAgICAgICAvLyAgICAgY29uc3Qgc2VsZWN0ZWRTZWdtZW50cyA9IHRoaXMucHJvcHMuc2VsZWN0ZWRBbm5vdGF0ZWRTZWdtZW50cztcclxuICAgICAgICAvLyAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICBsZXQgc2VsUmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xyXG4gICAgICAgIC8vICAgICAgICAgbGV0IHN0YXJ0Tm9kZSA9IHNlbGVjdGVkTm9kZXNbMF07XHJcbiAgICAgICAgLy8gICAgICAgICBsZXQgZW5kTm9kZSA9IHNlbGVjdGVkTm9kZXNbc2VsZWN0ZWROb2Rlcy5sZW5ndGggLSAxXTtcclxuICAgICAgICAvLyAgICAgICAgIC8vIGxldCBsYXN0U2VnbWVudCA9IHNlbGVjdGVkU2VnbWVudHNbc2VsZWN0ZWRTZWdtZW50cy5sZW5ndGggLSAxXTtcclxuICAgICAgICAvLyAgICAgICAgIGlmIChsYXN0U2VnbWVudCBpbnN0YW5jZW9mIFRleHRTZWdtZW50KSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgbGV0IGxhc3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlkRm9yU2VnbWVudChsYXN0U2VnbWVudClcclxuICAgICAgICAvLyAgICAgICAgICAgICApO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGlmIChsYXN0RWxlbWVudCkgZW5kTm9kZSA9IGxhc3RFbGVtZW50O1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgaWYgKFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIHN0YXJ0Tm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQgJiZcclxuICAgICAgICAvLyAgICAgICAgICAgICBlbmROb2RlIGluc3RhbmNlb2YgRWxlbWVudFxyXG4gICAgICAgIC8vICAgICAgICAgKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgc3RhcnROb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RhcnROb2RlLmlkKTtcclxuICAgICAgICAvLyAgICAgICAgICAgICBlbmROb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZW5kTm9kZS5pZCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaWYgKHN0YXJ0Tm9kZSAmJiBlbmROb2RlKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHNlbFJhbmdlLnNldFN0YXJ0KHN0YXJ0Tm9kZSwgMCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHNlbFJhbmdlLnNldEVuZChlbmROb2RlLCBlbmROb2RlLmNoaWxkTm9kZXMubGVuZ3RoKTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgbGV0IHNlbCA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBpZiAoc2VsKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb2RpZnlpbmdTZWxlY3Rpb24gPSB0cnVlO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgc2VsLmFkZFJhbmdlKHNlbFJhbmdlKTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROb2RlcyA9IG51bGw7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgIH0sIDApO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMpO1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMucmVzaXplSGFuZGxlcik7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzZWxlY3Rpb25jaGFuZ2VcIiwgdGhpcy5zZWxlY3Rpb25IYW5kbGVyKTtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2VsZWN0ZWRUZXh0SW5kZXgoKTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgc2VsZWN0ZWRUZXh0SW5kZXggPSAwO1xyXG4gICAgICAgIGxldCBzdGFydFBvcyA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWN0aXZlQW5ub3RhdGlvbikge1xyXG4gICAgICAgICAgICBbc3RhcnRQb3NdID1cclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuc3BsaXRUZXh0LmFubm90YXRlZFRleHQuZ2V0UG9zaXRpb25PZkFubm90YXRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY3RpdmVBbm5vdGF0aW9uXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5zZWxlY3RlZFNlYXJjaFJlc3VsdCkge1xyXG4gICAgICAgICAgICBsZXQgc2VnbWVudCA9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnNwbGl0VGV4dC5hbm5vdGF0ZWRUZXh0LnNlZ21lbnRBdE9yaWdpbmFsUG9zaXRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zZWxlY3RlZFNlYXJjaFJlc3VsdC5zdGFydFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBUZXh0U2VnbWVudCkge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRQb3MgPSBzZWdtZW50LnN0YXJ0O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWdtZW50ID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydFBvcyA9IHNlZ21lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXJ0UG9zKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkVGV4dEluZGV4ID1cclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuc3BsaXRUZXh0LmdldFRleHRJbmRleE9mUG9zaXRpb24oc3RhcnRQb3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRUZXh0SW5kZXg7XHJcbiAgICB9XHJcbiAgICBnZXRDb250cm9sc01lYXN1cmVtZW50cyhwcm9wczogUHJvcHMpOiB7XHJcbiAgICAgICAgc2VsZWN0ZWRUZXh0SW5kZXg6IG51bWJlcixcclxuICAgICAgICBmaXJzdFNlbGVjdGVkU2VnbWVudDogVGV4dFNlZ21lbnQsXHJcbiAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWQ6IHN0cmluZyxcclxuICAgICAgICBzcGxpdFRleHRSZWN0OiBDbGllbnRSZWN0LFxyXG4gICAgICAgIHNlbGVjdGVkRWxlbWVudElkczogc3RyaW5nW10sXHJcbiAgICB9IHwgbnVsbCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNwbGl0VGV4dCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHNwbGl0VGV4dENvbXBvbmVudCA9IHRoaXMuc3BsaXRUZXh0O1xyXG4gICAgICAgIGxldCBzZWxlY3RlZFRleHRJbmRleCA9IG51bGw7XHJcbiAgICAgICAgbGV0IGZpcnN0U2VsZWN0ZWRTZWdtZW50ID0gbnVsbDtcclxuICAgICAgICBsZXQgc2VsZWN0ZWRFbGVtZW50SWQgPSBudWxsO1xyXG4gICAgICAgIGxldCBzcGxpdFRleHRSZWN0ID0gbnVsbDtcclxuICAgICAgICBsZXQgc2VnbWVudElkRnVuY3Rpb246IG51bGwgfCAoKHNlZ21lbnQ6IFRleHRTZWdtZW50KSA9PiBzdHJpbmcpID0gbnVsbDtcclxuICAgICAgICBsZXQgc2VsZWN0ZWRFbGVtZW50SWRzID0gW107XHJcbiAgICAgICAgbGV0IHN0YXJ0UG9zID0gMDtcclxuICAgICAgICBpZiAocHJvcHMuYWN0aXZlQW5ub3RhdGlvbikge1xyXG4gICAgICAgICAgICBsZXQgYWN0aXZlQW5ub3RhdGlvbiA9IHByb3BzLmFjdGl2ZUFubm90YXRpb247XHJcbiAgICAgICAgICAgIFtzdGFydFBvc10gPVxyXG4gICAgICAgICAgICAgICAgcHJvcHMuc3BsaXRUZXh0LmFubm90YXRlZFRleHQuZ2V0UG9zaXRpb25PZkFubm90YXRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlQW5ub3RhdGlvblxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKHN0YXJ0UG9zID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJObyBzdGFydFBvcyBpbiBnZXRDb250cm9sc01lYXN1cmVtZW50c1wiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmVBbm5vdGF0aW9uLnR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMucGFnZUJyZWFrKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydFBvcyAtPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmVBbm5vdGF0aW9uLnR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMubGluZUJyZWFrKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydFBvcyAtPSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJbmRleCBvZiB0ZXh0IGNvbnRhaW5pbmcgZW5kIG9mIGFubm90YXRpb25cclxuICAgICAgICAgICAgbGV0IHBvc2l0aW9uRW5kID0gc3RhcnRQb3MgKyBhY3RpdmVBbm5vdGF0aW9uLmxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKGFjdGl2ZUFubm90YXRpb24ubGVuZ3RoID4gMCkgcG9zaXRpb25FbmQgLT0gMTtcclxuICAgICAgICAgICAgc2VsZWN0ZWRUZXh0SW5kZXggPVxyXG4gICAgICAgICAgICAgICAgcHJvcHMuc3BsaXRUZXh0LmdldFRleHRJbmRleE9mUG9zaXRpb24ocG9zaXRpb25FbmQpO1xyXG4gICAgICAgICAgICBzcGxpdFRleHRSZWN0ID0gc3BsaXRUZXh0Q29tcG9uZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgc2VsZWN0ZWRBbm5vdGF0ZWRTZWdtZW50cyA9IFtdO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgcHJvcHMuc2VsZWN0ZWRBbm5vdGF0ZWRTZWdtZW50cyAmJlxyXG4gICAgICAgICAgICBwcm9wcy5zZWxlY3RlZEFubm90YXRlZFNlZ21lbnRzLmxlbmd0aCA+IDBcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRBbm5vdGF0ZWRTZWdtZW50cyA9IHByb3BzLnNlbGVjdGVkQW5ub3RhdGVkU2VnbWVudHM7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0ZWRBbm5vdGF0ZWRTZWdtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlZ21lbnQgPSBzZWxlY3RlZEFubm90YXRlZFNlZ21lbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0U2VsZWN0ZWRTZWdtZW50ID09PSBudWxsICYmXHJcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudCBpbnN0YW5jZW9mIFRleHRTZWdtZW50XHJcbiAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdFNlbGVjdGVkU2VnbWVudCA9IHNlZ21lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZpcnN0U2VsZWN0ZWRTZWdtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RTZWxlY3RlZFNlZ21lbnQubGVuZ3RoID09PSAwICYmXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMuYWN0aXZlQW5ub3RhdGlvbiAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHByb3BzLmFjdGl2ZUFubm90YXRpb24uaXNJbnNlcnRpb25cclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkID0gaWRGb3JJbnNlcnRpb24oZmlyc3RTZWxlY3RlZFNlZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnRJZEZ1bmN0aW9uID0gaWRGb3JJbnNlcnRpb247XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkID0gaWRGb3JTZWdtZW50KGZpcnN0U2VsZWN0ZWRTZWdtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50SWRGdW5jdGlvbiA9IGlkRm9yU2VnbWVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAocHJvcHMuYWN0aXZlQW5ub3RhdGlvbikge1xyXG4gICAgICAgICAgICBpZiAocHJvcHMuYWN0aXZlQW5ub3RhdGlvbi5pc0RlbGV0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VnbWVudCA9IG5ldyBUZXh0U2VnbWVudChzdGFydFBvcywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZCA9IGlkRm9yRGVsZXRlZFNlZ21lbnQoc2VnbWVudCk7XHJcbiAgICAgICAgICAgICAgICBzZWdtZW50SWRGdW5jdGlvbiA9IGlkRm9yRGVsZXRlZFNlZ21lbnQ7XHJcbiAgICAgICAgICAgICAgICBmaXJzdFNlbGVjdGVkU2VnbWVudCA9IHNlZ21lbnQ7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEFubm90YXRlZFNlZ21lbnRzID0gW2ZpcnN0U2VsZWN0ZWRTZWdtZW50XTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9wcy5hY3RpdmVBbm5vdGF0aW9uLmlzSW5zZXJ0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbc3RhcnRdID1cclxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5zcGxpdFRleHQuYW5ub3RhdGVkVGV4dC5nZXRQb3NpdGlvbk9mQW5ub3RhdGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuYWN0aXZlQW5ub3RhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2VnbWVudCA9IG5ldyBUZXh0U2VnbWVudChzdGFydCwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWQgPSBpZEZvckluc2VydGlvbihzZWdtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50SWRGdW5jdGlvbiA9IGlkRm9ySW5zZXJ0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0U2VsZWN0ZWRTZWdtZW50ID0gc2VnbWVudDtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEFubm90YXRlZFNlZ21lbnRzID0gW2ZpcnN0U2VsZWN0ZWRTZWdtZW50XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgICAgIHByb3BzLmFjdGl2ZUFubm90YXRpb24udHlwZSA9PT0gQU5OT1RBVElPTl9UWVBFUy5wYWdlQnJlYWtcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VnbWVudCA9IG5ldyBUZXh0U2VnbWVudChzdGFydFBvcyArIDEsIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHByZXZTZWdtZW50ID0gbmV3IFRleHRTZWdtZW50KHN0YXJ0UG9zLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkID0gaWRGb3JQYWdlQnJlYWsocHJldlNlZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgZmlyc3RTZWxlY3RlZFNlZ21lbnQgPSBzZWdtZW50O1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRBbm5vdGF0ZWRTZWdtZW50cyA9IFtzZWdtZW50XTtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudElkcyA9IFtzZWxlY3RlZEVsZW1lbnRJZF07XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgICAgICBwcm9wcy5hY3RpdmVBbm5vdGF0aW9uLnR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMubGluZUJyZWFrXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlZ21lbnQgPSBuZXcgVGV4dFNlZ21lbnQoc3RhcnRQb3MgKyAxLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIGxldCBwcmV2U2VnbWVudCA9IG5ldyBUZXh0U2VnbWVudChzdGFydFBvcywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZCA9IGlkRm9yTGluZUJyZWFrKHByZXZTZWdtZW50KTtcclxuICAgICAgICAgICAgICAgIGZpcnN0U2VsZWN0ZWRTZWdtZW50ID0gc2VnbWVudDtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkQW5ub3RhdGVkU2VnbWVudHMgPSBbc2VnbWVudF07XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHMgPSBbc2VsZWN0ZWRFbGVtZW50SWRdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZWdtZW50SWRGdW5jdGlvbikge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdGVkQW5ub3RhdGVkU2VnbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBzZWdtZW50ID0gc2VsZWN0ZWRBbm5vdGF0ZWRTZWdtZW50c1tpXTtcclxuICAgICAgICAgICAgICAgIGlmIChzZWdtZW50IGluc3RhbmNlb2YgVGV4dFNlZ21lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWdtZW50SWQgPSBzZWdtZW50SWRGdW5jdGlvbihzZWdtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZHMucHVzaChzZWdtZW50SWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgc2VsZWN0ZWRUZXh0SW5kZXggIT0gbnVsbCAmJlxyXG4gICAgICAgICAgICBmaXJzdFNlbGVjdGVkU2VnbWVudCAmJlxyXG4gICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZCAmJlxyXG4gICAgICAgICAgICBzcGxpdFRleHRSZWN0XHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFRleHRJbmRleDogc2VsZWN0ZWRUZXh0SW5kZXgsXHJcbiAgICAgICAgICAgICAgICBmaXJzdFNlbGVjdGVkU2VnbWVudDogZmlyc3RTZWxlY3RlZFNlZ21lbnQsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEVsZW1lbnRJZDogc2VsZWN0ZWRFbGVtZW50SWQsXHJcbiAgICAgICAgICAgICAgICBzcGxpdFRleHRSZWN0OiBzcGxpdFRleHRSZWN0LFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWRzOiBzZWxlY3RlZEVsZW1lbnRJZHMsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgY29uc3Qgcm93UmVuZGVyZXIgPSB0aGlzLnJvd1JlbmRlcmVyO1xyXG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5jYWNoZTtcclxuICAgICAgICBjb25zdCBrZXkgPSBwcm9wcy5zZWxlY3RlZFdpdG5lc3MgPyBwcm9wcy5zZWxlY3RlZFdpdG5lc3MuaWQgOiAwO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5zcGxpdFRleHQyfVxyXG4gICAgICAgICAgICAgICAgcmVmPXsoZGl2KSA9PiAodGhpcy5zcGxpdFRleHQgPSBkaXYpfVxyXG4gICAgICAgICAgICAgICAga2V5PXtrZXl9XHJcbiAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJ1cGRhdGVMaXN0MlwiXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogXCJub25lXCIgfX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnVwZGF0ZUxpc3QodHJ1ZSl9XHJcbiAgICAgICAgICAgICAgICA+PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8QXV0b1NpemVyIGRpc2FibGVXaWR0aD5cclxuICAgICAgICAgICAgICAgICAgICB7KHsgaGVpZ2h0IH0pID0+IChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPExpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17KGxpc3QpID0+ICh0aGlzLmxpc3QgPSBsaXN0KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD17aGVpZ2h0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93Q291bnQ9e3Byb3BzLnNwbGl0VGV4dC50ZXh0cy5sZW5ndGh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dIZWlnaHQ9e2NhY2hlLnJvd0hlaWdodH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd1JlbmRlcmVyPXtyb3dSZW5kZXJlcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcnNjYW5Sb3dDb3VudD17MX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkTWVhc3VyZW1lbnRDYWNoZT17Y2FjaGV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNjcm9sbD17dGhpcy5zY3JvbGxFdmVudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvQWxpZ25tZW50PVwic3RhcnRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyU3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPjwvTGlzdD5cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgPC9BdXRvU2l6ZXI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICBnZXRTdHJpbmdQb3NpdGlvbnMoXHJcbiAgICAgICAgdGV4dDogU2VnbWVudGVkVGV4dCxcclxuICAgICAgICBzdHJpbmc6IHN0cmluZyxcclxuICAgICAgICBpbmRleDogbnVtYmVyXHJcbiAgICApOiB7IFtwb3NpdGlvbjogbnVtYmVyXTogW251bWJlciwgbnVtYmVyXSB9IHtcclxuICAgICAgICBjb25zdCB1bmlxdWVJZCA9IHRoaXMucHJvcHMuc3BsaXRUZXh0LmFubm90YXRlZFRleHQuZ2V0VW5pcXVlSWQoKTtcclxuXHJcbiAgICAgICAgaWYgKCFfc2VhcmNoUmVzdWx0c0NhY2hlLmhhc093blByb3BlcnR5KHVuaXF1ZUlkKSkge1xyXG4gICAgICAgICAgICBfc2VhcmNoUmVzdWx0c0NhY2hlID0ge1xyXG4gICAgICAgICAgICAgICAgW3VuaXF1ZUlkXToge30sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIV9zZWFyY2hSZXN1bHRzQ2FjaGVbdW5pcXVlSWRdLmhhc093blByb3BlcnR5KHN0cmluZykpIHtcclxuICAgICAgICAgICAgX3NlYXJjaFJlc3VsdHNDYWNoZVt1bmlxdWVJZF0gPSB7XHJcbiAgICAgICAgICAgICAgICBbc3RyaW5nXToge30sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoX3NlYXJjaFJlc3VsdHNDYWNoZVt1bmlxdWVJZF1bc3RyaW5nXS5oYXNPd25Qcm9wZXJ0eShpbmRleCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9zZWFyY2hSZXN1bHRzQ2FjaGVbdW5pcXVlSWRdW3N0cmluZ11baW5kZXhdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3BsaXR0ZXIgPSBuZXcgR3JhcGhlbWVTcGxpdHRlcigpO1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0ZXh0LmdldFRleHQoKTtcclxuICAgICAgICBjb25zdCBmaXJzdFNlZ21lbnQgPSB0ZXh0LnNlZ21lbnRzWzBdO1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0aW5nUG9zaXRpb24gPSBmaXJzdFNlZ21lbnQuc3RhcnQ7XHJcbiAgICAgICAgbGV0IHBvc2l0aW9ucyA9IFtdO1xyXG4gICAgICAgIGxldCBwb3NpdGlvbiA9IGNvbnRlbnQuaW5kZXhPZihzdHJpbmcpO1xyXG4gICAgICAgIHdoaWxlIChwb3NpdGlvbiAhPT0gLTEpIHtcclxuICAgICAgICAgICAgcG9zaXRpb25zLnB1c2gocG9zaXRpb24pO1xyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IGNvbnRlbnQuaW5kZXhPZihzdHJpbmcsIHBvc2l0aW9uICsgMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQb3NpdGlvbiBuZWVkcyB0byBiZSBwb3NpdGlvbiBpbiBjb21wbGV0ZSB0ZXh0XHJcbiAgICAgICAgbGV0IHZlcmlmaWVkUG9zaXRpb25zOiB7IFtwb3NpdGlvbjogbnVtYmVyXTogW251bWJlciwgbnVtYmVyXSB9ID0ge307XHJcbiAgICAgICAgaWYgKHBvc2l0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyYXBoZW1lcyA9IHNwbGl0dGVyLnNwbGl0R3JhcGhlbWVzKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICBsZXQgcG9zaXRpb24gPSAwO1xyXG4gICAgICAgICAgICBsZXQgYWN0aXZlUG9zaXRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyYXBoZW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ3JhcGhlbWUgPSBncmFwaGVtZXNbaV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBncmFwaGVtZUVuZCA9IHBvc2l0aW9uICsgKGdyYXBoZW1lLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVBvc2l0aW9uICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV4cGVjdGVkRW5kID0gYWN0aXZlUG9zaXRpb24gKyAoc3RyaW5nLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChncmFwaGVtZUVuZCA+PSBleHBlY3RlZEVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZmllZFBvc2l0aW9uc1thY3RpdmVQb3NpdGlvbiArIHN0YXJ0aW5nUG9zaXRpb25dID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlUG9zaXRpb24gKyBzdGFydGluZ1Bvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JhcGhlbWVFbmQgKyBzdGFydGluZ1Bvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVQb3NpdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwb3NpdGlvbnMuaW5kZXhPZihwb3NpdGlvbikgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmluZy5sZW5ndGggPT09IGdyYXBoZW1lLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJpZmllZFBvc2l0aW9uc1twb3NpdGlvbiArIHN0YXJ0aW5nUG9zaXRpb25dID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gKyBzdGFydGluZ1Bvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JhcGhlbWVFbmQgKyBzdGFydGluZ1Bvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RyaW5nLmxlbmd0aCA+IGdyYXBoZW1lLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVQb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlUG9zaXRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uICs9IGdyYXBoZW1lLmxlbmd0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX3NlYXJjaFJlc3VsdHNDYWNoZVt1bmlxdWVJZF1bc3RyaW5nXVtpbmRleF0gPSB2ZXJpZmllZFBvc2l0aW9ucztcclxuXHJcbiAgICAgICAgcmV0dXJuIHZlcmlmaWVkUG9zaXRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIHJvd1JlbmRlcmVyKHtcclxuICAgICAgICBrZXksXHJcbiAgICAgICAgaW5kZXgsXHJcbiAgICAgICAgcGFyZW50LFxyXG4gICAgICAgIHN0eWxlLFxyXG4gICAgfToge1xyXG4gICAgICAgIGtleTogc3RyaW5nLFxyXG4gICAgICAgIGluZGV4OiBudW1iZXIsXHJcbiAgICAgICAgcGFyZW50OiB7fSxcclxuICAgICAgICBzdHlsZToge30sXHJcbiAgICB9KTogUmVhY3QuRWxlbWVudDxDZWxsTWVhc3VyZXI+IHtcclxuICAgICAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmNhY2hlO1xyXG5cclxuICAgICAgICBsZXQgc2VhcmNoU3RyaW5nUG9zaXRpb25zID0ge307XHJcbiAgICAgICAgbGV0IHNlYXJjaFZhbHVlID0gdGhpcy5wcm9wcy5zZWFyY2hWYWx1ZTtcclxuICAgICAgICBpZiAoc2VhcmNoVmFsdWUgJiYgc2VhcmNoVmFsdWUubGVuZ3RoID4gMCAmJiBwcm9wcy5zcGxpdFRleHQpIHtcclxuICAgICAgICAgICAgc2VhcmNoU3RyaW5nUG9zaXRpb25zID0gdGhpcy5nZXRTdHJpbmdQb3NpdGlvbnMoXHJcbiAgICAgICAgICAgICAgICBwcm9wcy5zcGxpdFRleHQudGV4dHNbaW5kZXhdLFxyXG4gICAgICAgICAgICAgICAgc2VhcmNoVmFsdWUsXHJcbiAgICAgICAgICAgICAgICBpbmRleFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG5ld1N0eWxlID0geyAuLi5zdHlsZSwgaGVpZ2h0OiBzdHlsZS5oZWlnaHQgKyAxMCB9O1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxDZWxsTWVhc3VyZXJcclxuICAgICAgICAgICAgICAgIGNvbHVtbkluZGV4PXswfVxyXG4gICAgICAgICAgICAgICAga2V5PXtrZXl9XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQ9e3BhcmVudH1cclxuICAgICAgICAgICAgICAgIHJvd0luZGV4PXtpbmRleH1cclxuICAgICAgICAgICAgICAgIGNhY2hlPXtjYWNoZX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgIGtleT17a2V5fVxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXtuZXdTdHlsZX1cclxuICAgICAgICAgICAgICAgICAgICByZWY9e3RoaXMuc3BsaXRUZXh0UmVmfVxyXG4gICAgICAgICAgICAgICAgICAgIGlkPXtgaW5kZXgyXyR7aW5kZXh9YH1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5zcGxpdFRleHRSb3d9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3N0eWxlcy5zcGxpdFRleHRSb3dDb250ZW50fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFRleHQyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ZWRUZXh0PXtwcm9wcy5zcGxpdFRleHQudGV4dHNbaW5kZXhdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93PXtpbmRleH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkU2VnbWVudElkPXtwcm9wcy5zZWxlY3RlZFNlZ21lbnRJZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlYXJjaFZhbHVlPXtzZWFyY2hWYWx1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbGVjdGVkU2VhcmNoUmVzdWx0PXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnByb3BzLnNlbGVjdGVkU2VhcmNoUmVzdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hTdHJpbmdQb3NpdGlvbnM9e3NlYXJjaFN0cmluZ1Bvc2l0aW9uc31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbm1lbnRCeUlkPXtwcm9wcy50ZXh0QWxpZ25tZW50QnlJZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplPXtwcm9wcy5mb250U2l6ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUGFuZWxMaW5rZWQ9e3RoaXMucHJvcHMuaXNQYW5lbExpbmtlZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkU291cmNlUmFuZ2U9e3Byb3BzLnNlbGVjdGVkU291cmNlUmFuZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFRhcmdldFJhbmdlPXtwcm9wcy5zZWxlY3RlZFRhcmdldFJhbmdlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlU2VsZWN0ZWRSYW5nZT17cHJvcHMuY2hhbmdlU2VsZWN0ZWRSYW5nZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVN5bmNJZE9uQ2xpY2s9e3RoaXMucHJvcHMuY2hhbmdlU3luY0lkT25DbGlja31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVNjcm9sbFRvSWQ9e3RoaXMucHJvcHMuY2hhbmdlU2Nyb2xsVG9JZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbj17dGhpcy5jb25kaXRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9DZWxsTWVhc3VyZXI+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJSZWFjdERPTSIsIkF1dG9TaXplciIsIkxpc3QiLCJDZWxsTWVhc3VyZXIiLCJDZWxsTWVhc3VyZXJDYWNoZSIsIlRleHQyIiwiU3BsaXRUZXh0Iiwic3R5bGVzIiwiXyIsInNwbGl0IiwiVGV4dFNlZ21lbnQiLCJXaXRuZXNzIiwiR3JhcGhlbWVTcGxpdHRlciIsIkJveCIsIl9zZWFyY2hSZXN1bHRzQ2FjaGUiLCJTcGxpdFRleHRDb21wb25lbnQiLCJwcm9wcyIsInRleHRBbGlnbm1lbnRCeUlkIiwiY2hhbmdlU2Nyb2xsVG9JZCIsImxpc3QiLCJzcGxpdFRleHQiLCJjYWNoZSIsImZpeGVkV2lkdGgiLCJyb3dSZW5kZXJlciIsImJpbmQiLCJpc1BhbmVsTGlua2VkIiwiYWN0aXZlU2VsZWN0aW9uIiwic2VsZWN0ZWROb2RlcyIsIl9tb3VzZURvd24iLCJfYWN0aXZlV2l0bmVzcyIsIl9kaWRTZXRJbml0aWFsU2Nyb2xsUG9zaXRpb24iLCJfbW9kaWZ5aW5nU2VsZWN0aW9uIiwiaW1hZ2VIZWlnaHQiLCJpbWFnZVdpZHRoIiwiY2FsY3VsYXRlZEltYWdlSGVpZ2h0Iiwic2VsZWN0ZWRXaW5kb3ciLCJzY3JvbGxFdmVudCIsInNjcm9sbFRvcCIsImUiLCJtYXAiLCJsIiwibnVtYmVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIlRTdGFydCIsInBvc2l0aW9uIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwicHVzaCIsImlkIiwic3RhcnQiLCJlbmQiLCJURW5kIiwiaXNFbXB0eSIsImRlYm91bmNlZFNjcm9sbCIsInJvdyIsImFjdGl2ZUFubm90YXRpb24iLCJnZXRUZXh0SW5kZXhPZlBvc2l0aW9uIiwiZ2V0U2VsZWN0aW9uIiwibW91c2VVcCIsInN0b3BQcm9wYWdhdGlvbiIsIm5vZGUiLCJjdXJyZW50Tm9kZSIsInNwYW4iLCJ0ZXN0IiwicGFyZW50Tm9kZSIsIkVsZW1lbnQiLCJyZXNldENhY2hlIiwicmVzZXRSb3dzIiwic2hvd0ltYWdlcyIsImNhbGN1bGF0ZUltYWdlSGVpZ2h0IiwiQXJyYXkiLCJpc0FycmF5IiwiY2xlYXIiLCJpIiwibGVuZ3RoIiwicmVzZXRSb3ciLCJjbGVhckFsbCIsIm1lYXN1cmVBbGxSb3dzIiwicmVjb21wdXRlUm93SGVpZ2h0cyIsImZvcmNlVXBkYXRlR3JpZCIsImNoYW5nZWRXaXRuZXNzIiwic2VsZWN0ZWRXaXRuZXNzIiwic2VsZWN0ZWRTZWFyY2hSZXN1bHQiLCJ0ZXh0SWQiLCJjb25zb2xlIiwibG9nIiwiY29udHJvbHNNZWFzdXJlbWVudHMiLCJnZXRDb250cm9sc01lYXN1cmVtZW50cyIsInNlbGVjdGVkVGV4dEluZGV4IiwiZmlyc3RTZWxlY3RlZFNlZ21lbnQiLCJzcGxpdFRleHRSZWN0Iiwic2VsZWN0ZWRFbGVtZW50SWQiLCJzZWxlY3RlZEVsZW1lbnRJZHMiLCJ0ZXh0TGlzdFZpc2libGUiLCJlZGl0TWVudVZpc2libGUiLCJzZXRUaW1lb3V0IiwidXBkYXRlTGlzdCIsInBhZ2VCcmVha3NDaGFuZ2VkIiwic2VsZWN0ZWRSb3dzIiwiY3VycmVudFNlbGVjdGVkUm93Iiwic2VsZWN0ZWRMaXN0Um93IiwibmV3U2VsZWN0ZWRSb3ciLCJmaXJzdENoYW5nZWRSb3ciLCJzcGxpdFJvd1RleHRzIiwidGV4dHMiLCJsZW4iLCJsaW5lQnJlYWtzQ2hhbmdlcyIsInNlbGVjdGVkUm93IiwiZm9udFNpemUiLCJhbm5vdGF0aW9uc0luU2FtZUxvY2F0aW9uIiwic2hvdWxkUmVzZXRMaXN0Q2FjaGUiLCJvbGRQcm9wcyIsIm5ld1Byb3BzIiwib2xkVGV4dEJyZWFrcyIsImdldFRleHRzRmluYWxQb3NpdGlvbnMiLCJuZXdUZXh0QnJlYWtzIiwiSlNPTiIsInN0cmluZ2lmeSIsIm9sZEFjdGl2ZUFubm90YXRpb24iLCJuZXdBY3RpdmVBbm5vdGF0aW9uIiwiaGFzQ2hhbmdlZCIsImlzVHlwZSIsIkFOTk9UQVRJT05fVFlQRVMiLCJsaW5lQnJlYWsiLCJhY3RpdmVBbm5vdGF0aW9ucyIsImhhc093blByb3BlcnR5IiwidW5pcXVlSWQiLCJzaG91bGRSZXNldCIsInByb2Nlc3NQcm9wcyIsInJlc2l6ZUhhbmRsZXIiLCJ0aHJvdHRsZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZWJvdW5jZSIsImZyb20iLCJzZWxlY3Rpb25IYW5kbGVyIiwiaGFuZGxlU2VsZWN0aW9uIiwibW91c2VEb3duIiwiY29tcG9uZW50RGlkVXBkYXRlIiwidGltZXIiLCJwcmV2UHJvcHMiLCJwcmV2U3RhdGUiLCJzY3JvbGxUb0lkIiwidGFyZ2V0SWQyIiwic3luY0lkT25DbGljayIsIlNlYXJjaFN5bmNJZCIsInN5bmNJZE9uU2VhcmNoIiwicmVzdWx0Iiwic2VhcmNoUmVzdWx0cyIsIkFsaWdubWVudCIsInRleHRBbGlnbm1lbnQiLCJjb25kaXRpb24iLCJ0YXJnZXQiLCJ3aXRuZXNzIiwiY29uIiwic2Nyb2xsVG9Sb3ciLCJzY3JvbGxUb1Bvc2l0aW9uIiwic3R5bGUiLCJzY3JvbGxCZWhhdmlvciIsInJlcSIsImZpbmQiLCJjbGlja0lkT2JqIiwiYWxpZ25tZW50Iiwic291cmNlX3NlZ21lbnQiLCJzeW5jQ2xpY2tUYXJnZXRJZCIsInRhcmdldF9zZWdtZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsZWFyVGltZW91dCIsInN0YXJ0UG9zIiwiYW5ub3RhdGVkVGV4dCIsImdldFBvc2l0aW9uT2ZBbm5vdGF0aW9uIiwic2VnbWVudCIsInNlZ21lbnRBdE9yaWdpbmFsUG9zaXRpb24iLCJzcGxpdFRleHRDb21wb25lbnQiLCJzZWdtZW50SWRGdW5jdGlvbiIsIndhcm4iLCJ0eXBlIiwicGFnZUJyZWFrIiwicG9zaXRpb25FbmQiLCJzZWxlY3RlZEFubm90YXRlZFNlZ21lbnRzIiwiaXNJbnNlcnRpb24iLCJpZEZvckluc2VydGlvbiIsImlkRm9yU2VnbWVudCIsImlzRGVsZXRpb24iLCJpZEZvckRlbGV0ZWRTZWdtZW50IiwicHJldlNlZ21lbnQiLCJpZEZvclBhZ2VCcmVhayIsImlkRm9yTGluZUJyZWFrIiwic2VnbWVudElkIiwia2V5Iiwic3BsaXRUZXh0MiIsImRpdiIsImN1cnNvciIsImRpc3BsYXkiLCJoZWlnaHQiLCJyb3dIZWlnaHQiLCJ3aWR0aCIsIm1heFdpZHRoIiwidGV4dCIsInN0cmluZyIsImluZGV4IiwiZ2V0VW5pcXVlSWQiLCJzcGxpdHRlciIsImNvbnRlbnQiLCJnZXRUZXh0IiwiZmlyc3RTZWdtZW50Iiwic2VnbWVudHMiLCJzdGFydGluZ1Bvc2l0aW9uIiwicG9zaXRpb25zIiwiaW5kZXhPZiIsInZlcmlmaWVkUG9zaXRpb25zIiwiZ3JhcGhlbWVzIiwic3BsaXRHcmFwaGVtZXMiLCJhY3RpdmVQb3NpdGlvbiIsImdyYXBoZW1lIiwiZ3JhcGhlbWVFbmQiLCJleHBlY3RlZEVuZCIsInBhcmVudCIsInNlYXJjaFN0cmluZ1Bvc2l0aW9ucyIsInNlYXJjaFZhbHVlIiwiZ2V0U3RyaW5nUG9zaXRpb25zIiwibmV3U3R5bGUiLCJzcGxpdFRleHRSZWYiLCJzcGxpdFRleHRSb3ciLCJzcGxpdFRleHRSb3dDb250ZW50Iiwic2VsZWN0ZWRTZWdtZW50SWQiLCJzZWxlY3RlZFNvdXJjZVJhbmdlIiwic2VsZWN0ZWRUYXJnZXRSYW5nZSIsImNoYW5nZVNlbGVjdGVkUmFuZ2UiLCJjaGFuZ2VTeW5jSWRPbkNsaWNrIiwiUHVyZUNvbXBvbmVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./app/components/TextDetail2/SplitText.js\n");

/***/ }),

/***/ "./app/components/TextDetail2/Text2.js":
/*!*********************************************!*\
  !*** ./app/components/TextDetail2/Text2.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   \"idForDeletedSegment\": () => (/* binding */ idForDeletedSegment),\n/* harmony export */   \"idForSegment\": () => (/* binding */ idForSegment)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/esm/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/esm/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! classnames */ \"./node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _Text2_css__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Text2.css */ \"./app/components/TextDetail2/Text2.css\");\n/* harmony import */ var _Text2_css__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_Text2_css__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var lib_TextSegment__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! lib/TextSegment */ \"./app/lib/TextSegment.js\");\n/* harmony import */ var lib_AnnotatedText__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! lib/AnnotatedText */ \"./app/lib/AnnotatedText.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var lib_SegmentedText__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! lib/SegmentedText */ \"./app/lib/SegmentedText.js\");\n/* harmony import */ var lib_Annotation__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! lib/Annotation */ \"./app/lib/Annotation.js\");\n/* harmony import */ var lib_Witness__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! lib/Witness */ \"./app/lib/Witness.js\");\n/* harmony import */ var grapheme_splitter__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! grapheme-splitter */ \"./node_modules/grapheme-splitter/index.js\");\n/* harmony import */ var grapheme_splitter__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(grapheme_splitter__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var _mui_styles__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @mui/styles */ \"./node_modules/@mui/styles/withTheme/withTheme.js\");\n\n\n\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0,_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction idForSegment(segment) {\n  return \"s2_\" + segment.start;\n}\nfunction idForDeletedSegment(segment) {\n  return \"ds_\" + segment.start;\n} // export function idForInsertion(segment: TextSegment): string {\n//     return \"i_\" + segment.start;\n// }\n// export function idForPageBreak(segment: TextSegment): string {\n//     return \"p_\" + (segment.end + 1);\n// }\n// export function idForLineBreak(segment: TextSegment): string {\n//     return \"l_\" + (segment.end + 1);\n// }\n\n// import ReactDOMServer from \"react-dom/server\";\n// import PageBreakIcon from \"images/page_break_icon.svg\";\n// const PARA_SYMBOL = String.fromCharCode(182);\n// const pageBreakIconString = ReactDOMServer.renderToStaticMarkup(\n//     <PageBreakIcon />\n// );\nvar Text2 = /*#__PURE__*/function (_React$Component) {\n  (0,_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(Text2, _React$Component);\n\n  var _super = _createSuper(Text2);\n\n  function Text2(props) {\n    var _this;\n\n    (0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(this, Text2);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      segmentedText: props.segmentedText\n    };\n    _this.textAlignmentById = _this.props.textAlignmentById;\n    _this._renderedSegments = null;\n    _this._renderedHtml = null;\n    return _this;\n  }\n\n  (0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(Text2, [{\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      this.setState(function (prevState, props) {\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          segmentedText: nextProps.segmentedText\n        });\n      });\n    } // annotationsForSegment(segment: TextSegment): Annotation[] {\n    //     let annotations: Annotation[] = [];\n    //     const foundAnnotations = this.props.annotationPositions[\n    //         String(segment.start)\n    //     ];\n    //     if (foundAnnotations) {\n    //         annotations = foundAnnotations;\n    //     }\n    //     const insertions =\n    //         this.props.annotationPositions[INSERTION_KEY + segment.start] || [];\n    //     const deletions =\n    //         this.props.annotationPositions[DELETION_KEY + segment.start] || [];\n    //     const pageBreaks =\n    //         this.props.annotationPositions[\n    //             PAGE_BREAK_KEY + (segment.end + 1)\n    //         ] || [];\n    //     const lineBreaks =\n    //         this.props.annotationPositions[\n    //             LINE_BREAK_KEY + (segment.end + 1)\n    //         ] || [];\n    //     return annotations.concat(\n    //         insertions,\n    //         deletions,\n    //         pageBreaks,\n    //         lineBreaks\n    //     );\n    // }\n    // segmentsContainSegment(segments: TextSegment[], segment: TextSegment) {\n    //     for (let i = 0; i < segments.length; i++) {\n    //         let listSegment = segments[i];\n    //         if (\n    //             listSegment.start === segment.start &&\n    //             listSegment.text === segment.text\n    //         ) {\n    //             return true;\n    //         }\n    //     }\n    //     return false;\n    // }\n\n  }, {\n    key: \"selectedElement\",\n    value: function selectedElement(element) {\n      var sourceRangeSelection = [];\n      var targetRangeSelection = [];\n      var selection = document.getSelection();\n\n      if (element !== null && element !== void 0 && element.id.includes(\"s2_\") && this.props.isPanelLinked && this.props.condition) {\n        var clickId = parseInt(element.id.replace(\"s2_\", \"\"));\n        this.props.changeSyncIdOnClick(clickId);\n        this.props.changeScrollToId({\n          id: \"ua\",\n          from: \"ua\"\n        });\n\n        var _id = parseInt(element.id.replace(\"s2_\", \"\"));\n\n        var rangeUnique = this.textAlignmentById.find(function (l) {\n          return _id >= l.TStart && _id < l.TEnd;\n        });\n\n        if (rangeUnique) {\n          for (var i = rangeUnique.start; i < rangeUnique.end; i++) {\n            sourceRangeSelection.push(i);\n          }\n\n          for (var _i = rangeUnique.TStart; _i < rangeUnique.TEnd; _i++) {\n            targetRangeSelection.push(_i);\n          }\n\n          this.props.changeSelectedRange({\n            source: sourceRangeSelection,\n            target: targetRangeSelection\n          });\n        }\n      }\n\n      if (selection && selection.type === \"Range\") {\n        return;\n      }\n\n      this.props.selectedSegmentId(element.id);\n\n      if (!element.id) {\n        this.props.changeSelectedRange({\n          source: [],\n          target: []\n        });\n      }\n    }\n  }, {\n    key: \"generateHtml\",\n    value: function generateHtml(renderProps, renderState) {\n      var segments = renderState.segmentedText.segments;\n      var textLineClass = (_Text2_css__WEBPACK_IMPORTED_MODULE_9___default().textLine);\n      var segmentHTML = '<p class=\"' + textLineClass + '\">';\n      if (segments.length === 0) return {\n        __html: segmentHTML\n      };\n      var endPosition = segments[segments.length - 1].end + 1;\n      var highlightClass = (_Text2_css__WEBPACK_IMPORTED_MODULE_9___default().highlight);\n      var activeHighlightClass = (_Text2_css__WEBPACK_IMPORTED_MODULE_9___default().activeHighlight);\n      var activeSearchResultEnd = null;\n\n      for (var i = 0; i < segments.length; i++) {\n        var _renderProps$selected;\n\n        var segment = segments[i];\n        var classAttribute = \"\";\n        var classes = [];\n        var selectedCurrentDeletion = false;\n        var selectedCurrentPageBreak = false;\n        var selectedCurrentLineBreak = false;\n        var lineBreakAnnotation = false;\n        var pageBreakAnnotation = null; // It's an insertion at the end of the text, which should have just been added to the html.\n        // So break as we don't want anymore segment html adding.\n\n        if (segment.start === endPosition) {\n          break;\n        }\n\n        var _id2 = null;\n\n        if (segment.length === 0) {// id = idForDeletedSegment(segment);\n          // classes.push(styles.removedByAnnotation);\n          // if (deletionText) {\n          //     segment = new TextSegment(segment.start, deletionText);\n          // }\n        } else {\n          _id2 = idForSegment(segment);\n        } // if (\n        //     this.segmentsContainSegment(\n        //         renderProps.selectedAnnotatedSegments,\n        //         segment\n        //     ) ||\n        //     selectedCurrentDeletion\n        // ) {\n        //     classes.push(styles.selectedAnnotation);\n        // }\n\n\n        if ((_renderProps$selected = renderProps.selectedTargetRange) !== null && _renderProps$selected !== void 0 && _renderProps$selected.includes(segment.start) && renderProps.condition) {\n          var newClass = renderProps.theme.palette.mode === \"light\" ? (_Text2_css__WEBPACK_IMPORTED_MODULE_9___default().selectedRangelight) : (_Text2_css__WEBPACK_IMPORTED_MODULE_9___default().selectedRangeDark);\n          classes.push(newClass);\n        }\n\n        if (classes.length > 0) {\n          var className = classnames__WEBPACK_IMPORTED_MODULE_8___default().apply(void 0, classes);\n          classAttribute = 'class=\"' + className + '\"';\n        }\n\n        var segmentContent = segment.text; // Add search result highlight if required.\n\n        if (renderProps.searchStringPositions) {\n          var segmentStart = segment.start;\n          var _position = segmentStart;\n          segmentContent = \"\";\n          var highlight = highlightClass;\n\n          if (renderProps.selectedSearchResult && renderProps.selectedSearchResult.start <= _position && renderProps.selectedSearchResult.start + renderProps.selectedSearchResult.length > _position) {\n            highlight = activeHighlightClass;\n          }\n\n          for (var j = 0; j < segment.text.length; j++) {\n            var _char = segment.text.charAt(j);\n\n            _position = segmentStart + j;\n\n            if (activeSearchResultEnd) {\n              var _activeSearchResultEn = activeSearchResultEnd,\n                  _activeSearchResultEn2 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_activeSearchResultEn, 2),\n                  start = _activeSearchResultEn2[0],\n                  end = _activeSearchResultEn2[1];\n\n              if (j === 0) {\n                segmentContent += '<span class=\"' + highlight + '\">';\n              }\n\n              if (_position === end) {\n                segmentContent += _char + \"</span>\";\n                activeSearchResultEnd = null;\n              } else if (j === segment.text.length - 1) {\n                segmentContent += _char + \"</span>\";\n              } else {\n                segmentContent += _char;\n              }\n            } else if (_position in renderProps.searchStringPositions) {\n              var _renderProps$searchSt = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(renderProps.searchStringPositions[_position], 2),\n                  _start = _renderProps$searchSt[0],\n                  _end = _renderProps$searchSt[1];\n\n              segmentContent += '<span class=\"' + highlight + '\">' + _char;\n\n              if (j === segment.text.length - 1 || _position === _end) {\n                segmentContent += \"</span>\";\n              }\n\n              if (_position < _end) {\n                activeSearchResultEnd = [_start, _end];\n              }\n            } else {\n              segmentContent += _char;\n            }\n          }\n        } // if (\n        //     this.props.textAlignmentById !== null\n        //     // && selectedTextId === TargetId\n        // ) {\n        //     let r = this.props.textAlignmentById.find(\n        //         (d) => d.TStart === segment.start\n        //     );\n        //     if (r) {\n        //         segmentHTML +=\n        //             \"<span id='alignment2_\" +\n        //             segment.start +\n        //             \"'>\" +\n        //             `<sup class=` +\n        //             styles.syncIdClass +\n        //             `>${r.id}</sup>` +\n        //             \"</span>\";\n        //     }\n        // }\n\n\n        segmentHTML += \"<span id=\" + _id2 + \" key=\" + _id2 + \" \" + classAttribute + \">\" + segmentContent + \"</span>\";\n      }\n\n      this._renderedSegments = segments;\n      segmentHTML += \"</p>\";\n      var html = {\n        __html: segmentHTML\n      };\n      return html;\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      var renderedHtml = this.generateHtml(nextProps, nextState);\n\n      if (this.props.fontSize !== nextProps.fontSize) {\n        return true;\n      } else if (this._renderedHtml && renderedHtml.__html === this._renderedHtml.__html) {\n        return false;\n      } else if (this._renderedHtml !== renderedHtml) {\n        this._renderedHtml = renderedHtml;\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.textAlignmentById = this.props.textAlignmentById;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = [(_Text2_css__WEBPACK_IMPORTED_MODULE_9___default().text)];\n\n      if (this.props.row === 0) {\n        classes.push((_Text2_css__WEBPACK_IMPORTED_MODULE_9___default().textFirstRow));\n      } // Generate HTML manually as it is much faster when\n      // creating large numbers of elements, such as these spans.\n\n\n      var html = this._renderedHtml ? this._renderedHtml : this.generateHtml(this.props, this.state);\n\n      if (!this._renderedHtml) {\n        this._renderedHtml = html;\n      }\n\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default().createElement(\"div\", {\n        className: (_Text2_css__WEBPACK_IMPORTED_MODULE_9___default().textContainer)\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_7___default().createElement(\"div\", {\n        className: classnames__WEBPACK_IMPORTED_MODULE_8___default().apply(void 0, classes),\n        dangerouslySetInnerHTML: html,\n        onClick: function onClick(e) {\n          return _this2.selectedElement(e.target);\n        },\n        style: {\n          fontSize: this.props.fontSize,\n          fontFamily: \"var(--tibetan-fonts2)\"\n        }\n      }));\n    }\n  }]);\n\n  return Text2;\n}((react__WEBPACK_IMPORTED_MODULE_7___default().Component));\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_mui_styles__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(Text2));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hcHAvY29tcG9uZW50cy9UZXh0RGV0YWlsMi9UZXh0Mi5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFTyxTQUFTZSxZQUFULENBQXNCQyxPQUF0QixFQUFvRDtFQUN2RCxPQUFPLFFBQVFBLE9BQU8sQ0FBQ0MsS0FBdkI7QUFDSDtBQUVNLFNBQVNDLG1CQUFULENBQTZCRixPQUE3QixFQUEyRDtFQUM5RCxPQUFPLFFBQVFBLE9BQU8sQ0FBQ0MsS0FBdkI7QUFDSCxFQUVEO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7QUE4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0lBRU1FOzs7OztFQUtGLGVBQVlDLEtBQVosRUFBMEI7SUFBQTs7SUFBQTs7SUFDdEIsMEJBQU1BLEtBQU47SUFFQSxNQUFLQyxLQUFMLEdBQWE7TUFDVEMsYUFBYSxFQUFFRixLQUFLLENBQUNFO0lBRFosQ0FBYjtJQUdBLE1BQUtDLGlCQUFMLEdBQXlCLE1BQUtILEtBQUwsQ0FBV0csaUJBQXBDO0lBQ0EsTUFBS0MsaUJBQUwsR0FBeUIsSUFBekI7SUFDQSxNQUFLQyxhQUFMLEdBQXFCLElBQXJCO0lBUnNCO0VBU3pCOzs7O1dBRUQsMENBQWlDQyxTQUFqQyxFQUFtRDtNQUMvQyxLQUFLQyxRQUFMLENBQWMsVUFBQ0MsU0FBRCxFQUFtQlIsS0FBbkIsRUFBb0M7UUFDOUMsdUNBQ09RLFNBRFA7VUFFSU4sYUFBYSxFQUFFSSxTQUFTLENBQUNKO1FBRjdCO01BSUgsQ0FMRDtJQU1ILEVBRUQ7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUVBO0lBQ0E7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ZDs7TUFDQSxJQUFJLEtBQUtrQixLQUFMLENBQVdpRixHQUFYLEtBQW1CLENBQXZCLEVBQTBCO1FBQ3RCNUIsT0FBTyxDQUFDckIsSUFBUixDQUFhbEQsZ0VBQWI7TUFDSCxDQUpJLENBTUw7TUFDQTs7O01BQ0EsSUFBTThGLElBQUksR0FBRyxLQUFLdkUsYUFBTCxHQUNQLEtBQUtBLGFBREUsR0FFUCxLQUFLMEUsWUFBTCxDQUFrQixLQUFLL0UsS0FBdkIsRUFBOEIsS0FBS0MsS0FBbkMsQ0FGTjs7TUFHQSxJQUFJLENBQUMsS0FBS0ksYUFBVixFQUF5QjtRQUNyQixLQUFLQSxhQUFMLEdBQXFCdUUsSUFBckI7TUFDSDs7TUFFRCxvQkFDSTtRQUFLLFNBQVMsRUFBRTlGLGlFQUFvQnFHO01BQXBDLGdCQUNJO1FBQ0ksU0FBUyxFQUFFdEcsdURBQUEsU0FBY3dFLE9BQWQsQ0FEZjtRQUVJLHVCQUF1QixFQUFFdUIsSUFGN0I7UUFHSSxPQUFPLEVBQUUsaUJBQUNRLENBQUQ7VUFBQSxPQUFPLE1BQUksQ0FBQ0MsZUFBTCxDQUFxQkQsQ0FBQyxDQUFDakQsTUFBdkIsQ0FBUDtRQUFBLENBSGI7UUFJSSxLQUFLLEVBQUU7VUFDSDZDLFFBQVEsRUFBRSxLQUFLaEYsS0FBTCxDQUFXZ0YsUUFEbEI7VUFFSE0sVUFBVSxFQUFFO1FBRlQ7TUFKWCxFQURKLENBREo7SUFhSDs7OztFQXBUZTFHOztBQXNUcEIsaUVBQWVjLHdEQUFTLENBQUNLLEtBQUQsQ0FBeEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZW1pbnVzY2xpZW50Ly4vYXBwL2NvbXBvbmVudHMvVGV4dERldGFpbDIvVGV4dDIuanM/NWRlMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xyXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XHJcbmltcG9ydCBzdHlsZXMgZnJvbSBcIi4vVGV4dDIuY3NzXCI7XHJcbmltcG9ydCBUZXh0U2VnbWVudCBmcm9tIFwibGliL1RleHRTZWdtZW50XCI7XHJcbmltcG9ydCB7XHJcbiAgICBJTlNFUlRJT05fS0VZLFxyXG4gICAgREVMRVRJT05fS0VZLFxyXG4gICAgUEFHRV9CUkVBS19LRVksXHJcbiAgICBMSU5FX0JSRUFLX0tFWSxcclxufSBmcm9tIFwibGliL0Fubm90YXRlZFRleHRcIjtcclxuaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xyXG5pbXBvcnQgU2VnbWVudGVkVGV4dCBmcm9tIFwibGliL1NlZ21lbnRlZFRleHRcIjtcclxuaW1wb3J0IEFubm90YXRpb24gZnJvbSBcImxpYi9Bbm5vdGF0aW9uXCI7XHJcbmltcG9ydCBXaXRuZXNzIGZyb20gXCJsaWIvV2l0bmVzc1wiO1xyXG5pbXBvcnQgeyBBTk5PVEFUSU9OX1RZUEVTIH0gZnJvbSBcImxpYi9Bbm5vdGF0aW9uXCI7XHJcbmltcG9ydCB0eXBlIHsgQW5ub3RhdGlvblVuaXF1ZUlkIH0gZnJvbSBcImxpYi9Bbm5vdGF0aW9uXCI7XHJcbmltcG9ydCBHcmFwaGVtZVNwbGl0dGVyIGZyb20gXCJncmFwaGVtZS1zcGxpdHRlclwiO1xyXG5pbXBvcnQgeyB3aXRoVGhlbWUgfSBmcm9tIFwiQG11aS9zdHlsZXNcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpZEZvclNlZ21lbnQoc2VnbWVudDogVGV4dFNlZ21lbnQpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIFwiczJfXCIgKyBzZWdtZW50LnN0YXJ0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaWRGb3JEZWxldGVkU2VnbWVudChzZWdtZW50OiBUZXh0U2VnbWVudCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gXCJkc19cIiArIHNlZ21lbnQuc3RhcnQ7XHJcbn1cclxuXHJcbi8vIGV4cG9ydCBmdW5jdGlvbiBpZEZvckluc2VydGlvbihzZWdtZW50OiBUZXh0U2VnbWVudCk6IHN0cmluZyB7XHJcbi8vICAgICByZXR1cm4gXCJpX1wiICsgc2VnbWVudC5zdGFydDtcclxuLy8gfVxyXG5cclxuLy8gZXhwb3J0IGZ1bmN0aW9uIGlkRm9yUGFnZUJyZWFrKHNlZ21lbnQ6IFRleHRTZWdtZW50KTogc3RyaW5nIHtcclxuLy8gICAgIHJldHVybiBcInBfXCIgKyAoc2VnbWVudC5lbmQgKyAxKTtcclxuLy8gfVxyXG5cclxuLy8gZXhwb3J0IGZ1bmN0aW9uIGlkRm9yTGluZUJyZWFrKHNlZ21lbnQ6IFRleHRTZWdtZW50KTogc3RyaW5nIHtcclxuLy8gICAgIHJldHVybiBcImxfXCIgKyAoc2VnbWVudC5lbmQgKyAxKTtcclxuLy8gfVxyXG5cclxuZXhwb3J0IHR5cGUgUHJvcHMgPSB7XHJcbiAgICBzZWdtZW50ZWRUZXh0OiBTZWdtZW50ZWRUZXh0LFxyXG4gICAgYW5ub3RhdGlvblBvc2l0aW9uczogeyBbc3RyaW5nXTogQW5ub3RhdGlvbltdIH0sXHJcbiAgICBzZWxlY3RlZFNlZ21lbnRJZDogKGlkOiBzdHJpbmcpID0+IHZvaWQsXHJcbiAgICBhY3RpdmVBbm5vdGF0aW9uczogeyBbQW5ub3RhdGlvblVuaXF1ZUlkXTogQW5ub3RhdGlvbiB9IHwgbnVsbCxcclxuICAgIGdldEJhc2VBbm5vdGF0aW9uOiAoYW5ub3RhdGlvbjogQW5ub3RhdGlvbikgPT4gQW5ub3RhdGlvbixcclxuICAgIHNlbGVjdGVkQW5ub3RhdGVkU2VnbWVudHM6IFRleHRTZWdtZW50W10sXHJcbiAgICByb3c6IG51bWJlcixcclxuICAgIGFjdGl2ZUFubm90YXRpb246IEFubm90YXRpb24gfCBudWxsLFxyXG4gICAgc2VhcmNoVmFsdWU6IHN0cmluZyB8IG51bGwsXHJcbiAgICBzZWxlY3RlZFNlYXJjaFJlc3VsdDoge1xyXG4gICAgICAgIHRleHRJZDogbnVtYmVyLFxyXG4gICAgICAgIHN0YXJ0OiBudW1iZXIsXHJcbiAgICAgICAgbGVuZ3RoOiBudW1iZXIsXHJcbiAgICB9IHwgbnVsbCxcclxuICAgIHNlYXJjaFN0cmluZ1Bvc2l0aW9uczogeyBbcG9zaXRpb246IG51bWJlcl06IFtudW1iZXIsIG51bWJlcl0gfSxcclxuICAgIGZvbnRTaXplPzogbnVtYmVyLFxyXG4gICAgYWN0aXZlV2l0bmVzczogV2l0bmVzcyxcclxuICAgIHRleHRBbGlnbm1lbnRCeUlkOiB7fSxcclxuICAgIHNlbGVjdGVkU291cmNlUmFuZ2U6IFtdLFxyXG4gICAgc2VsZWN0ZWRUYXJnZXRSYW5nZTogW10sXHJcbiAgICBjaGFuZ2VTeW5jSWRPbkNsaWNrOiAoKSA9PiB2b2lkLFxyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgU3RhdGUgPSB7XHJcbiAgICBzZWdtZW50ZWRUZXh0OiBTZWdtZW50ZWRUZXh0LFxyXG59O1xyXG5cclxuLy8gaW1wb3J0IFJlYWN0RE9NU2VydmVyIGZyb20gXCJyZWFjdC1kb20vc2VydmVyXCI7XHJcbi8vIGltcG9ydCBQYWdlQnJlYWtJY29uIGZyb20gXCJpbWFnZXMvcGFnZV9icmVha19pY29uLnN2Z1wiO1xyXG4vLyBjb25zdCBQQVJBX1NZTUJPTCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMTgyKTtcclxuLy8gY29uc3QgcGFnZUJyZWFrSWNvblN0cmluZyA9IFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RhdGljTWFya3VwKFxyXG4vLyAgICAgPFBhZ2VCcmVha0ljb24gLz5cclxuLy8gKTtcclxuXHJcbmNsYXNzIFRleHQyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xyXG4gICAgX3JlbmRlcmVkU2VnbWVudHM6IFRleHRTZWdtZW50W10gfCBudWxsO1xyXG4gICAgX3JlbmRlcmVkSHRtbDogeyBfX2h0bWw6IHN0cmluZyB9IHwgbnVsbDtcclxuICAgIHRleHRBbGlnbm1lbnRCeUlkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgc2VnbWVudGVkVGV4dDogcHJvcHMuc2VnbWVudGVkVGV4dCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudGV4dEFsaWdubWVudEJ5SWQgPSB0aGlzLnByb3BzLnRleHRBbGlnbm1lbnRCeUlkO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkU2VnbWVudHMgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkSHRtbCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgVU5TQUZFX2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzOiBQcm9wcykge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKHByZXZTdGF0ZTogU3RhdGUsIHByb3BzOiBQcm9wcykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgLi4ucHJldlN0YXRlLFxyXG4gICAgICAgICAgICAgICAgc2VnbWVudGVkVGV4dDogbmV4dFByb3BzLnNlZ21lbnRlZFRleHQsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYW5ub3RhdGlvbnNGb3JTZWdtZW50KHNlZ21lbnQ6IFRleHRTZWdtZW50KTogQW5ub3RhdGlvbltdIHtcclxuICAgIC8vICAgICBsZXQgYW5ub3RhdGlvbnM6IEFubm90YXRpb25bXSA9IFtdO1xyXG4gICAgLy8gICAgIGNvbnN0IGZvdW5kQW5ub3RhdGlvbnMgPSB0aGlzLnByb3BzLmFubm90YXRpb25Qb3NpdGlvbnNbXHJcbiAgICAvLyAgICAgICAgIFN0cmluZyhzZWdtZW50LnN0YXJ0KVxyXG4gICAgLy8gICAgIF07XHJcbiAgICAvLyAgICAgaWYgKGZvdW5kQW5ub3RhdGlvbnMpIHtcclxuICAgIC8vICAgICAgICAgYW5ub3RhdGlvbnMgPSBmb3VuZEFubm90YXRpb25zO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vICAgICBjb25zdCBpbnNlcnRpb25zID1cclxuICAgIC8vICAgICAgICAgdGhpcy5wcm9wcy5hbm5vdGF0aW9uUG9zaXRpb25zW0lOU0VSVElPTl9LRVkgKyBzZWdtZW50LnN0YXJ0XSB8fCBbXTtcclxuICAgIC8vICAgICBjb25zdCBkZWxldGlvbnMgPVxyXG4gICAgLy8gICAgICAgICB0aGlzLnByb3BzLmFubm90YXRpb25Qb3NpdGlvbnNbREVMRVRJT05fS0VZICsgc2VnbWVudC5zdGFydF0gfHwgW107XHJcbiAgICAvLyAgICAgY29uc3QgcGFnZUJyZWFrcyA9XHJcbiAgICAvLyAgICAgICAgIHRoaXMucHJvcHMuYW5ub3RhdGlvblBvc2l0aW9uc1tcclxuICAgIC8vICAgICAgICAgICAgIFBBR0VfQlJFQUtfS0VZICsgKHNlZ21lbnQuZW5kICsgMSlcclxuICAgIC8vICAgICAgICAgXSB8fCBbXTtcclxuICAgIC8vICAgICBjb25zdCBsaW5lQnJlYWtzID1cclxuICAgIC8vICAgICAgICAgdGhpcy5wcm9wcy5hbm5vdGF0aW9uUG9zaXRpb25zW1xyXG4gICAgLy8gICAgICAgICAgICAgTElORV9CUkVBS19LRVkgKyAoc2VnbWVudC5lbmQgKyAxKVxyXG4gICAgLy8gICAgICAgICBdIHx8IFtdO1xyXG5cclxuICAgIC8vICAgICByZXR1cm4gYW5ub3RhdGlvbnMuY29uY2F0KFxyXG4gICAgLy8gICAgICAgICBpbnNlcnRpb25zLFxyXG4gICAgLy8gICAgICAgICBkZWxldGlvbnMsXHJcbiAgICAvLyAgICAgICAgIHBhZ2VCcmVha3MsXHJcbiAgICAvLyAgICAgICAgIGxpbmVCcmVha3NcclxuICAgIC8vICAgICApO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vIHNlZ21lbnRzQ29udGFpblNlZ21lbnQoc2VnbWVudHM6IFRleHRTZWdtZW50W10sIHNlZ21lbnQ6IFRleHRTZWdtZW50KSB7XHJcbiAgICAvLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgLy8gICAgICAgICBsZXQgbGlzdFNlZ21lbnQgPSBzZWdtZW50c1tpXTtcclxuICAgIC8vICAgICAgICAgaWYgKFxyXG4gICAgLy8gICAgICAgICAgICAgbGlzdFNlZ21lbnQuc3RhcnQgPT09IHNlZ21lbnQuc3RhcnQgJiZcclxuICAgIC8vICAgICAgICAgICAgIGxpc3RTZWdtZW50LnRleHQgPT09IHNlZ21lbnQudGV4dFxyXG4gICAgLy8gICAgICAgICApIHtcclxuICAgIC8vICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgIHJldHVybiBmYWxzZTtcclxuICAgIC8vIH1cclxuXHJcbiAgICBzZWxlY3RlZEVsZW1lbnQoZWxlbWVudDogRWxlbWVudCkge1xyXG4gICAgICAgIGxldCBzb3VyY2VSYW5nZVNlbGVjdGlvbiA9IFtdO1xyXG4gICAgICAgIGxldCB0YXJnZXRSYW5nZVNlbGVjdGlvbiA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpO1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgZWxlbWVudD8uaWQuaW5jbHVkZXMoXCJzMl9cIikgJiZcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5pc1BhbmVsTGlua2VkICYmXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuY29uZGl0aW9uXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHZhciBjbGlja0lkID0gcGFyc2VJbnQoZWxlbWVudC5pZC5yZXBsYWNlKFwiczJfXCIsIFwiXCIpKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuY2hhbmdlU3luY0lkT25DbGljayhjbGlja0lkKTtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jaGFuZ2VTY3JvbGxUb0lkKHsgaWQ6IFwidWFcIiwgZnJvbTogXCJ1YVwiIH0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGlkID0gcGFyc2VJbnQoZWxlbWVudC5pZC5yZXBsYWNlKFwiczJfXCIsIFwiXCIpKTtcclxuICAgICAgICAgICAgbGV0IHJhbmdlVW5pcXVlID0gdGhpcy50ZXh0QWxpZ25tZW50QnlJZC5maW5kKFxyXG4gICAgICAgICAgICAgICAgKGwpID0+IGlkID49IGwuVFN0YXJ0ICYmIGlkIDwgbC5URW5kXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGlmIChyYW5nZVVuaXF1ZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHJhbmdlVW5pcXVlLnN0YXJ0OyBpIDwgcmFuZ2VVbmlxdWUuZW5kOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VSYW5nZVNlbGVjdGlvbi5wdXNoKGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHJhbmdlVW5pcXVlLlRTdGFydDsgaSA8IHJhbmdlVW5pcXVlLlRFbmQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFJhbmdlU2VsZWN0aW9uLnB1c2goaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmNoYW5nZVNlbGVjdGVkUmFuZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogc291cmNlUmFuZ2VTZWxlY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXRSYW5nZVNlbGVjdGlvbixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2VsZWN0aW9uICYmIHNlbGVjdGlvbi50eXBlID09PSBcIlJhbmdlXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnByb3BzLnNlbGVjdGVkU2VnbWVudElkKGVsZW1lbnQuaWQpO1xyXG4gICAgICAgIGlmICghZWxlbWVudC5pZCkge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmNoYW5nZVNlbGVjdGVkUmFuZ2UoeyBzb3VyY2U6IFtdLCB0YXJnZXQ6IFtdIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUh0bWwocmVuZGVyUHJvcHM6IFByb3BzLCByZW5kZXJTdGF0ZTogU3RhdGUpOiB7IF9faHRtbDogc3RyaW5nIH0ge1xyXG4gICAgICAgIGxldCBzZWdtZW50cyA9IHJlbmRlclN0YXRlLnNlZ21lbnRlZFRleHQuc2VnbWVudHM7XHJcblxyXG4gICAgICAgIGxldCB0ZXh0TGluZUNsYXNzID0gc3R5bGVzLnRleHRMaW5lO1xyXG4gICAgICAgIGxldCBzZWdtZW50SFRNTCA9ICc8cCBjbGFzcz1cIicgKyB0ZXh0TGluZUNsYXNzICsgJ1wiPic7XHJcbiAgICAgICAgaWYgKHNlZ21lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHsgX19odG1sOiBzZWdtZW50SFRNTCB9O1xyXG5cclxuICAgICAgICBjb25zdCBlbmRQb3NpdGlvbiA9IHNlZ21lbnRzW3NlZ21lbnRzLmxlbmd0aCAtIDFdLmVuZCArIDE7XHJcblxyXG4gICAgICAgIGxldCBoaWdobGlnaHRDbGFzcyA9IHN0eWxlcy5oaWdobGlnaHQ7XHJcbiAgICAgICAgbGV0IGFjdGl2ZUhpZ2hsaWdodENsYXNzID0gc3R5bGVzLmFjdGl2ZUhpZ2hsaWdodDtcclxuICAgICAgICBsZXQgYWN0aXZlU2VhcmNoUmVzdWx0RW5kID0gbnVsbDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBzZWdtZW50ID0gc2VnbWVudHNbaV07XHJcbiAgICAgICAgICAgIGxldCBjbGFzc0F0dHJpYnV0ZSA9IFwiXCI7XHJcbiAgICAgICAgICAgIGxldCBjbGFzc2VzID0gW107XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZEN1cnJlbnREZWxldGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWRDdXJyZW50UGFnZUJyZWFrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZEN1cnJlbnRMaW5lQnJlYWsgPSBmYWxzZTtcclxuICAgICAgICAgICAgbGV0IGxpbmVCcmVha0Fubm90YXRpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgbGV0IHBhZ2VCcmVha0Fubm90YXRpb24gPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLy8gSXQncyBhbiBpbnNlcnRpb24gYXQgdGhlIGVuZCBvZiB0aGUgdGV4dCwgd2hpY2ggc2hvdWxkIGhhdmUganVzdCBiZWVuIGFkZGVkIHRvIHRoZSBodG1sLlxyXG4gICAgICAgICAgICAvLyBTbyBicmVhayBhcyB3ZSBkb24ndCB3YW50IGFueW1vcmUgc2VnbWVudCBodG1sIGFkZGluZy5cclxuICAgICAgICAgICAgaWYgKHNlZ21lbnQuc3RhcnQgPT09IGVuZFBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgaWQgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoc2VnbWVudC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIGlkID0gaWRGb3JEZWxldGVkU2VnbWVudChzZWdtZW50KTtcclxuICAgICAgICAgICAgICAgIC8vIGNsYXNzZXMucHVzaChzdHlsZXMucmVtb3ZlZEJ5QW5ub3RhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiAoZGVsZXRpb25UZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgc2VnbWVudCA9IG5ldyBUZXh0U2VnbWVudChzZWdtZW50LnN0YXJ0LCBkZWxldGlvblRleHQpO1xyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWQgPSBpZEZvclNlZ21lbnQoc2VnbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGlmIChcclxuICAgICAgICAgICAgLy8gICAgIHRoaXMuc2VnbWVudHNDb250YWluU2VnbWVudChcclxuICAgICAgICAgICAgLy8gICAgICAgICByZW5kZXJQcm9wcy5zZWxlY3RlZEFubm90YXRlZFNlZ21lbnRzLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgIHNlZ21lbnRcclxuICAgICAgICAgICAgLy8gICAgICkgfHxcclxuICAgICAgICAgICAgLy8gICAgIHNlbGVjdGVkQ3VycmVudERlbGV0aW9uXHJcbiAgICAgICAgICAgIC8vICkge1xyXG4gICAgICAgICAgICAvLyAgICAgY2xhc3Nlcy5wdXNoKHN0eWxlcy5zZWxlY3RlZEFubm90YXRpb24pO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHJlbmRlclByb3BzLnNlbGVjdGVkVGFyZ2V0UmFuZ2U/LmluY2x1ZGVzKHNlZ21lbnQuc3RhcnQpICYmXHJcbiAgICAgICAgICAgICAgICByZW5kZXJQcm9wcy5jb25kaXRpb25cclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3Q2xhc3MgPVxyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlclByb3BzLnRoZW1lLnBhbGV0dGUubW9kZSA9PT0gXCJsaWdodFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc3R5bGVzLnNlbGVjdGVkUmFuZ2VsaWdodFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHN0eWxlcy5zZWxlY3RlZFJhbmdlRGFyaztcclxuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaChuZXdDbGFzcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjbGFzc2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGxldCBjbGFzc05hbWUgPSBjbGFzc25hbWVzKC4uLmNsYXNzZXMpO1xyXG4gICAgICAgICAgICAgICAgY2xhc3NBdHRyaWJ1dGUgPSAnY2xhc3M9XCInICsgY2xhc3NOYW1lICsgJ1wiJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHNlZ21lbnRDb250ZW50ID0gc2VnbWVudC50ZXh0O1xyXG4gICAgICAgICAgICAvLyBBZGQgc2VhcmNoIHJlc3VsdCBoaWdobGlnaHQgaWYgcmVxdWlyZWQuXHJcbiAgICAgICAgICAgIGlmIChyZW5kZXJQcm9wcy5zZWFyY2hTdHJpbmdQb3NpdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzZWdtZW50U3RhcnQgPSBzZWdtZW50LnN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0gc2VnbWVudFN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgc2VnbWVudENvbnRlbnQgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBoaWdobGlnaHQgPSBoaWdobGlnaHRDbGFzcztcclxuICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJQcm9wcy5zZWxlY3RlZFNlYXJjaFJlc3VsdCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlclByb3BzLnNlbGVjdGVkU2VhcmNoUmVzdWx0LnN0YXJ0IDw9IHBvc2l0aW9uICYmXHJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyUHJvcHMuc2VsZWN0ZWRTZWFyY2hSZXN1bHQuc3RhcnQgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJQcm9wcy5zZWxlY3RlZFNlYXJjaFJlc3VsdC5sZW5ndGggPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0ID0gYWN0aXZlSGlnaGxpZ2h0Q2xhc3M7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzZWdtZW50LnRleHQubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY2hhciA9IHNlZ21lbnQudGV4dC5jaGFyQXQoaik7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSBzZWdtZW50U3RhcnQgKyBqO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVTZWFyY2hSZXN1bHRFbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IFtzdGFydCwgZW5kXSA9IGFjdGl2ZVNlYXJjaFJlc3VsdEVuZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGogPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRDb250ZW50ICs9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiJyArIGhpZ2hsaWdodCArICdcIj4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gZW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50Q29udGVudCArPSBjaGFyICsgXCI8L3NwYW4+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVTZWFyY2hSZXN1bHRFbmQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGogPT09IHNlZ21lbnQudGV4dC5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50Q29udGVudCArPSBjaGFyICsgXCI8L3NwYW4+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50Q29udGVudCArPSBjaGFyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwb3NpdGlvbiBpbiByZW5kZXJQcm9wcy5zZWFyY2hTdHJpbmdQb3NpdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IFtzdGFydCwgZW5kXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJQcm9wcy5zZWFyY2hTdHJpbmdQb3NpdGlvbnNbcG9zaXRpb25dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50Q29udGVudCArPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiJyArIGhpZ2hsaWdodCArICdcIj4nICsgY2hhcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGogPT09IHNlZ21lbnQudGV4dC5sZW5ndGggLSAxIHx8IHBvc2l0aW9uID09PSBlbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnRDb250ZW50ICs9IFwiPC9zcGFuPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiA8IGVuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlU2VhcmNoUmVzdWx0RW5kID0gW3N0YXJ0LCBlbmRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudENvbnRlbnQgKz0gY2hhcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaWYgKFxyXG4gICAgICAgICAgICAvLyAgICAgdGhpcy5wcm9wcy50ZXh0QWxpZ25tZW50QnlJZCAhPT0gbnVsbFxyXG4gICAgICAgICAgICAvLyAgICAgLy8gJiYgc2VsZWN0ZWRUZXh0SWQgPT09IFRhcmdldElkXHJcbiAgICAgICAgICAgIC8vICkge1xyXG4gICAgICAgICAgICAvLyAgICAgbGV0IHIgPSB0aGlzLnByb3BzLnRleHRBbGlnbm1lbnRCeUlkLmZpbmQoXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgKGQpID0+IGQuVFN0YXJ0ID09PSBzZWdtZW50LnN0YXJ0XHJcbiAgICAgICAgICAgIC8vICAgICApO1xyXG4gICAgICAgICAgICAvLyAgICAgaWYgKHIpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBzZWdtZW50SFRNTCArPVxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBcIjxzcGFuIGlkPSdhbGlnbm1lbnQyX1wiICtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgc2VnbWVudC5zdGFydCArXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIFwiJz5cIiArXHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGA8c3VwIGNsYXNzPWAgK1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBzdHlsZXMuc3luY0lkQ2xhc3MgK1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBgPiR7ci5pZH08L3N1cD5gICtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgXCI8L3NwYW4+XCI7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgICAgIHNlZ21lbnRIVE1MICs9XHJcbiAgICAgICAgICAgICAgICBcIjxzcGFuIGlkPVwiICtcclxuICAgICAgICAgICAgICAgIGlkICtcclxuICAgICAgICAgICAgICAgIFwiIGtleT1cIiArXHJcbiAgICAgICAgICAgICAgICBpZCArXHJcbiAgICAgICAgICAgICAgICBcIiBcIiArXHJcbiAgICAgICAgICAgICAgICBjbGFzc0F0dHJpYnV0ZSArXHJcbiAgICAgICAgICAgICAgICBcIj5cIiArXHJcbiAgICAgICAgICAgICAgICBzZWdtZW50Q29udGVudCArXHJcbiAgICAgICAgICAgICAgICBcIjwvc3Bhbj5cIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVkU2VnbWVudHMgPSBzZWdtZW50cztcclxuICAgICAgICBzZWdtZW50SFRNTCArPSBcIjwvcD5cIjtcclxuXHJcbiAgICAgICAgY29uc3QgaHRtbCA9IHtcclxuICAgICAgICAgICAgX19odG1sOiBzZWdtZW50SFRNTCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBodG1sO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHM6IFByb3BzLCBuZXh0U3RhdGU6IFN0YXRlKSB7XHJcbiAgICAgICAgY29uc3QgcmVuZGVyZWRIdG1sID0gdGhpcy5nZW5lcmF0ZUh0bWwobmV4dFByb3BzLCBuZXh0U3RhdGUpO1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmZvbnRTaXplICE9PSBuZXh0UHJvcHMuZm9udFNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRIdG1sICYmXHJcbiAgICAgICAgICAgIHJlbmRlcmVkSHRtbC5fX2h0bWwgPT09IHRoaXMuX3JlbmRlcmVkSHRtbC5fX2h0bWxcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fcmVuZGVyZWRIdG1sICE9PSByZW5kZXJlZEh0bWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRIdG1sID0gcmVuZGVyZWRIdG1sO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xyXG4gICAgICAgIHRoaXMudGV4dEFsaWdubWVudEJ5SWQgPSB0aGlzLnByb3BzLnRleHRBbGlnbm1lbnRCeUlkO1xyXG4gICAgfVxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBjbGFzc2VzID0gW3N0eWxlcy50ZXh0XTtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5yb3cgPT09IDApIHtcclxuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKHN0eWxlcy50ZXh0Rmlyc3RSb3cpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR2VuZXJhdGUgSFRNTCBtYW51YWxseSBhcyBpdCBpcyBtdWNoIGZhc3RlciB3aGVuXHJcbiAgICAgICAgLy8gY3JlYXRpbmcgbGFyZ2UgbnVtYmVycyBvZiBlbGVtZW50cywgc3VjaCBhcyB0aGVzZSBzcGFucy5cclxuICAgICAgICBjb25zdCBodG1sID0gdGhpcy5fcmVuZGVyZWRIdG1sXHJcbiAgICAgICAgICAgID8gdGhpcy5fcmVuZGVyZWRIdG1sXHJcbiAgICAgICAgICAgIDogdGhpcy5nZW5lcmF0ZUh0bWwodGhpcy5wcm9wcywgdGhpcy5zdGF0ZSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9yZW5kZXJlZEh0bWwpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZWRIdG1sID0gaHRtbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMudGV4dENvbnRhaW5lcn0+XHJcbiAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc25hbWVzKC4uLmNsYXNzZXMpfVxyXG4gICAgICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXtodG1sfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB0aGlzLnNlbGVjdGVkRWxlbWVudChlLnRhcmdldCl9XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IHRoaXMucHJvcHMuZm9udFNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6IFwidmFyKC0tdGliZXRhbi1mb250czIpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgd2l0aFRoZW1lKFRleHQyKTtcclxuIl0sIm5hbWVzIjpbIlJlYWN0IiwiY2xhc3NuYW1lcyIsInN0eWxlcyIsIlRleHRTZWdtZW50IiwiSU5TRVJUSU9OX0tFWSIsIkRFTEVUSU9OX0tFWSIsIlBBR0VfQlJFQUtfS0VZIiwiTElORV9CUkVBS19LRVkiLCJfIiwiU2VnbWVudGVkVGV4dCIsIkFubm90YXRpb24iLCJXaXRuZXNzIiwiQU5OT1RBVElPTl9UWVBFUyIsIkdyYXBoZW1lU3BsaXR0ZXIiLCJ3aXRoVGhlbWUiLCJpZEZvclNlZ21lbnQiLCJzZWdtZW50Iiwic3RhcnQiLCJpZEZvckRlbGV0ZWRTZWdtZW50IiwiVGV4dDIiLCJwcm9wcyIsInN0YXRlIiwic2VnbWVudGVkVGV4dCIsInRleHRBbGlnbm1lbnRCeUlkIiwiX3JlbmRlcmVkU2VnbWVudHMiLCJfcmVuZGVyZWRIdG1sIiwibmV4dFByb3BzIiwic2V0U3RhdGUiLCJwcmV2U3RhdGUiLCJlbGVtZW50Iiwic291cmNlUmFuZ2VTZWxlY3Rpb24iLCJ0YXJnZXRSYW5nZVNlbGVjdGlvbiIsInNlbGVjdGlvbiIsImRvY3VtZW50IiwiZ2V0U2VsZWN0aW9uIiwiaWQiLCJpbmNsdWRlcyIsImlzUGFuZWxMaW5rZWQiLCJjb25kaXRpb24iLCJjbGlja0lkIiwicGFyc2VJbnQiLCJyZXBsYWNlIiwiY2hhbmdlU3luY0lkT25DbGljayIsImNoYW5nZVNjcm9sbFRvSWQiLCJmcm9tIiwicmFuZ2VVbmlxdWUiLCJmaW5kIiwibCIsIlRTdGFydCIsIlRFbmQiLCJpIiwiZW5kIiwicHVzaCIsImNoYW5nZVNlbGVjdGVkUmFuZ2UiLCJzb3VyY2UiLCJ0YXJnZXQiLCJ0eXBlIiwic2VsZWN0ZWRTZWdtZW50SWQiLCJyZW5kZXJQcm9wcyIsInJlbmRlclN0YXRlIiwic2VnbWVudHMiLCJ0ZXh0TGluZUNsYXNzIiwidGV4dExpbmUiLCJzZWdtZW50SFRNTCIsImxlbmd0aCIsIl9faHRtbCIsImVuZFBvc2l0aW9uIiwiaGlnaGxpZ2h0Q2xhc3MiLCJoaWdobGlnaHQiLCJhY3RpdmVIaWdobGlnaHRDbGFzcyIsImFjdGl2ZUhpZ2hsaWdodCIsImFjdGl2ZVNlYXJjaFJlc3VsdEVuZCIsImNsYXNzQXR0cmlidXRlIiwiY2xhc3NlcyIsInNlbGVjdGVkQ3VycmVudERlbGV0aW9uIiwic2VsZWN0ZWRDdXJyZW50UGFnZUJyZWFrIiwic2VsZWN0ZWRDdXJyZW50TGluZUJyZWFrIiwibGluZUJyZWFrQW5ub3RhdGlvbiIsInBhZ2VCcmVha0Fubm90YXRpb24iLCJzZWxlY3RlZFRhcmdldFJhbmdlIiwibmV3Q2xhc3MiLCJ0aGVtZSIsInBhbGV0dGUiLCJtb2RlIiwic2VsZWN0ZWRSYW5nZWxpZ2h0Iiwic2VsZWN0ZWRSYW5nZURhcmsiLCJjbGFzc05hbWUiLCJzZWdtZW50Q29udGVudCIsInRleHQiLCJzZWFyY2hTdHJpbmdQb3NpdGlvbnMiLCJzZWdtZW50U3RhcnQiLCJwb3NpdGlvbiIsInNlbGVjdGVkU2VhcmNoUmVzdWx0IiwiaiIsImNoYXIiLCJjaGFyQXQiLCJodG1sIiwibmV4dFN0YXRlIiwicmVuZGVyZWRIdG1sIiwiZ2VuZXJhdGVIdG1sIiwiZm9udFNpemUiLCJyb3ciLCJ0ZXh0Rmlyc3RSb3ciLCJ0ZXh0Q29udGFpbmVyIiwiZSIsInNlbGVjdGVkRWxlbWVudCIsImZvbnRGYW1pbHkiLCJDb21wb25lbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./app/components/TextDetail2/Text2.js\n");

/***/ }),

/***/ "./app/components/TextDetail2/SplitText.css":
/*!**************************************************!*\
  !*** ./app/components/TextDetail2/SplitText.css ***!
  \**************************************************/
/***/ ((module) => {

eval("// extracted by mini-css-extract-plugin\nmodule.exports = {\"green-tint\":\"#88af8e\",\"blue-tint\":\"#024279\",\"active-button\":\"#00746b\",\"mainTint\":\"#024279\",\"activeButton\":\"#00746b\",\"inlineWidth\":\"280px\",\"annotationControls\":\"SplitText---annotationControls\",\"annotationContent\":\"SplitText---annotationContent\",\"subTitle\":\"SplitText---subTitle\",\"title\":\"SplitText---title\",\"sectionHeading\":\"SplitText---sectionHeading\",\"text\":\"SplitText---text\",\"padding\":\"SplitText---padding\",\"arrowTop\":\"SplitText---arrowTop\",\"arrowLeft\":\"SplitText---arrowLeft\",\"arrowRight\":\"SplitText---arrowRight\",\"inline\":\"SplitText---inline\",\"arrow\":\"SplitText---arrow\",\"arrowDs\":\"SplitText---arrowDs\",\"nothingSelected\":\"SplitText---nothingSelected\",\"anonymousMessage\":\"SplitText---anonymousMessage\",\"noNotes\":\"SplitText---noNotes\",\"breakButtons\":\"SplitText---breakButtons\",\"splitText2\":\"SplitText---splitText2\",\"splitTextRowContent\":\"SplitText---splitTextRowContent\",\"splitTextRow\":\"SplitText---splitTextRow\",\"pechaImage\":\"SplitText---pechaImage\",\"controlsPlaceholder\":\"SplitText---controlsPlaceholder\",\"pageNumber\":\"SplitText---pageNumber\"};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hcHAvY29tcG9uZW50cy9UZXh0RGV0YWlsMi9TcGxpdFRleHQuY3NzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0Esa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGVtaW51c2NsaWVudC8uL2FwcC9jb21wb25lbnRzL1RleHREZXRhaWwyL1NwbGl0VGV4dC5jc3M/ZGQzNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbm1vZHVsZS5leHBvcnRzID0ge1wiZ3JlZW4tdGludFwiOlwiIzg4YWY4ZVwiLFwiYmx1ZS10aW50XCI6XCIjMDI0Mjc5XCIsXCJhY3RpdmUtYnV0dG9uXCI6XCIjMDA3NDZiXCIsXCJtYWluVGludFwiOlwiIzAyNDI3OVwiLFwiYWN0aXZlQnV0dG9uXCI6XCIjMDA3NDZiXCIsXCJpbmxpbmVXaWR0aFwiOlwiMjgwcHhcIixcImFubm90YXRpb25Db250cm9sc1wiOlwiU3BsaXRUZXh0LS0tYW5ub3RhdGlvbkNvbnRyb2xzXCIsXCJhbm5vdGF0aW9uQ29udGVudFwiOlwiU3BsaXRUZXh0LS0tYW5ub3RhdGlvbkNvbnRlbnRcIixcInN1YlRpdGxlXCI6XCJTcGxpdFRleHQtLS1zdWJUaXRsZVwiLFwidGl0bGVcIjpcIlNwbGl0VGV4dC0tLXRpdGxlXCIsXCJzZWN0aW9uSGVhZGluZ1wiOlwiU3BsaXRUZXh0LS0tc2VjdGlvbkhlYWRpbmdcIixcInRleHRcIjpcIlNwbGl0VGV4dC0tLXRleHRcIixcInBhZGRpbmdcIjpcIlNwbGl0VGV4dC0tLXBhZGRpbmdcIixcImFycm93VG9wXCI6XCJTcGxpdFRleHQtLS1hcnJvd1RvcFwiLFwiYXJyb3dMZWZ0XCI6XCJTcGxpdFRleHQtLS1hcnJvd0xlZnRcIixcImFycm93UmlnaHRcIjpcIlNwbGl0VGV4dC0tLWFycm93UmlnaHRcIixcImlubGluZVwiOlwiU3BsaXRUZXh0LS0taW5saW5lXCIsXCJhcnJvd1wiOlwiU3BsaXRUZXh0LS0tYXJyb3dcIixcImFycm93RHNcIjpcIlNwbGl0VGV4dC0tLWFycm93RHNcIixcIm5vdGhpbmdTZWxlY3RlZFwiOlwiU3BsaXRUZXh0LS0tbm90aGluZ1NlbGVjdGVkXCIsXCJhbm9ueW1vdXNNZXNzYWdlXCI6XCJTcGxpdFRleHQtLS1hbm9ueW1vdXNNZXNzYWdlXCIsXCJub05vdGVzXCI6XCJTcGxpdFRleHQtLS1ub05vdGVzXCIsXCJicmVha0J1dHRvbnNcIjpcIlNwbGl0VGV4dC0tLWJyZWFrQnV0dG9uc1wiLFwic3BsaXRUZXh0MlwiOlwiU3BsaXRUZXh0LS0tc3BsaXRUZXh0MlwiLFwic3BsaXRUZXh0Um93Q29udGVudFwiOlwiU3BsaXRUZXh0LS0tc3BsaXRUZXh0Um93Q29udGVudFwiLFwic3BsaXRUZXh0Um93XCI6XCJTcGxpdFRleHQtLS1zcGxpdFRleHRSb3dcIixcInBlY2hhSW1hZ2VcIjpcIlNwbGl0VGV4dC0tLXBlY2hhSW1hZ2VcIixcImNvbnRyb2xzUGxhY2Vob2xkZXJcIjpcIlNwbGl0VGV4dC0tLWNvbnRyb2xzUGxhY2Vob2xkZXJcIixcInBhZ2VOdW1iZXJcIjpcIlNwbGl0VGV4dC0tLXBhZ2VOdW1iZXJcIn07Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./app/components/TextDetail2/SplitText.css\n");

/***/ }),

/***/ "./app/components/TextDetail2/Text2.css":
/*!**********************************************!*\
  !*** ./app/components/TextDetail2/Text2.css ***!
  \**********************************************/
/***/ ((module) => {

eval("// extracted by mini-css-extract-plugin\nmodule.exports = {\"green-tint\":\"#88af8e\",\"blue-tint\":\"#024279\",\"active-button\":\"#00746b\",\"mainTint\":\"#024279\",\"activeButton\":\"#00746b\",\"paddingSide\":\"20px\",\"maxWidth\":\"600px\",\"text\":\"Text2---text\",\"textFirstRow\":\"Text2---textFirstRow\",\"textLine\":\"Text2---textLine\",\"textline\":\"Text2---textline\",\"limitWidth\":\"Text2---limitWidth\",\"textContainer\":\"Text2---textContainer\",\"annotation\":\"Text2---annotation\",\"removedByAnnotation\":\"Text2---removedByAnnotation\",\"insertion\":\"Text2---insertion\",\"highlight\":\"Text2---highlight\",\"activeHighlight\":\"Text2---activeHighlight\",\"lineBreak\":\"Text2---lineBreak\",\"pageBreak\":\"Text2---pageBreak\",\"syncIdClass\":\"Text2---syncIdClass\",\"selectedRangelight\":\"Text2---selectedRangelight\",\"selectedRangeDark\":\"Text2---selectedRangeDark\"};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hcHAvY29tcG9uZW50cy9UZXh0RGV0YWlsMi9UZXh0Mi5jc3MuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxrQkFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZW1pbnVzY2xpZW50Ly4vYXBwL2NvbXBvbmVudHMvVGV4dERldGFpbDIvVGV4dDIuY3NzP2QxZGEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5tb2R1bGUuZXhwb3J0cyA9IHtcImdyZWVuLXRpbnRcIjpcIiM4OGFmOGVcIixcImJsdWUtdGludFwiOlwiIzAyNDI3OVwiLFwiYWN0aXZlLWJ1dHRvblwiOlwiIzAwNzQ2YlwiLFwibWFpblRpbnRcIjpcIiMwMjQyNzlcIixcImFjdGl2ZUJ1dHRvblwiOlwiIzAwNzQ2YlwiLFwicGFkZGluZ1NpZGVcIjpcIjIwcHhcIixcIm1heFdpZHRoXCI6XCI2MDBweFwiLFwidGV4dFwiOlwiVGV4dDItLS10ZXh0XCIsXCJ0ZXh0Rmlyc3RSb3dcIjpcIlRleHQyLS0tdGV4dEZpcnN0Um93XCIsXCJ0ZXh0TGluZVwiOlwiVGV4dDItLS10ZXh0TGluZVwiLFwidGV4dGxpbmVcIjpcIlRleHQyLS0tdGV4dGxpbmVcIixcImxpbWl0V2lkdGhcIjpcIlRleHQyLS0tbGltaXRXaWR0aFwiLFwidGV4dENvbnRhaW5lclwiOlwiVGV4dDItLS10ZXh0Q29udGFpbmVyXCIsXCJhbm5vdGF0aW9uXCI6XCJUZXh0Mi0tLWFubm90YXRpb25cIixcInJlbW92ZWRCeUFubm90YXRpb25cIjpcIlRleHQyLS0tcmVtb3ZlZEJ5QW5ub3RhdGlvblwiLFwiaW5zZXJ0aW9uXCI6XCJUZXh0Mi0tLWluc2VydGlvblwiLFwiaGlnaGxpZ2h0XCI6XCJUZXh0Mi0tLWhpZ2hsaWdodFwiLFwiYWN0aXZlSGlnaGxpZ2h0XCI6XCJUZXh0Mi0tLWFjdGl2ZUhpZ2hsaWdodFwiLFwibGluZUJyZWFrXCI6XCJUZXh0Mi0tLWxpbmVCcmVha1wiLFwicGFnZUJyZWFrXCI6XCJUZXh0Mi0tLXBhZ2VCcmVha1wiLFwic3luY0lkQ2xhc3NcIjpcIlRleHQyLS0tc3luY0lkQ2xhc3NcIixcInNlbGVjdGVkUmFuZ2VsaWdodFwiOlwiVGV4dDItLS1zZWxlY3RlZFJhbmdlbGlnaHRcIixcInNlbGVjdGVkUmFuZ2VEYXJrXCI6XCJUZXh0Mi0tLXNlbGVjdGVkUmFuZ2VEYXJrXCJ9OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./app/components/TextDetail2/Text2.css\n");

/***/ })

}]);