(self.webpackChunkteminusclient=self.webpackChunkteminusclient||[]).push([[392],{28590:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Ho});var i={};n.r(i),n.d(i,{Editors:()=>Lo,HomePage:()=>_o,NotFound:()=>zo,Vote:()=>jo});var r=n(45987),o=n(67294),a=(n(36325),n(70758)),s=n.n(a),l=n(28216),c=n(70885),u=n(76644),d=n.n(u),h=n(3473),p=n(11756),f=n(96506);const m=(0,h.ZP)((function(e){var t=o.createRef(),n=(0,o.useTransition)(),i=(0,c.Z)(n,2),r=(i[0],i[1]),a=function(n){if(n.preventDefault(),t.current instanceof HTMLInputElement){var i=t.current.value;r((function(){e.searchChanged(i)}))}};return o.createElement(p.xu,{sx:{bgcolor:"inherit"},className:d().textsSearchContainer},o.createElement("div",{className:d().textsSearch},o.createElement("form",{onSubmit:a},o.createElement("input",{style:{outline:"none",maxWidth:196},type:"text",id:"textSearchInput",placeholder:e.intl.formatMessage({id:"leftbar.search"}),ref:t}),o.createElement(p.zx,{onClick:a,variant:"outlined",size:"small",sx:{minWidth:2}},o.createElement(f.Z,null)))))}));var g=n(48097),v=n(36371);const x=(0,l.connect)((function(e){return{searchTerm:v.SI(e),searchValue:e.ui.searchValue,textListWidth:v.W3(e)}}),(function(e){return{searchChanged:function(t){e((0,g.QuB)(t))}}}))(m);var y=n(15671),E=n(43144),b=n(97326),T=n(60136),w=n(6215),S=n(61120),I=n(94184),O=n.n(I),k=n(54939),A=n(29940),C=(n(5398),n(41805)),Z=(n(19986),["ི","ུ","ེ","ོ"]),R=["ཀ","ག"];function P(e){return e.codePointAt(0)>=3840&&e.codePointAt(0)<=4095}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.slice(-1),i="";return P(n)?"ང"===n?i+=e+"༌།":-1!==R.indexOf(n)||-1!==Z.indexOf(n)&&-1!==R.indexOf(e.charAt(e.length-2))?i+=e:i+=e+"།":(i=e,t&&(i+=t)),i}var N=n(66424),W=n.n(N),D=n(30323),_=n.n(D),L=n(59632),j=n.n(L);var z=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(e){return(0,y.Z)(this,r),i.call(this,e)}return(0,E.Z)(r,[{key:"render",value:function(){var e=this,t=this.props.string,n=t,i=this.props.stringClass||"";if(this.props.searchTerm){var r=this.props.searchTerm,a=(new(_())).splitGraphemes(t),s=t.indexOf(r),l=s+r.length,c=0,u="";if(s>-1)for(var d=0;d<a.length;d++){var h=a[d];c>=s&&c<l&&(u+=h),c+=h.length}u.length>0&&(n=j()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:i},n)}}]),r}(o.Component);var q=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(e){return(0,y.Z)(this,r),i.call(this,e)}return(0,E.Z)(r,[{key:"render",value:function(){var e=this.props.count;return this.props.extra&&(e+="+"),o.createElement("span",{className:W().searchTotal},e)}}]),r}(o.Component),H=n(86933),M=n(30329),V=n.n(M);function F(e){var t;return t=e.loading?o.createElement("span",null,o.createElement(H.Z,{id:"leftbar.loading"})):o.createElement("span",null,o.createElement(H.Z,{id:"leftbar.loadMore"})),o.createElement("div",{className:V().container},t)}const U=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(e){var t;return(0,y.Z)(this,r),(t=i.call(this,e)).cache=new A.t1({fixedWidth:!0,defaultHeight:60,minHeight:60}),t.rowRenderer=t.rowRenderer.bind((0,b.Z)(t)),t}return(0,E.Z)(r,[{key:"componentDidUpdate",value:function(e){this.cache.clearAll(),this.list&&this.list.forceUpdateGrid()}},{key:"rowRenderer",value:function(e){var t=this,n=e.key,i=e.index,r=e.parent,a=e.style,s=this.props.selectedText,l=s?s.id:-1,c=this.props.selectedSearchResult,u=this.props.texts,d=this.props.onSelectedText,h=this.props.onSelectedSearchResult,f=this.props.searchTerm,m=this.props.searchResults,g=W().textListRow,v=u[i];v.id===l&&(g=O()(g,W().selectedRow));var x=B(v.name),y=o.createElement("span",{className:W().textName},x),E=[],b=null,T=!1,w=!1;f.length>0&&(y=o.createElement(z,{string:x,stringClass:W().textName,highlightClass:W().highlight,searchTerm:f}),m.hasOwnProperty(v.id)&&(E=m[v.id].results,T=m[v.id].extra,w=m[v.id].loading,b=o.createElement(q,{count:m[v.id].total,extra:T})));var S=this.cache,I=[];return E.length>0&&(I=E.map((function(e){var t=c&&c.textId===v.id&&c.start===e[0],n=t?W().selectedSearchResult:W().searchResult;return t&&console.log("got selected result: %o",e),o.createElement(p.xu,{key:v.id+"_"+e[0],onClick:function(){h(v,e[0],f.length,s)},sx:{bgcolor:"inherit",color:"inherit"},className:n},o.createElement(z,{string:e[1],highlightClass:W().highlight,searchTerm:f}))}))),o.createElement(A.Z8,{columnIndex:0,key:n,parent:r,rowIndex:i,cache:S},o.createElement("div",{key:n,style:a,className:g},o.createElement("div",{className:W().textNameRow,onClick:function(){d(u[i])}},y," ",b),E.length>0&&o.createElement("div",{className:W().searchResults},I),T&&o.createElement("div",{className:W().loadMore,onClick:function(){t.props.onSearchText(v,f)}},o.createElement(F,{loading:w}))))}},{key:"render",value:function(){var e=this,t=this.props.texts.length;return o.createElement("div",{className:W().textList},this.props.texts&&this.props.texts.length>0?o.createElement(k.q,null,(function(n){var i=n.height,r=n.width;return o.createElement(C.aV,{ref:function(t){return e.list=t},height:i,rowCount:t,rowHeight:e.cache.rowHeight,rowRenderer:e.rowRenderer,width:r,overscanRowCount:3,deferredMeasurementCache:e.cache})})):this.props.searching?o.createElement("div",{className:W().textListLoader},o.createElement(s(),{loaded:!this.props.searching,scale:.5}),o.createElement("p",{className:W().searching},"Searching…")):o.createElement("ul",{className:"textList"}))}}]),r}(o.Component);var Q=n(81566);const K=(0,l.connect)((function(e){var t=v.SI(e),n=v.BP(e,t),i=v.zL(e),r=!1,o=e.data.texts;return t.length>0&&(null===n?(r=!0,o=[]):o=o.filter((function(e){return n.hasOwnProperty(e.id)}))),{texts:o,selectedText:(0,v.ZT)(e),searchTerm:t,searchResults:n,selectedSearchResult:i,searching:r}}),(function(e){return{onSelectedText:function(t){e(g.kPP(t))},onSelectedSearchResult:function(t,n,i,r){r&&r.id===t.id?e(g.soO(t.id,n,i)):e((0,Q.$C)([g.soO(t.id,n,i),g.kPP(t)]))},onSearchText:function(t,n){e(g.Wjr(t.id,n))}}}))(U);var G=n(91082),Y=n.n(G);(0,l.connect)((function(e){return{textListIsVisible:(0,v.Tq)(e)}}),(function(e){return{tabClicked:function(){e((0,g.DaN)(!0))}}}))((function(e){var t=[Y().tab];return e.textListIsVisible?t.push(Y().hideTab):t.push(Y().showTab),o.createElement("div",{className:O().apply(void 0,t),onClick:e.tabClicked},"Text List")}));var $=n(50137),X=(n(60739),n(13097)),J=n.n(X),ee=n(87462),te=n(36682),ne=n.n(te),ie=n(6236),re=n(95537),oe=n(40238),ae=n(80606),se=n(61472),le=n(82964),ce=(n(53804),n(78947),n(6571));const ue=(0,l.connect)((function(e){return{Textdata:v.si(e),selectedText:v.ZT(e)}}),(function(e){return{}}))((function(e){var t=e.Textdata,n=e.selectedText;if(!n)return o.createElement("div",null,"no selected Text available");var i=t.detail.find((function(e){return e.text===n.id}));return i?o.createElement(o.Fragment,null,o.createElement(p.ZT,{variant:"h4",component:"div",mb:3},o.createElement(H.Z,{id:"Resource.About"})),o.createElement(p.UQ,{TransitionProps:{unmountOnExit:!0}},o.createElement(p._O,{sx:{fontWeight:"bold"},expandIcon:o.createElement(ce.Z,null)},o.createElement(H.Z,{id:"text.title"})),o.createElement(p.rN,null,i.title)),o.createElement(p.UQ,{TransitionProps:{unmountOnExit:!0}},o.createElement(p._O,{expandIcon:o.createElement(ce.Z,null)},o.createElement(H.Z,{id:"text.description"})),o.createElement(p.rN,null,i.description))):o.createElement("div",null,"No about info")}));n(14632);var de=n(1528),he=n(58370),pe=n(10937);const fe=(0,l.connect)((function(e){var t=v.Al(e);return{alignmentData:v.hp(e),selectedMedia:t,showPageImages:v.Hn(e)}}),(function(e){return{changedShowPageImages:function(t){e(g.lGC(t))},changeMediaSelection:function(t){return e(g.PS_(t))},onSelectedSearchResult:function(t,n,i){e(g.soO(t,n,i))}}}))((function(e){var t=function(t){e.changeMediaSelection(t)};return o.createElement(o.Fragment,null,o.createElement(p.ZT,{variant:"h6",gutterBottom:!0,component:"div"},"Media"),o.createElement(p.aV,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"}},o.createElement(p.nZ,{selected:e.showPageImages,onClick:function(){return e.changedShowPageImages(!e.showPageImages)}},o.createElement(p.Q$,null,o.createElement(de.Z,null)),o.createElement(p.F_,{primary:"Image"})),o.createElement(p.nZ,{selected:e.selectedMedia.isVideoVisible,onClick:function(){return t("VIDEO")}},o.createElement(p.Q$,null,o.createElement(he.Z,null)),o.createElement(p.F_,{primary:"Video"})),o.createElement(p.nZ,{selected:e.selectedMedia.isAudioVisible,onClick:function(){return t("AUDIO")}},o.createElement(p.Q$,null,o.createElement(pe.Z,null)),o.createElement(p.F_,{primary:"Audio"}))))}));n(15178);function me(e){var t=e.topicId;return(0,o.useEffect)((function(){if(t){window.DiscourseEmbed={discourseUrl:"https://lopenling.org/",topicId:t};var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=function(e){var t=window.DiscourseEmbed||{},n=document.getElementById("discourse-comments-".concat(e));if(n){var i=function(e){return e.replace(/^https?(\:\/\/)?/,"")},r=document.createElement("iframe");["discourseUrl","discourseEmbedUrl","discourseUserName","discourseReferrerPolicy"].forEach((function(e){window[e]&&(t[e]=t[e]||window[e])}));var o={};t.discourseEmbedUrl&&(t.discourseEmbedUrl.startsWith("/")&&console.error("discourseEmbedUrl must be a full URL, not a relative path"),o.embed_url=encodeURIComponent(t.discourseEmbedUrl)),t.discourseUserName&&(o.discourse_username=t.discourseUserName),t.topicId&&(o.topic_id=t.topicId);var a=t.discourseUrl+"embed/comments",s=Object.keys(o);if(s.length>0){a+="?";for(var l=0;l<s.length;l++){l>0&&(a+="&");var c=s[l];a+=c+"="+o[c]}}r.src=a,r.id="discourse-embed-frame",r.width="100%",r.frameBorder="0",r.scrolling="no",r.referrerPolicy=t.discourseReferrerPolicy||"no-referrer-when-downgrade",n.appendChild(r),window.addEventListener("message",(function(e){if(e&&i(t.discourseUrl).includes(i(e.origin))&&e.data&&("discourse-resize"===e.data.type&&e.data.height&&(r.height=e.data.height+"px"),"discourse-scroll"===e.data.type&&e.data.top)){var n=function(e){var t=0;if(e.offsetParent)for(;t+=e.offsetTop,e.offsetParent;)e=e.offsetParent;else e.y&&(t+=e.y);return t}(r)+e.data.top;window.scrollTo(0,n)}}),!1)}}(t),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}}),[]),t?o.createElement("div",{id:"discourse-comments-".concat(t)}):o.createElement("div",null,"Topic unavailable")}function ge(e){var t=e.category,n=void 0===t?"":t,i=e.perPage,r=void 0===i?5:i;return o.useEffect((function(){for(var e=document.querySelectorAll("#topics"),t=0;t<e.length;t++){var n=e[t],i=n.getAttribute("url");if(i&&0!==i.length){var r="de-"+Math.random().toString(36).substr(2,9),o=["discourse_embed_id="+r];n.removeAttribute("discourse-url");for(var a=0;a<n.attributes.length;a++){var s=n.attributes[a];o.push(s.name.replace("-","_")+"="+s.value)}var l=document.createElement("iframe");l.src=i+"/embed/topics?"+o.join("&"),l.id=r,l.frameBorder=0,l.scrolling="no",l.width="100%",n.appendChild(l)}else console.error("Error, `discourse-url` was not found")}}),[]),o.createElement("div",{id:"topics",url:"https://lopenling.org/",style:{maxHeight:"70vh",overflow:"scroll"},"per-page":r,category:n,template:"complete",status:"open","allow-create":"true"})}window.addEventListener("message",(function(e){if(e&&e.data&&"discourse-resize"===e.data.type&&e.data.embedId){var t=document.getElementById(e.data.embedId);t&&(t.height=e.data.height+"px")}}),!1);const ve={About:ue,Resources:fe,FullTextSearch:function(){return o.createElement(o.Fragment,null,o.createElement(x,null),o.createElement(K,null))},Discussion:function(){return o.createElement(o.Fragment,null," ",o.createElement(p.ZT,{variant:"h6",gutterBottom:!0,component:"div"},"Discussions"),o.createElement(ge,{category:"55",perPage:"5"}))}};var xe=n(22685),ye=n(56760),Ee=["children","value","index"];const be=(0,l.connect)((function(e){return{isSecondWindowOpen:v.qB(e)}}))((function(e){var t=(0,xe.Z)("selectedResources",0),n=(0,c.Z)(t,2),i=n[0],r=n[1],a=(0,o.useState)(!1),s=(0,c.Z)(a,2),l=s[0],u=s[1];o.useEffect((function(){var t=setTimeout((function(){e.isSecondWindowOpen&&window.dispatchEvent(new Event("resize"))}),1e3);return function(){return clearTimeout(t)}}),[l]);var d=(0,ye.Z)();return o.createElement(p.xu,{sx:{width:l?"100%":"45px",bgcolor:"background.default",position:e.isSecondWindowOpen?"relative":"absolute",borderRight:"light"===d.palette.mode?"2px solid lightgray":"2px solid #d3d3d3"},className:ne().sidebar},o.createElement(p.xu,{className:ne().sidebar_header},o.createElement(p.ZT,{className:ne().menu_title,sx:l?{width:"fit-content",opacity:1}:{width:"0",opacity:0}},"Menu"),o.createElement("div",{onClick:function(){u((function(e){return!e}))},style:{cursor:"pointer",zIndex:1}},l?o.createElement(re.Z,null):o.createElement(ie.Z,null))),o.createElement(p.xu,{sx:{borderBottom:1,display:"flex"},className:ne().optionlist},o.createElement(p.mQ,{value:i,sx:{flex:1},onChange:function(e,t){r(t)},orientation:l?"horizontal":"vertical","aria-label":"basic tabs example"},o.createElement(p.OK,(0,ee.Z)({style:{minWidth:0,flex:1},onClick:function(){return u(!0)},icon:o.createElement(oe.Z,null)},Te(0))),o.createElement(p.OK,(0,ee.Z)({style:{minWidth:0,flex:1},icon:o.createElement(ae.Z,null),onClick:function(){return u(!0)}},Te(1))),o.createElement(p.OK,(0,ee.Z)({style:{minWidth:0,flex:1},icon:o.createElement(se.Z,null),onClick:function(){return u(!0)}},Te(2))),o.createElement(p.OK,(0,ee.Z)({style:{minWidth:0,flex:1},icon:o.createElement(le.Z,null),onClick:function(){return u(!0)}},Te(3))))),l&&o.createElement(o.Fragment,null,o.createElement(we,{value:i,index:0},o.createElement(ve.About,null)),o.createElement(we,{value:i,index:1},o.createElement(ve.Resources,null)),o.createElement(we,{value:i,index:2},o.createElement(ve.FullTextSearch,null)),o.createElement(we,{value:i,index:3},o.createElement(ve.Discussion,null))))}));function Te(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function we(e){var t=e.children,n=e.value,i=e.index,a=(0,r.Z)(e,Ee);return o.createElement("div",(0,ee.Z)({role:"tabpanel",hidden:n!==i,id:"simple-tabpanel-".concat(i),"aria-labelledby":"simple-tab-".concat(i)},a,{style:{flex:1,display:n==i?"flex":"none",flexDirection:"column"}}),n===i&&o.createElement("div",{className:ne().listContainer},t))}var Se=n(42547),Ie=n.n(Se),Oe=n(83097),ke=n.n(Oe),Ae=n(4942),Ce=n(61193),Ze=n.n(Ce),Re=n(22004),Pe=n(96486),Be=n.n(Pe),Ne=n(71868),We=n.n(Ne),De=n(78006);function _e(e){var t=[We().time_stamp];return e.active&&t.push(We().active_stamp),o.createElement(p.xu,{className:O()(t),onClick:function(){e.jumpToTime(e.startTime),e.setActive()}},e.active===e.index&&o.createElement("div",{className:We().dot}),o.createElement(p.xu,{className:We().image},o.createElement("img",{src:e.img,alt:"timestamp image"})),o.createElement(p.xu,{className:We().chapter_info},o.createElement(p.xu,{className:We().topic},o.createElement("div",null,e.topic),e.active&&o.createElement(p.rU,{target:"_blank",href:"https://youtu.be/".concat("2MMM_ggekfE","?t=").concat(je(e.startTime))},o.createElement(De.Z,null))),o.createElement(p.xu,{className:We().startTime},e.startTime)))}const Le=(0,l.connect)((function(e){var t=v.fn(e);return{isPanelLinked:v.tt(e),videoData:t.alignment,mediaInterval:v.oC(e)}}),(function(e){return{changeMediaInterval:function(t){e(g.Nf4(t))},changeScrollToId:function(t){return e(g.VZO(t))}}}))((function(e){var t=e.videoData.indexOf(e.mediaInterval),n=(0,o.useState)(0),i=(0,c.Z)(n,2),r=i[0],a=i[1];return o.useEffect((function(){-1===t&&(t=0),a(t)}),[t]),o.useEffect((function(){e.changeMediaInterval(e.videoData[r]),e.isPanelLinked&&e.changeScrollToId({id:e.mediaInterval.source_segment.start||null,from:"video"})}),[r]),o.createElement(p.UQ,{sx:{border:"#eee 1px solid",maxHeight:"80vh"}},o.createElement(p._O,{expandIcon:o.createElement(ce.Z,null),"aria-controls":"video-chapter-content",id:"chapter-accordion"},o.createElement(p.ZT,null,"Chapters")),o.createElement(p.rN,{sx:{position:"relative",overflow:"scroll",maxHeight:"250px"}},e.videoData.map((function(t,n){return o.createElement(p.xu,{key:t.source_segment.start},o.createElement(_e,{img:"//img.youtube.com/vi/2MMM_ggekfE/0.jpg",topic:"first chapter of chojuk asdfa sdfasdfasdf asfdas dfasdfasdd dfsdfsd sdfs s",startTime:t.target_segment.start,active:r===n,setActive:function(){return a(n)},jumpToTime:e.jumpToTime}))}))))}));function je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split(":"),n=60*+t[0]*60+60*+t[1]+ +t[2];return n}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){(0,Ae.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const He=(0,l.connect)((function(e){var t=v.Hd(e),n=v.UO(e),i=v.fn(e),r=v.Al(e),o=v.ZT(e),a=v.hp(e),s=v.R8(e,o.id);return{isPanelLinked:v.tt(e),scrollToId:t,syncIdOnClick:n,videoData:i,selectedMedia:r,selectedText:o,alignmentData:a,witness:s,mediaInterval:v.oC(e)}}),(function(e){return{toggleImage:function(t){return e(g.lGC(t))},onSelectedSearchResult:function(t,n,i,r){r&&r.id===t.id?e(g.soO(t.id,n,i)):e(batchActions([g.soO(t.id,n,i),g.kPP(t)]))},changeMediaSelection:function(t){return e(g.PS_(t))},changeMediaInterval:function(t){e(g.Nf4(t))},changeSelectedRange:function(t){e(g.S7E(t))}}}))((function(e){var t,n=e.alignmentData.text,i=e.syncIdOnClick,r=(0,o.useRef)(),a=(null==e||null===(t=e.videoData)||void 0===t?void 0:t.alignment)||[],s=[],l=[],u=(0,o.useState)({played:0,duration:0,playing:!0}),d=(0,c.Z)(u,2),h=d[0],f=d[1];Be().isEmpty(a)||(s=a.map((function(e){return[parseInt(e.source_segment.start),parseInt(e.source_segment.end)]}))),(0,o.useEffect)((function(){if(n===e.selectedText.id&&e.isPanelLinked){var t=i;if(l=s.find((function(e){var n=(0,c.Z)(e,2),i=n[0],r=n[1];return t>i&&t<r}))){var r=a.find((function(e){var t;return e.source_segment.start===(null===(t=l[0])||void 0===t?void 0:t.toString())}));Be().isEmpty(r)||(m(r.target_segment.start),e.changeMediaInterval(r))}}}),[i]);var m=function(e){r.current.seekTo(Me(e),"seconds")};return 0===a.length||e.videoData.source.witness!==parseInt(e.witness)?o.createElement("div",null):o.createElement(p.UO,{in:e.open},o.createElement(Re.Z,{url:"https://www.youtube.com/watch?v=2MMM_ggekfE",style:{maxWidth:"100%",objectFit:"contain"},width:"400px",height:"250px",ref:r,controls:!0,onDuration:function(e){return f(qe(qe({},h),{},{duration:e}))},playing:!0,onPlay:function(){return f(qe(qe({},h),{},{playing:!0}))},onPause:function(){return f(qe(qe({},h),{},{playing:!1}))},onError:function(){return console.log("error in media sec")},onSeek:function(e){return console.log("onSeek",e)},onProgress:function(t){var n=t.playedSeconds,i=a.find((function(e){return Me(e.target_segment.start)<n&&Me(e.target_segment.end)>n}));Be().isEmpty(i)||e.changeMediaInterval(i)}}),o.createElement(Le,{jumpToTime:m}))}));function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split(":"),n=60*+t[0]*60+60*+t[1]+ +t[2];return n}var Ve=n(71349),Fe=n(2734);const Ue=function(e){var t=(0,Fe.Z)(),n=o.useRef(null);return o.createElement(p.UO,{in:e.open},o.createElement(Ve.Z,{profile:"top_progress",src:["https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"],isDark:"dark"===t.palette.mode,onLoad:function(e){console.log(e)},speedPanel:"bottom",ref:n,onPlay:function(e){console.log(e)}}))};function Qe(e){return o.createElement(Ze(),{handle:"#draggable-dialog-title",bounds:"parent"},o.createElement(p.Xk,e))}const Ke=(0,l.connect)((function(e){return{selectedMedia:v.Al(e)}}),(function(e){return{changeMediaSelection:function(t){return e(g.PS_(t))}}}))((function(e){var t=o.useState(!1),n=(0,c.Z)(t,2),i=n[0],r=n[1];return o.createElement(Qe,{sx:{position:"absolute",zIndex:1,right:0,maxWidth:"400px"}},o.createElement("div",{className:"Resizable-media-div"},o.createElement("div",{style:{cursor:"move",paddingInline:20,paddingTop:10,display:"flex",justifyContent:"space-between",alignItems:"center"},id:"draggable-dialog-title"},o.createElement("h3",null,e.selectedMedia.isVideoVisible&&"VIDEO"),o.createElement("h3",null,e.selectedMedia.isAudioVisible&&"AUDIO"),o.createElement("div",{className:"buttons-hide-close"},o.createElement(p.hU,{onClick:function(){r((function(e){return!e}))},disableRipple:!0},i?"+":"-"),o.createElement(p.hU,{onClick:function(){e.changeMediaSelection(null)},disableRipple:!0},o.createElement(re.Z,null)))),o.createElement(o.Fragment,null,e.selectedMedia.isVideoVisible&&o.createElement(He,{open:!i,setOpen:r}),e.selectedMedia.isAudioVisible&&o.createElement(Ue,{open:!i,setOpen:r}))))}));const Ge=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(e){var t;return(0,y.Z)(this,r),(t=i.call(this,e)).state={hasError:!1},t}return(0,E.Z)(r,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?o.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),r}(o.Component);var Ye=n(23998),$e=(n(26292),n(73209)),Xe=n.n($e),Je=n(92794),et=n.n(Je);const tt=(0,o.memo)((0,h.ZP)((function(e){var t=[],n="",i="",r=[];return e.witnesses&&(t=e.witnesses.map((function(e){return e})),e.activeWitness&&(i=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id}))),t.sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),Be().isEmpty(t)&&!e.activeWitness?null:o.createElement(p.px,{onChange:function(n){Be().isEmpty(t)||e.onSelectedWitness(t[n.target.value])},className:et().selectVersion,value:i,label:"Version2",classes:{root:et().selectEmpty,select:et().selectOptions}},t.map((function(t,i){var a;return t.id===(null===(a=e.activeWitness)||void 0===a?void 0:a.id)&&r.push(et().selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===e.user.name?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),o.createElement("option",{key:"versionSelect2-".concat(i),value:i,className:et().selectOptions},n)})))})));var nt=n(42982),it=n(91250),rt=n(21709),ot=n.n(rt);function at(e){var t=(0,o.useRef)(e.texts),n=(0,o.useState)(t.current),i=(0,c.Z)(n,2),r=i[0],a=i[1],s=(0,o.useState)(null),l=(0,c.Z)(s,2),u=l[0],d=l[1],h=e.onSelectedText,f=e.selectedText,m=(0,o.useState)(!1),g=(0,c.Z)(m,2),v=g[0],x=g[1],y=null==f?void 0:f.name,E=e.selectedText1;(0,o.useEffect)((function(){var e=[];""===u&&a((0,nt.Z)(t.current)),null!==u&&""!==u&&(e=t.current.filter((function(e){return e.name.includes(u)})),a((0,nt.Z)(e)))}),[u]);var b=(0,o.useRef)(new it.t1({fixedHeight:!0,defaultHeight:40})),T=[ot().textlist],w=o.useCallback((function(e){var t=e.key,n=e.index,i=e.style,a=e.parent,s=r[n];return o.createElement(it.Z8,{key:"optionvalues-".concat(t),cache:b.current,parent:a,columnIndex:0,rowIndex:n},o.createElement("div",{style:i,onClick:function(){x(!1),h(s)}},o.createElement(p.xu,{sx:{overflow:"hidden",textOverflow:"ellipsis",width:"13rem",paddingLeft:2,fontSize:{lg:12,md:11,sm:10,xs:10},color:"text.primary"},component:"div"},o.createElement(p.ZT,{noWrap:!0},B(s.name)))))}),[r]);return o.createElement(p.dy,{onClickAway:function(){return x(!1)}},o.createElement("div",{style:{position:"relative",marginLeft:10}},o.createElement(p.zx,{onClick:function(){x((function(e){return!e})),!1===v&&T.push(ot().open)},component:"div",variant:"outlined",sx:{overflow:"hidden",textOverflow:"ellipsis",width:"10rem",height:"100%",color:"text.primary"},disabled:null===E},o.createElement(p.ZT,{noWrap:!0},y||"select Text here")),o.createElement(p.Q5,{in:v},o.createElement(p.xu,{className:O()(T),sx:{position:"absolute",bgcolor:"heading.main",zIndex:1}},o.createElement(p.nv,{onChange:function(e){var t=e.target.value;d(t)},id:"standard-basic",label:"filter",variant:"standard",style:{width:"100%"}}),o.createElement(it.qj,null,(function(e){var t=e.width,n=e.height;return o.createElement(it.aV,{width:t,height:n,rowHeight:40,deferredMeasurementCache:b.current,rowCount:r.length,rowRenderer:w})}))))))}const st=o.memo(at),lt=(0,l.connect)((function(e){var t=v.SI(e),n=v.BP(e,t),i=v.zL(e),r=!1,o=e.data.texts;return t.length>0&&(null===n?(r=!0,o=[]):o=o.filter((function(e){return n.hasOwnProperty(e.id)}))),{texts:o,selectedText1:(0,v.ZT)(e),selectedText:(0,v.an)(e),searchTerm:t,searchResults:n,selectedSearchResult:i,searching:r}}),(function(e){return{onSelectedText:function(t){e(g.M1d(t))}}}))(st);var ct;function ut(){return ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ut.apply(this,arguments)}const dt=function(e){return o.createElement("svg",ut({viewBox:"0 0 512 512"},e),ct||(ct=o.createElement("path",{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"})))};var ht=n(58247),pt=n.n(ht);const ft=function(e){var t=new Array(34).fill().map((function(e,t){var n=14+t;return o.createElement("option",{value:n,key:n},n)}));return o.createElement("div",{className:pt().fontSize},o.createElement("label",{htmlFor:"fontSize"},"Font Size"),o.createElement("select",{value:e.fontSize,onChange:function(t){var n=event.target,i=Number(n.value);e.onChange(i)}},t))};var mt=n(62026);const gt=function(e){var t=(0,o.useState)(!1),n=(0,c.Z)(t,2),i=n[0],r=n[1],a=(0,xe.Z)("WindowTwoFont","Tibetan"),s=(0,c.Z)(a,2),l=s[0],u=s[1];return(0,o.useEffect)((function(){document.body.style.setProperty("--tibetan-fonts2",l)}),[]),o.createElement(p.dy,{onClickAway:function(){return r(!1)}},o.createElement(p.xu,{position:"relative"},o.createElement(p.hU,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text"},o.createElement(dt,{height:20,width:20,fill:"currentColor"})),o.createElement(p.Q5,{in:i},o.createElement(p.qy,{dense:!0,sx:{position:"absolute",right:0,zIndex:2,top:40,bgcolor:"heading.main"}},o.createElement(ft,{fontSize:e.textFontSize,onChange:e.onChangedFontSize}),o.createElement(p.iz,null),o.createElement(vt,{selectFont:function(e){u(e),document.body.style.setProperty("--tibetan-fonts2","".concat(e)),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),1e3),r(!1)},selectedfont:l}),o.createElement(p.sN,{onClick:function(){return e.onExport()}},"Export Document",e.exportingWitness&&o.createElement(mt.Z,null))))))};var vt=function(e){var t=e.selectFont,n=e.selectedfont,i=$.yn||[];return o.createElement(p.xu,{textAlign:"center"},o.createElement("span",null,"Font:")," ",o.createElement("select",{onChange:function(e){return t(e.target.value)},value:n},i.map((function(e,t){return o.createElement("option",{key:t+"-fontselect",value:e},e)}))))};const xt=function(e){var t=e.handleWindowSearch;return o.createElement(p.hU,{size:"small",variant:"text",onClick:t},o.createElement(f.Z,null))};var yt=n(59655);const Et=function(e){return o.createElement(o.Fragment,{key:"right"},o.createElement(p.hU,{onClick:function(){e.changeShowTableContent(!e.showTableContent)}},e.showTableContent?o.createElement(yt.Z,null):o.createElement(ie.Z,null)))};var bt=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(e){return(0,y.Z)(this,r),i.call(this,e)}return(0,E.Z)(r,[{key:"render",value:function(){var e=this,t=this.props.string,n=t,i=this.props.stringClass||"";if(this.props.searchTerm){var r=this.props.searchTerm,a=(new(_())).splitGraphemes(t),s=t.indexOf(r),l=s+r.length,c=0,u="";if(s>-1)for(var d=0;d<a.length;d++){var h=a[d];c>=s&&c<l&&(u+=h),c+=h.length}u.length>0&&(n=j()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:i},n)}}]),r}(o.Component),Tt=n(89674),wt=n.n(Tt);const St=function(e){var t=e.onSelectedSearchResult,n=e.searchValue,i=e.results,r=e.selectedText,a=(0,o.useRef)(),s=(0,o.useRef)(new it.t1({fixedWidth:!0,defaultHeight:100})),l=function(e){var a=e.key,l=e.index,c=e.parent,u=e.style,d=i[l];return o.createElement(it.Z8,{key:"listkeys2-".concat(a),cache:s.current,parent:c,columnIndex:0,rowIndex:l},o.createElement("div",{style:u},i.length>0&&o.createElement("div",{className:wt().searchListItem,onClick:function(){return t(r,d[0],n.length,r)}},o.createElement(bt,{string:d[1],highlightClass:wt().highlight,searchTerm:n}))))};return i?o.createElement(o.Fragment,null,o.createElement(it.qj,null,(function(e){var t=e.height,n=e.width;return o.createElement(it.aV,{ref:a,height:t,rowCount:null==i?void 0:i.length,rowHeight:s.current.rowHeight,deferredMeasurementCache:s.current,rowRenderer:l,width:n,overscanRowCount:1})}))):null};function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){(0,Ae.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kt=(0,l.connect)((function(e){var t,n=v.PR(e),i=v.an(e),r=[];if(i){r=v.Dl(e,i.id);var o=v.y6(e,i.id);t=o?v.vp(e,o):v.S9(e,i.id)}var a=v.xM(e),s=(0,v.$L)(e),l=v.Ef(e);return{witnesses:r,selectedText:i,selectedWitness:t,textListIsVisible:(0,v.Tq)(e),accountOverlayVisible:(0,v.FG)(e),textFontSize:a,user:n,searchValue:l,showTableContent:s,searchResults:v.YE(e,l)}}),null,(function(e,t,n){var i=t.dispatch,r=e.selectedText;return Ot(Ot(Ot({},n),e),{},{navigationButtonClicked:function(){t.dispatch(g.DaN(!e.textListIsVisible))},onSelectedWitness:function(e){i(g.FRK(null==r?void 0:r.id,null==e?void 0:e.id))},onChangedFontSize:function(e){i(g.BUD(e))},changeShowTableContent:function(e){i(g.WkO(e))},searchChanged:function(e){i(g.fAN(e))},changeSelectSyncId:function(e){},onSelectedSearchResult:function(e,t,n,r){r&&r.id===e.id?i(g.VuE(e.id,t,n)):i(batchActions([g.VuE(e.id,t,n),g.M1d(e)]))}})}))((function(e){var t=(0,o.useState)(""),n=(0,c.Z)(t,2),i=n[0],r=n[1],a=(0,o.useState)(!1),s=(0,c.Z)(a,2),l=s[0],u=s[1],d=(0,o.useState)(!1),h=(0,c.Z)(d,2),f=h[0],m=h[1],g=(0,o.useRef)(),v=(0,o.useRef)(),x=o.useRef(Be().debounce((function(t){e.searchChanged(t)}),1e3)).current,y=(0,o.useCallback)((function(e){e.preventDefault(),x(i),m(!0)}),[i]),E=(0,o.useCallback)((function(){u(!l)}),[l]);(0,o.useEffect)((function(){!0===l&&g.current.focus(),!1===l&&x(null)}),[l]);var b=Be().isObject(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id),T=b?e.searchResults[e.selectedText.id].results:[];return o.createElement(p.Kq,{direction:"column",ref:v,spacing:1,sx:{paddingInline:{md:1,xs:0},paddingBlock:{md:1,xs:0},borderTop:{md:0,xs:"1px solid gray"},bgcolor:"heading.main",color:"text.primary"}},o.createElement(p.Kq,{direction:"row",spacing:1,justifyContent:"space-between"},o.createElement(p.xu,{sx:{display:"flex",gap:{md:2,sx:0},flexDirection:{md:"row",xs:"column"}}},o.createElement(lt,null),o.createElement(tt,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),o.createElement(p.hE,{size:"small","aria-label":"small button group",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"fit-content",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1},"& hr":{mx:.5}},className:Xe().button_group_menu},o.createElement(xt,{handleWindowSearch:E}),o.createElement(gt,{textFontSize:e.textFontSize,onChangedFontSize:e.onChangedFontSize,onExport:e.onExport}),o.createElement(Et,{changeShowTableContent:e.changeShowTableContent,showTableContent:e.showTableContent}))),o.createElement(p.UO,{in:l,mountOnEnter:!0,unmountOnExit:!0},o.createElement("form",{onSubmit:y},o.createElement(p.Kq,{direction:"row",spacing:2,position:"relative"},o.createElement(p.nv,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:g,value:i,onChange:function(e){return r(e.target.value)}}),o.createElement(p.zx,{variant:"outlined",size:"small",onClick:y,style:{height:25}},"Search"),e.searchResults&&f&&o.createElement(p.xu,{sx:(0,Ae.Z)({position:"absolute",top:35,right:0,zIndex:1,bgcolor:"heading.main",width:350,height:350,boxShadow:3,overflowX:"hidden"},"boxShadow",3)},0===T.length&&o.createElement("p",null,"no such word present"),b&&T.length>0&&o.createElement(St,{onSelectedSearchResult:e.onSelectedSearchResult,searchValue:e.searchValue,results:T,selectedText:e.selectedText}),o.createElement(p.hU,{"aria-label":"closeButton",onClick:function(){m(!1),x(null),r("")},size:"small",sx:{right:15,top:0,position:"absolute"}},o.createElement(re.Z,{fontSize:"inherit"})))))))}));const At=kt;var Ct=n(79243),Zt=n(30105),Rt=function(){function e(t,n){(0,y.Z)(this,e),this.annotatedText=t,this.splitter=n,this._texts=null,this._textsId=null,this._textsFinalPositions=[]}return(0,E.Z)(e,[{key:"texts",get:function(){if(!this.annotatedText)return[];if(!this._texts||this._textsId!==this.annotatedText.getUniqueId()){this._textsFinalPositions=[];var e=this.annotatedText.segmentedText,t=e.getText(),n=this.splitter(t).filter((function(e){return 0!==e}));if(0===n.length)return this._textsFinalPositions.push(t.length),[e];n[n.length-1]+1<t.length&&n.push(t.length-1);for(var i=e.segments,r=0,o=[],a=0;a<n.length;a++){var s,l=n[a],c=e.indexOfSegmentAtPosition(l-1);s=a==n.length-1?i.slice(r):i.slice(r,c+1);var u=new Ct.Z(s);if(o.push(u),r=c+1,c>=0){var d=i[c];this._textsFinalPositions.push(d.end)}}this._texts=o.filter((function(e){return e.segments.length>0})),this._textsId=this.annotatedText.getUniqueId()}return this._texts||[]}},{key:"getTextsFinalPositions",value:function(){return this.texts,this._textsFinalPositions}},{key:"getTextIndexOfPosition",value:function(e){for(var t=this.getTextsFinalPositions(),n=0,i=null,r=0;r<t.length;r++){var o=t[r];if(e>=n&&e<=o){i=r;break}n=o}return null===i&&(console.warn("no index for position %d",e),i=t.length-1),i}}]),e}(),Pt=n(19854),Bt=n(9438),Nt=n.n(Bt),Wt=n(90948),Dt=n(41796),_t=(0,Wt.ZP)("div")((function(e){var t=e.theme;return(0,Ae.Z)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:(0,Dt.Fq)(t.palette.common.white,.15),"&:hover":{backgroundColor:(0,Dt.Fq)(t.palette.common.white,.25)},marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{marginLeft:t.spacing(1),width:"auto"})})),Lt=(0,Wt.ZP)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),jt=(0,Wt.ZP)(p.MA)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":(0,Ae.Z)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("sm"),{width:"0",cursor:"pointer","&:focus":{width:"20ch"}})}}));const zt=function(){var e=[{Id:1,Title:"chapter 1",segment_id:0},{Id:2,Title:"chapter 2",segment_id:400}];return e.length,o.createElement(p.xu,{sx:{bgcolor:"heading.main",color:"text.primary",width:"100%",height:"100%",paddingInline:2}},o.createElement(p.o8,{sx:{justifyContent:"space-between",paddingLeft:"0 !important",margin:0}},o.createElement(p.ZT,{textTransform:"uppercase",component:"h6"},"Table Of Content"),o.createElement(_t,null,o.createElement(Lt,null,o.createElement(f.Z,null)),o.createElement(jt,{placeholder:"Search…",inputProps:{"aria-label":"search"}}))),o.createElement(p.xu,null,e.map((function(e,t){return o.createElement(p.xu,{key:"TableContent-"+t,sx:{cursor:"pointer",width:"fit-content","&:hover":{fontWeight:"bold"}}},e.Title)}))))};var qt=n(73935),Ht=n(90147),Mt=n.n(Ht),Vt=n(56604),Ft=n(84506),Ut=n(99038);function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){(0,Ae.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gt(e){return"s2_"+e.start}var Yt=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(e){var t;return(0,y.Z)(this,r),(t=i.call(this,e)).state={segmentedText:e.segmentedText},t.textAlignmentById=t.props.textAlignmentById,t._renderedSegments=null,t._renderedHtml=null,t}return(0,E.Z)(r,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return Kt(Kt({},t),{},{segmentedText:e.segmentedText})}))}},{key:"selectedElement",value:function(e){var t=[],n=[],i=document.getSelection();if(null!=e&&e.id.includes("s2_")&&this.props.condition){var r=parseInt(e.id.replace("s2_",""));this.props.changeSyncIdOnClick(r),this.props.changeScrollToId({id:"ua",from:"ua"});var o=parseInt(e.id.replace("s2_","")),a=this.textAlignmentById.find((function(e){return o>=e.TStart&&o<e.TEnd}));if(a){for(var s=a.start;s<a.end;s++)t.push(s);for(var l=a.TStart;l<a.TEnd;l++)n.push(l);this.props.changeSelectedRange({source:t,target:n})}}i&&"Range"===i.type||(this.props.selectedSegmentId(e.id),e.id||this.props.changeSelectedRange({source:[],target:[]}))}},{key:"generateHtml",value:function(e,t){var n=t.segmentedText.segments,i='<p class="'+Mt().textLine+'">';if(0===n.length)return{__html:i};for(var r=n[n.length-1].end+1,o=Mt().highlight,a=Mt().activeHighlight,s=null,l=0;l<n.length;l++){var u,d=n[l],h="",p=[];if(d.start===r)break;var f=null;if(0===d.length||(f=Gt(d)),null!==(u=e.selectedTargetRange)&&void 0!==u&&u.includes(d.start)&&e.condition){var m="light"===e.theme.palette.mode?Mt().selectedRangelight:Mt().selectedRangeDark;p.push(m)}p.length>0&&(h='class="'+O().apply(void 0,p)+'"');var g=d.text;if(e.searchStringPositions){var v=d.start,x=v;g="";var y=o;e.selectedSearchResult&&e.selectedSearchResult.start<=x&&e.selectedSearchResult.start+e.selectedSearchResult.length>x&&(y=a);for(var E=0;E<d.text.length;E++){var b=d.text.charAt(E);if(x=v+E,s){var T=s,w=(0,c.Z)(T,2);w[0],0===E&&(g+='<span class="'+y+'">'),x===w[1]?(g+=b+"</span>",s=null):E===d.text.length-1?g+=b+"</span>":g+=b}else if(x in e.searchStringPositions){var S=(0,c.Z)(e.searchStringPositions[x],2),I=S[0],k=S[1];g+='<span class="'+y+'">'+b,E!==d.text.length-1&&x!==k||(g+="</span>"),x<k&&(s=[I,k])}else g+=b}}i+="<span id="+f+" key="+f+" "+h+">"+g+"</span>"}return this._renderedSegments=n,{__html:i+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.generateHtml(e,t);return this.props.fontSize!==e.fontSize||(!this._renderedHtml||n.__html!==this._renderedHtml.__html)&&this._renderedHtml!==n&&(this._renderedHtml=n,!0)}},{key:"componentDidUpdate",value:function(){this.textAlignmentById=this.props.textAlignmentById}},{key:"render",value:function(){var e=this,t=[Mt().text];0===this.props.row&&t.push(Mt().textFirstRow);var n=this._renderedHtml?this._renderedHtml:this.generateHtml(this.props,this.state);return this._renderedHtml||(this._renderedHtml=n),o.createElement("div",{className:Mt().textContainer},o.createElement("div",{className:O().apply(void 0,t),dangerouslySetInnerHTML:n,onClick:function(t){return e.selectedElement(t.target)},style:{fontSize:this.props.fontSize,fontFamily:"var(--tibetan-fonts2)"}}))}}]),r}(o.Component);const $t=(0,Ut.Z)(Yt);var Xt=n(43842),Jt=n.n(Xt);function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach((function(t){(0,Ae.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nn={},rn=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(e){var t;return(0,y.Z)(this,r),(t=i.call(this,e)).textAlignmentById=[],t.changeScrollToId=e.changeScrollToId,t.condition=e.condition,t.list=null,t.splitText=null,t.cache=new A.t1({fixedWidth:!0}),t.rowRenderer=t.rowRenderer.bind((0,b.Z)(t)),t.activeSelection=null,t.selectedNodes=null,t._mouseDown=!1,t._activeWitness=null,t._didSetInitialScrollPosition=!1,t._modifyingSelection=!1,t.imageHeight=null,t.imageWidth=null,t.calculatedImageHeight=null,t.selectedWindow=t.props.selectedWindow,t.scrollEvent=t.scrollEvent.bind((0,b.Z)(t)),t.scrollTop=0,t}return(0,E.Z)(r,[{key:"scrollEvent",value:function(e){if(1===this.selectedWindow)return null;if(2===this.selectedWindow){var t=[];this.textAlignmentById.map((function(e){var n=document.getElementById("s2_"+e.TStart);n&&n.getBoundingClientRect().top>90&&t.push({id:e.id,start:e.start,TStart:e.TStart,end:e.end,TEnd:e.TEnd})})),Be().isEmpty(t)||2===this.selectedWindow&&this.debouncedScroll(t)}}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation&&(t=e.splitText.getTextIndexOfPosition(e.activeAnnotation.start)),t}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),this._mouseDown||this.mouseUp())}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){this._mouseDown=!1,this.activeSelection&&(this.activeSelection=null)}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,i=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&i.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"updateList",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var i=0;i<t.length;i++){var r=t[i];this.cache.clear(r)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"processProps",value:function(e){var t=this,n=!1;(!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(n=!0,this._didSetInitialScrollPosition=!1),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1);var i=this.getControlsMeasurements(e);if(i&&(this.selectedTextIndex=i.selectedTextIndex,this.firstSelectedSegment=i.firstSelectedSegment,this.splitTextRect=i.splitTextRect,this.selectedElementId=i.selectedElementId,this.selectedElementIds=i.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var r=null,o=this.selectedListRow(this.props),a=this.selectedListRow(e);if(o&&a){r=[];for(var s=o>a?a:o,l=this.props.splitText.texts.length;s<l;s++)r.push(s)}this.updateList(!0,r)}else if(this.lineBreaksChanges(this.props,e)){var c=this.selectedListRow(e);c||(c=this.selectedListRow(this.props));var u=this.props.splitText.texts,d=[];if(null!==c){for(var h=c,p=u.length;h<p;h++)d.push(h);this.updateList(!0,d)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"pageBreaksChanged",value:function(e,t){var n=e.splitText.getTextsFinalPositions(),i=t.splitText.getTextsFinalPositions();return n.length!==i.length||JSON.stringify(n)!==JSON.stringify(i)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,i=t.activeAnnotation,r=!1;return n&&n.isType(ANNOTATION_TYPES.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(r=!0),i&&i.isType(ANNOTATION_TYPES.lineBreak)&&e.activeAnnotations&&!e.activeAnnotations.hasOwnProperty(i.uniqueId)&&(r=!0),r}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return(e.showImages!==t.showImages||this.pageBreaksChanged(e,t))&&(n=!0),n}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=Be().throttle((function(){e.calculatedImageHeight=null,e.updateList()}),500).bind(this),window.addEventListener("resize",this.resizeHandler),this.debouncedScroll=Be().debounce((function(t){e.changeScrollToId({id:t[0].TStart,from:2})}),1e3),this.selectionHandler=Be().debounce((function(t){e.handleSelection(t)}),200).bind(this),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.processProps(this.props),this.componentDidUpdate(),this.splitText.style.scrollBehavior="smooth",this.timer=setTimeout((function(){e.resizeHandler()}),2e3)}},{key:"scrollToIndex",value:function(e){var t=this.list;setTimeout((function(){t.scrollToRow(e),setTimeout((function(){t.scrollToPosition(t.props.scrollTop-300)}),0)}),100)}},{key:"componentDidUpdate",value:function(e,t){var n=this,i=this.props.scrollToId;this.targetId2=this.props.syncIdOnClick,this.selectedWindow=this.props.selectedWindow,this.list,this.props.searchResults;var r=this.props.textAlignment;if(this.condition=this.props.condition,!this._didSetInitialScrollPosition&&this.list){var o=this.list;if(this.props.activeAnnotation||this.props.selectedSearchResult){var a=this.getSelectedTextIndex();setTimeout((function(){o.scrollToRow(a),setTimeout((function(){o.scrollToPosition(o.props.scrollTop-300)}),0)}),100)}this._didSetInitialScrollPosition=!0}if(1===this.selectedWindow&&1===i.from&&this.condition&&null!==i.id&&(this.textAlignmentById=this.props.textAlignmentById||[],r)){var s=this.textAlignmentById.find((function(e){return e.start===i.id})),l=null==s?void 0:s.TStart;if(null!==l){var c=this.props.splitText.getTextIndexOfPosition(l);this.scrollToIndex(c)}}if(this.targetId2&&null===i.from&&1===this.selectedWindow&&null===i.id&&this.condition){var u,d=r.alignment.find((function(e){return n.targetId2>=e.source_segment.start&&n.targetId2<e.source_segment.end})),h=null==d||null===(u=d.target_segment)||void 0===u?void 0:u.start,p=this.props.splitText.getTextIndexOfPosition(h);this.scrollToIndex(p)}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler),clearTimeout(this.timer)}},{key:"getSelectedTextIndex",value:function(){var e=0,t=null;if(this.props.activeAnnotation){var n=this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation);t=(0,c.Z)(n,1)[0]}else if(this.props.selectedSearchResult){var i=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start);i instanceof Vt.Z?t=i.start:"number"==typeof i&&(t=i)}return t&&(e=this.props.splitText.getTextIndexOfPosition(t)),e}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,i=null,r=null,o=null,a=null,s=[],l=0;if(e.activeAnnotation){var u=e.activeAnnotation,d=e.splitText.annotatedText.getPositionOfAnnotation(u);if(null===(l=(0,c.Z)(d,1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;u.type===ANNOTATION_TYPES.pageBreak&&(l-=1),u.type===ANNOTATION_TYPES.lineBreak&&(l-=1);var h=l+u.length;u.length>0&&(h-=1),n=e.splitText.getTextIndexOfPosition(h),o=t.getBoundingClientRect()}var p=[];if(e.selectedAnnotatedSegments&&e.selectedAnnotatedSegments.length>0){p=e.selectedAnnotatedSegments;for(var f=0;f<p.length;f++){var m=p[f];if(null===i&&m instanceof Vt.Z){i=m;break}}i&&(0===i.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(r=idForInsertion(i),a=idForInsertion):(r=idForSegment(i),a=idForSegment))}else if(e.activeAnnotation)if(e.activeAnnotation.isDeletion){var g=new Vt.Z(l,"");r=idForDeletedSegment(g),a=idForDeletedSegment,p=[i=g]}else if(e.activeAnnotation.isInsertion){var v=e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),x=(0,c.Z)(v,1)[0];if(x){var y=new Vt.Z(x,"");r=idForInsertion(y),a=idForInsertion,p=[i=y]}}else if(e.activeAnnotation.type===ANNOTATION_TYPES.pageBreak){var E=new Vt.Z(l+1,""),b=new Vt.Z(l,"");i=E,p=[E],s=[r=idForPageBreak(b)]}else if(e.activeAnnotation.type===ANNOTATION_TYPES.lineBreak){var T=new Vt.Z(l+1,""),w=new Vt.Z(l,"");i=T,p=[T],s=[r=idForLineBreak(w)]}if(a)for(var S=0;S<p.length;S++){var I=p[S];if(I instanceof Vt.Z){var O=a(I);s.push(O)}}return null!=n&&i&&r&&o?{selectedTextIndex:n,firstSelectedSegment:i,selectedElementId:r,splitTextRect:o,selectedElementIds:s}:null}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,i=this.cache,r=t.selectedWitness?t.selectedWitness.id:0;return o.createElement("div",{className:Jt().splitText,ref:function(t){return e.splitText=t},key:r,style:{cursor:"pointer"}},o.createElement(k.q,{disableWidth:!0},(function(r){var a=r.height;return o.createElement(it.aV,{ref:function(t){return e.list=t},height:a,rowCount:t.splitText.texts.length,rowHeight:i.rowHeight,rowRenderer:n,width:1,overscanRowCount:1,deferredMeasurementCache:i,onScroll:e.scrollEvent,scrollToAlignment:"start",containerStyle:{width:"100%",maxWidth:"100%"},style:{width:"100%",paddingTop:30,paddingInline:50}})})))}},{key:"getStringPositions",value:function(e,t,n){var i=this.props.splitText.annotatedText.getUniqueId();if(nn.hasOwnProperty(i)||(nn=(0,Ae.Z)({},i,{})),nn[i].hasOwnProperty(t)||(nn[i]=(0,Ae.Z)({},t,{})),nn[i][t].hasOwnProperty(n))return nn[i][t][n];for(var r=new(_()),o=e.getText(),a=e.segments[0].start,s=[],l=o.indexOf(t);-1!==l;)s.push(l),l=o.indexOf(t,l+1);var c={};if(s.length>0)for(var u=r.splitGraphemes(o),d=0,h=null,p=0;p<u.length;p++){var f=u[p],m=d+(f.length-1);null!==h?m>=h+(t.length-1)&&(c[h+a]=[h+a,m+a],h=null):-1!==s.indexOf(d)?t.length===f.length?c[d+a]=[d+a,m+a]:t.length>f.length&&(h=d):h=null,d+=f.length}return nn[i][t][n]=c,c}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,i=e.parent,r=e.style,a=this.props,s=this.cache,l={},c=this.props.searchValue;c&&c.length>0&&a.splitText&&(l=this.getStringPositions(a.splitText.texts[n],c,n));var u=tn(tn({},r),{},{height:r.height+10});return o.createElement(A.Z8,{columnIndex:0,parent:i,rowIndex:n,cache:s,key:t},o.createElement("div",{style:u,ref:this.splitTextRef,id:"index2_".concat(n),className:Jt().splitTextRow},o.createElement("div",{className:Jt().splitTextRowContent},o.createElement($t,{segmentedText:a.splitText.texts[n],row:n,selectedSegmentId:a.selectedSegmentId,searchStringPositions:l,textAlignmentById:a.textAlignmentById,fontSize:a.fontSize,isPanelLinked:this.props.isPanelLinked,selectedSourceRange:a.selectedSourceRange,selectedTargetRange:a.selectedTargetRange,changeSelectedRange:a.changeSelectedRange,changeSyncIdOnClick:this.props.changeSyncIdOnClick,changeScrollToId:this.props.changeScrollToId,condition:this.condition}))))}}]),r}(o.PureComponent);var on=n(17622);function an(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?an(Object(n),!0).forEach((function(t){(0,Ae.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ln,cn,un,dn,hn={},pn={},fn=function(e,t){var n=v.vp(e,t);if(!n)return console.warn("no witness"),null;var i=n.text,r=v.S9(e,i.id),o=v.Ei(e,i.id);if(!r||!o)return null;var a=function(e,t,n){if(pn.hasOwnProperty(t.id))return[pn[t.id].appliedAnnotations,pn[t.id].allAnnotations];t.text;var i=v.CO(e,n.id),r=mn(e,t.id,n.id),o=null,a={};if(t.id!==n.id){o=v.Zt(e,t.id);var s={};for(var l in i)if(i.hasOwnProperty(l)){var c=i[l];c.creator_witness!==t.id||o.hasOwnProperty(c.unique_id)?c.creator_witness===t.id&&(a[c.unique_id]=c):s[c.unique_id]=c}r=sn(sn({},gn(e,s)),r),i=s}var u=gn(e,i);return a=gn(e,a),Object.keys(a).length>0&&(u=sn(sn({},u),a)),u=sn(sn({},r),u),u=Be().pickBy(u,(function(e,n){return!(t&&e.type===Ft.DT.lineBreak&&e.creatorWitness.id!==t.id)})),v.Ty(e,t.id)&&v.aJ(e,t.id)&&(pn[t.id]={appliedAnnotations:r,allAnnotations:u}),[r,u]}(e,n,r),s=(0,c.Z)(a,2),l=s[0],u=(s[1],function(e){return vn[e.id]||(vn[e.id]=(0,on.Z)(e.content||"")),vn[e.id]}(r)),d=new Zt.ZP(u,Object.values(l),(function(e){return(0,on.Z)(e).segments}),r,n);return d},mn=function(e,t,n){if(!v.aJ(e,t))return{};var i=v.F5(e,t);if(!i)return{};var r={};for(var o in i)if(i.hasOwnProperty(o)){var a=v.zG(e,n,o);a&&(r[a.unique_id]=a)}return gn(e,r)},gn=function(e,t){var n={};for(var i in t)if(t.hasOwnProperty(i)){var r=t[i],o=v.h4(e,r);o&&(n[i]=o)}return n},vn={};function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){(0,Ae.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bn(e){return[e.start,e.length].join("-")}var Tn=(0,l.connect)((function(e){var t,n,i,r={},o=(0,v.xM)(e),a=(0,v.an)(e),s={};if(a){i=v.S9(e,a.id)||{};var l=v.y6(e,a.id);l&&(r=v.vp(e,l)),Be().isEmpty(r)&&Be().isEmpty(i),r=i}n=function(e,t){var n=null;return t&&(n=fn(e,t))&&(hn[t]=n),n}(e,null===(t=r)||void 0===t?void 0:t.id);var u=e.data2.loadingWitnesses;n&&(s=function(e,t){if(e===ln&&t===cn&&e.version===dn)return un;for(var n={},i={},r=function(r){var o=t[r],a=e.getPositionOfAnnotation(o),s=(0,c.Z)(a,2),l=s[0],u=s[1];if(null==l)return"continue";if(0===u){if(o.isInsertion){var d=bn(o),h=i[d];if(h)return h.map((function(e){return n[e].push(o)})),"continue";l=INSERTION_KEY+l}o.isDeletion&&o.length>0&&(l=DELETION_KEY+l),o.type===ANNOTATION_TYPES.pageBreak&&(l=PAGE_BREAK_KEY+l),o.type===ANNOTATION_TYPES.lineBreak&&(l=LINE_BREAK_KEY+l),void 0===n[l]&&(n[l]=[]),-1===n[l].indexOf(o)&&n[l].push(o)}else{for(var p=[],f=l;f<l+u;f++)void 0===n[f]&&(n[f]=[]),-1===n[f].indexOf(o)&&n[f].push(o),p.push(f);if(o.isInsertion){var m=bn(o);i[m]=p}}},o=0;o<t.length;o++)r(o);return ln=e,cn=t,un=n,dn=e.version,n}(n,Object.values([])));var d=v.tt(e),h=(0,v.Hd)(e),p=(0,v.UO)(e),f=(0,v.X3)(e),m=(0,v.pt)(e),g=(0,v.Ef)(e),x=v.qB(e),y=(0,v.Cd)(e);return{text:a,textFontSize:o,annotatedText:n,selectedWitness:r,loading:u,annotationPositions:s,scrollToId:h,syncIdOnClick:p,textAlignment:f,textAlignmentById:(0,v.LZ)(e),selectedWindow:m,selectedSourceRange:(0,v.xX)(e),selectedTargetRange:(0,v.rv)(e),showTableContent:(0,v.$L)(e),selectedSearchResult:(0,v.JC)(e),searchResults:(0,v.YE)(e,g),searchValue:g,condition:y&&d&&x}}),null,(function(e,t,n){var i=e.annotatedText,r=e.annotationPositions,o=t.dispatch,a=function(e){return-1!==e.indexOf("ds2_")},s=function(e){return-1!==e.indexOf("i2_")},l=function(e){return s(e)?e.substr(2):a(e)?e.substr(3):e.substr(2)};return En(En(En({},n),e),{},{onChangedFontSize:function(e){o(g.$4v(e))},didSelectSegmentIds:function(t){if(0!==t.length){var n,o=[],c=[],u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(u.s();!(n=u.n()).done;){var d=n.value;if(!a(d)&&!s(d)){var h=l(d),p=i.segmentedText.segmentAtPosition(h);c.push(p);var f=r[p.start];f&&(o=o.concat(f))}}}catch(e){u.e(e)}finally{u.f()}o=Be().uniqWith(o,(function(e,t){return e.toString()==t.toString()}));var m=Be().intersectionWith(o,i.annotations,(function(e,t){return e.toString()==t.toString()})),g=getSegmentsRange(c,m,o,e.annotatedText);if(g){var v=i.getBaseAnnotation(g.start,g.length);if(g.annotation)g.annotation;else if(m.length>0){var x=i.segmentedText.segmentsInRange(g.start,g.length).reduce((function(e,t){return e+t.text}),"");e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new Annotation(WORKING_VERSION_ANNOTATION_ID,getTextWorkingWitness(e.text),v.start,v.length,x,ANNOTATION_TYPES.variant,e.selectedWitness,e.user)}}else console.warn("No range for selected segment ids: %o",t)}},changeScrollToId:function(e){return o(g.VZO(e))},changeSyncIdOnClick:function(e){o(g.a_O(e))},changeSelectedWindow:function(e){o(g.skj(e))},changeSelectedRange:function(e){o(g.S7E(e))},changeShowTableContent:function(e){o(g.WkO(e))},selectedSegmentId:function(t){var n=l(t),i=n;if(s(t)?i=INSERTION_KEY+n:a(t)?i=DELETION_KEY+n:-1!==t.indexOf("p2_")?i=PAGE_BREAK_KEY+n:-1!==t.indexOf("l2_")&&(i=LINE_BREAK_KEY+n),r[i],e.activeAnnotation&&e.activeAnnotation){var c=g.Enf(null);o(c)}}})}))((function(e){var t=(0,o.useRef)(),n={name:""};function i(){n.name&&e.changeSelectedWindow(2)}e.text&&(n=e.text),(0,o.useEffect)((function(){var e=t.current;return e.addEventListener("mouseenter",i),function(){e.removeEventListener("mouseenter",i)}}),[]);var r,a=null,l=null,c=e.selectedWindow;e.annotatedText&&e.text&&!e.loading?(r=e.paginated?positionSplitter(e.pageBreaks):(0,Pt.Z)(800,/^།[\s]+(?!།[\s]+)/,2,5),l=new Rt(e.annotatedText,r),a=o.createElement(rn,{splitText:l,limitWidth:!1,selectedSegmentId:e.selectedSegmentId,annotationPositions:e.annotationPositions,selectedAnnotatedSegments:null==e?void 0:e.selectedAnnotatedSegments,selectedWitness:e.selectedWitness,key:12,selectedSearchResult:e.selectedSearchResult,fontSize:e.textFontSize,scrollToId:e.scrollToId,syncIdOnClick:e.syncIdOnClick,textAlignment:e.textAlignment,textAlignmentById:e.textAlignmentById,isPanelLinked:e.isPanelLinked,changeScrollToId:e.changeScrollToId,changeSyncIdOnClick:e.changeSyncIdOnClick,selectedWindow:c,selectedSourceRange:e.selectedSourceRange,selectedTargetRange:e.selectedTargetRange,changeSelectedRange:e.changeSelectedRange,searchResults:e.searchResults,searchValue:e.searchValue,selectedText:e.text,condition:e.condition})):a=o.createElement("div",{key:Math.random()});var u=[a];return o.createElement(p.xu,{ref:t,className:Nt().textDetail,sx:{height:"100%",flex:1,bgcolor:"heading.main",color:"texts.main"}},o.createElement(At,null),o.createElement(p.iz,null),o.createElement(s(),{loaded:!e.loading,zIndex:5}),o.createElement(p.xu,{style:{display:"flex",height:"100%",width:"100%",position:"relative"}},o.createElement(p.xu,{className:O()(Nt().textContainer,ke().flex)},e.loading?o.createElement("div",null):u),o.createElement(p.Mi,{direction:"left",in:e.showTableContent,container:t.current,unmountOnExit:!0,mountOnEnter:!0},o.createElement(p.xu,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0}},o.createElement(zt,null)))))}));const wn=o.memo(Tn);var Sn=n(76818),In=n(81718),On=n(90696),kn=n(9908),An=n.n(kn),Cn=n(75740),Zn=n.n(Cn);n(46530);var Rn=n(94507),Pn=n.n(Rn),Bn=n(12763),Nn=n.n(Bn),Wn=n(85753),Dn={"སྡེ་དགེ":"https://www.lotsawahouse.org/Images/Situ_Panchen.jpg","པེ་ཅིན།":"https://cdn.discordapp.com/attachments/959329505661554708/1034029050580172830/unknown.png","སྣར་ཐང༌།":"https://www.lotsawahouse.org/Images/Situ_Panchen.jpg"},_n=function(){return o.createElement(o.Fragment,null,o.createElement(Wn.Z,{sx:{fontSize:16,color:"rgba(0,0,0,0.5)"}}),o.createElement("div",{className:Nn().avatars},[{img:23},{img:34},{img:70}].map((function(e,t){return o.createElement("span",{className:Nn().avatar,key:"d-"+t},o.createElement("img",{src:"https://picsum.photos/".concat(e.img),alt:"index-image"}))}))),o.createElement(p.Af,{label:"+".concat(Math.floor(100*Math.random())),size:"small",sx:{fontSize:11,height:11}}))};const Ln=function(e){var t=e.name;return(t.includes("མཉམ་འབྲེལ་པར་མ།།")||t.includes("Working"))&&(t="Working Edition"),o.createElement(p.qE,{alt:"dege",src:Dn[t],sx:{width:24,height:24,bgcolor:function(e){var t,n=0;for(t=0;t<e.length;t+=1)n=e.charCodeAt(t)+((n<<5)-n);var i="#";for(t=0;t<3;t+=1)i+="00".concat((n>>8*t&255).toString(16)).slice(-2);return i}(t),fontSize:10}},t.split(" ").length>1?"".concat(t.split(" ")[0][0]).concat(t.split(" ")[1][0]):"".concat(t[0]))},jn=function(e){e.data;var t=o.useState(20),n=(0,c.Z)(t,2),i=(n[0],n[1]);return o.createElement("div",{className:Pn().voteContainer,onClick:function(){return i((function(e){return e+1}))}},o.createElement(_n,null))},zn=function(e){e.accuracy;var t=o.createElement("p",null,"<",o.createElement(H.Z,{id:"annotation.delete"}),">"),n=e.annotationData.content;""!==n.trim()&&(n.length>250&&(n=n.substr(0,250)+"…"),t=o.createElement("p",{style:{minWidth:100,maxWidth:"30ch"}},n));var i=[An().annotationDetail];e.isActive&&i.push(An().active);var r=O().apply(void 0,i),a=e.annotationData.name?e.annotationData.name:e.user.name;return o.createElement("div",{className:r,onClick:e.selectAnnotationHandler},o.createElement(p.xu,{className:An().annotationHeader,sx:{bgcolor:"secondary.light",color:"texts.main"}},o.createElement(Ln,{name:a}),o.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.createElement("h3",null,a),"པེ་ཅིན།"===a&&o.createElement("span",{className:An().date},"1738, month, day N/A"),"སྣར་ཐང༌།"===a&&o.createElement("span",{className:An().date},"1742, month, day N/A"),"སྡེ་དགེ"===a&&o.createElement("span",{className:An().date},"1744, month, day N/A")),e.isLoggedIn&&e.isActive&&o.createElement("button",{style:{display:"none"},className:An().edit,onClick:e.editAnnotationHandler,id:"editBtn"})),o.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},t),o.createElement("div",{className:An().contentOptions},o.createElement(jn,{data:e.annotationData})))};var qn;function Hn(){return Hn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Hn.apply(this,arguments)}const Mn=function(e){return o.createElement("svg",Hn({viewBox:"0 0 512 512"},e),qn||(qn=o.createElement("path",{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"})))},Vn=function(e){var t=e.annotationData.content,n=[An().annotationDetail],i=null;e.isActive&&n.push(An().active);var r=O().apply(void 0,n);return o.createElement("div",{className:r},o.createElement("h3",null,e.annotationData.name),o.createElement("div",{className:An().editing},o.createElement("textarea",{defaultValue:t,autoFocus:!0,onInput:function(e){i.style.height="5px",i.style.height=i.scrollHeight+"px"},ref:function(e){return i=e}}),o.createElement("div",{className:An().actionButtons},o.createElement("div",{className:An().save,onClick:function(){i&&e.saveAnnotationHandler(i.value)}},o.createElement(Mn,{height:"0.8em",width:"0.8em",style:{fill:"currentColor",marginRight:6}}),o.createElement(H.Z,{id:"annotation.save"})),o.createElement("div",{className:An().cancel,onClick:e.cancelAnnotationHandler},o.createElement(H.Z,{id:"annotation.cancel"})))))};var Fn=n(17084),Un=n.n(Fn),Qn=n(17716),Kn=n.n(Qn),Gn=n(56096),Yn=n.n(Gn);const $n=function(e){return o.createElement("div",{className:Yn().button,title:e.title,onClick:e.onClick},"+")};var Xn=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(){return(0,y.Z)(this,r),i.apply(this,arguments)}return(0,E.Z)(r,[{key:"render",value:function(){var e=null;if(this.props.buttonOnClick){var t=this.props.buttonTitleId?this.props.intl.formatMessage({id:this.props.buttonTitleId}):"";e=o.createElement($n,{title:t,onClick:this.props.buttonOnClick})}return o.createElement("h3",{className:Kn().heading},o.createElement("span",{className:Kn().title},o.createElement(H.Z,{id:this.props.titleId})),e&&o.createElement("div",{className:Kn().button},e))}}]),r}(o.Component);(0,h.ZP)(Xn);var Jn=n(18141),ei=n.n(Jn),ti=n(84512),ni=n.n(ti);var ii=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(e){var t;return(0,y.Z)(this,r),(t=i.call(this,e)).state={content:e.note.content},t}return(0,E.Z)(r,[{key:"save",value:function(){var e=this.textarea?this.textarea.value:"";this.props.saveNote(this.props.note,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"handleChange",value:function(e){var t=e.target instanceof HTMLTextAreaElement?e.target.value:"";this.setState((function(e,n){return{content:t}}))}},{key:"render",value:function(){var e=this;return o.createElement("div",{className:ei().editorContainer},o.createElement("textarea",{className:ei().textEditor,ref:function(t){return e.textarea=t},value:this.state.content,onChange:this.handleChange.bind(this)}),o.createElement("div",{className:ni().buttonContainer},o.createElement("div",{className:ni().save,onClick:this.save.bind(this)},o.createElement(H.Z,{id:"annotation.save"})),o.createElement("div",{className:ni().cancel,onClick:this.cancel.bind(this)},o.createElement(H.Z,{id:"annotation.cancel"}))))}}]),r}(o.Component),ri=n(19090),oi=n.n(ri),ai=(n(90504),n(47670)),si=n.n(ai),li=n(68415);var ci=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(){return(0,y.Z)(this,r),i.apply(this,arguments)}return(0,E.Z)(r,[{key:"render",value:function(){return o.createElement("div",{className:si().answer},o.createElement("p",{className:Un().text,dangerouslySetInnerHTML:{__html:this.props.answer.content}}),o.createElement("p",{className:Un().subTitle},o.createElement(H.Z,{id:"question.answeredBy"})," ",this.props.answer.name,","," ",o.createElement(li.FormattedDate,{value:this.props.answer.created})))}}]),r}(o.Component),ui=n(46761);var di=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(){var e;(0,y.Z)(this,r);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=i.call.apply(i,[this].concat(n)),(0,Ae.Z)((0,b.Z)(e),"delete",(function(){e.props.delete&&e.props.delete()})),e}return(0,E.Z)(r,[{key:"render",value:function(){for(var e=this.props.question.topicId||null,t=$.t$+e,n=[],i=this.props.question.answers,r=0;r<i.length;r++){var a=i[r];n.push(o.createElement(ci,{answer:a,key:"answer_"+a.created}))}var s=this.props.question.name.length>0?this.props.question.name:this.props.question.username;return o.createElement(p.xu,{className:O()(oi().question,Un().padding),sx:{boxShadow:2}},o.createElement("p",{className:Un().text,dangerouslySetInnerHTML:{__html:this.props.question.content}}),o.createElement("div",{style:{display:"flex",alignItems:"center"}},o.createElement("span",{className:O()(oi().threadLink,Un().text)},o.createElement("a",{href:t,target:"_blank"},o.createElement(H.Z,{id:"question.viewThread"}))),o.createElement(p.hU,{"aria-label":"delete",size:"small",onClick:this.delete},o.createElement(ui.Z,{fontSize:"inherit"}))),o.createElement("p",{className:Un().subTitle},s,o.createElement(li.FormattedDate,{value:this.props.question.created})),o.createElement(me,{topicId:e}))}}]),r}(o.Component),hi=n(76600),pi=n.n(hi);var fi=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(e){var t;return(0,y.Z)(this,r),(t=i.call(this,e)).state={content:e.question.content},t}return(0,E.Z)(r,[{key:"save",value:function(){var e=this.textarea?this.textarea.value:"",t=this.props.defaultTitle+"[# ".concat(Date.now().toString().slice(-5,-1)," ]");this.props.saveQuestion(this.props.question,t,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"handleChange",value:function(e){var t=e.target instanceof HTMLTextAreaElement?e.target.value:"";this.setState((function(e,n){return{content:t}}))}},{key:"render",value:function(){var e=this;return o.createElement("div",{className:pi().editorContainer},o.createElement("div",null,this.props.questionQuote),o.createElement("textarea",{className:pi().textEditor,ref:function(t){return e.textarea=t},value:this.state.content,onChange:this.handleChange.bind(this)}),o.createElement("div",{className:ni().buttonContainer},o.createElement("div",{className:ni().save,onClick:this.save.bind(this)},o.createElement(H.Z,{id:"annotation.save"})),o.createElement("div",{className:ni().cancel,onClick:this.cancel.bind(this)},o.createElement(H.Z,{id:"annotation.cancel"}))))}}]),r}(o.Component),mi=n(91337),gi=n.n(mi);var vi=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(){return(0,y.Z)(this,r),i.apply(this,arguments)}return(0,E.Z)(r,[{key:"render",value:function(){return o.createElement("div",{className:O()(gi().loading,Un().text)},o.createElement(s(),{loaded:!1,scale:.25,position:"relative",top:"50%",left:"50%",lines:9,width:8,length:8,radius:14}),"Loading questions...")}}]),r}(o.Component),xi=n(48499),yi=n.n(xi);var Ei=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(){return(0,y.Z)(this,r),i.apply(this,arguments)}return(0,E.Z)(r,[{key:"delete",value:function(){this.props.delete&&this.props.delete(this.props.note)}},{key:"edit",value:function(){this.props.edit&&this.props.edit(this.props.note)}},{key:"render",value:function(){return o.createElement(p.xu,{className:yi().note,sx:{boxShadow:2}},o.createElement("p",null,"Note:"),o.createElement("div",{className:yi().header},o.createElement("h4",{className:yi().info},this.props.note.creatorUser.name),this.props.delete&&o.createElement("div",{className:yi().delete,onClick:this.delete.bind(this)},o.createElement(p.hU,{"aria-label":"delete",size:"small"},o.createElement(ui.Z,{fontSize:"inherit"})))),o.createElement("div",{className:yi().content,onClick:this.edit.bind(this)},this.props.note.content))}}]),r}(o.Component),bi=n(69646),Ti=n.n(bi),wi=n(12733),Si=n.n(wi),Ii={ADD:"+",DELETE:"×"};const Oi=function(e){var t={};return t.backgroundColor=e.backgroundColor||"",t.color=e.color||"#fff",o.createElement("div",{className:Si().accessory,title:e.title,onClick:e.onClick,style:t},Ii[e.type])},ki=function(e){var t=e.children,n=e.tooltipName,i=e.format,r=void 0===i?null:i,a=e.className,s=void 0===a?"":a,l=e.shortcut,c=void 0===l?"":l,u=e.on,d=void 0!==u&&u;return o.createElement(o.Fragment,null,o.createElement("div",{"data-tip":!0,"data-for":n,className:s,style:{width:"100%"}},d?t:o.createElement(p.u,{placement:"top",followCursor:!0,title:r?o.createElement(H.Z,{id:r}):o.createElement("span",null,n," [".concat(c,"]"))},t)))};var Ai,Ci,Zi,Ri=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(){return(0,y.Z)(this,r),i.apply(this,arguments)}return(0,E.Z)(r,[{key:"render",value:function(){var e=this.props.color||"#ffffff",t=this.props.backgroundColor||Zn().mainTint,n=this.props.fontSize||"14px",i=this.props.noBezel?[Ti().buttonNoBezel]:[Ti().button],r=this.props.tooltipTitle||"";this.props.isActive&&i.push(Ti().active);var a=O().apply(void 0,i),s=this.props.shortcut||"",l={fontSize:n,color:e,backgroundColor:t};return this.props.align&&(l.textAlign=this.props.align),o.createElement(ki,{tooltipName:r,shortcut:s,on:this.props.disabled},o.createElement("button",{style:l,className:a,onClick:this.props.onClick,disabled:this.props.disabled},this.props.icon&&o.createElement("div",{className:Ti().icon},this.props.icon),this.props.title&&o.createElement("span",{className:Ti().title},this.props.title),this.props.accessoryType&&o.createElement(Oi,{type:this.props.accessoryType})))}}]),r}(o.Component);function Pi(){return Pi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pi.apply(this,arguments)}const Bi=function(e){return o.createElement("svg",Pi({viewBox:"0 0 30 40",fill:"currentColor"},e),Ai||(Ai=o.createElement("path",{d:"M3 0h24v15H3z"})),Ci||(Ci=o.createElement("path",{stroke:"currentColor",strokeWidth:3,d:"M0 20h8M11 20h8M22 20h8"})),Zi||(Zi=o.createElement("path",{d:"M3 25h24v15H3z"})))};var Ni,Wi,Di=n(41931),_i=n.n(Di);function Li(){return Li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Li.apply(this,arguments)}const ji=function(e){return o.createElement("svg",Li({viewBox:"0 0 24 24"},e),Ni||(Ni=o.createElement("path",{d:"M3 18h12v-2H3v2zM3 6v2h18V6H3zm0 7h18v-2H3v2z"})),Wi||(Wi=o.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"})))};var zi,qi;function Hi(){return Hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Hi.apply(this,arguments)}const Mi=function(e){return o.createElement("svg",Hi({viewBox:"0 0 24 24",fill:"currentColor"},e),zi||(zi=o.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),qi||(qi=o.createElement("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"})))};var Vi=15;const Fi=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(){return(0,y.Z)(this,r),i.call(this)}return(0,E.Z)(r,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyHandler)}},{key:"render",value:function(){var e=null!=this.props.addPageBreak,t=null!=this.props.addLineBreak;return o.createElement(o.Fragment,null,o.createElement("div",{className:_i().header},o.createElement(Ri,{noBezel:!0,icon:o.createElement(ji,{width:Vi,height:Vi,style:{fill:"#fff"}}),backgroundColor:"transparent",onClick:this.props.addNote,disabled:!this.props.addNote,align:"center",tooltipTitle:"Note",shortcut:"n"}),o.createElement(Ri,{noBezel:!0,icon:o.createElement(Mi,{width:Vi,height:Vi,style:{fill:"#fff"}}),onClick:this.props.addQuestion,disabled:!this.props.addQuestion,align:"left",backgroundColor:"transparent",tooltipTitle:"Question",shortcut:"q"}),o.createElement(Ri,{noBezel:!0,color:"#fff",fontSize:"".concat(Vi,"px"),icon:"¶",onClick:this.props.addLineBreak,disabled:!t,align:"left",backgroundColor:"transparent",tooltipTitle:"LineBreak",shortcut:"l"}),o.createElement(Ri,{noBezel:!0,icon:o.createElement(Bi,{width:Vi,height:Vi,style:{fill:"#fff"}}),onClick:this.props.addPageBreak,disabled:!e,align:"left",backgroundColor:"transparent",tooltipTitle:"PageBreak",shortcut:"p"}),o.createElement(Ri,{onClick:this.props.editAnnotationHandler,backgroundColor:"transparent",noBezel:!0,icon:o.createElement(Mn,{width:Vi,height:Vi,style:{fill:"#fff"}}),tooltipTitle:"Edit",shortcut:"e"})))}}]),r}(o.Component);var Ui=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(e){var t;return(0,y.Z)(this,r),(t=i.call(this,e)).controls=null,t.arrow=null,t.arrowDs=null,t}return(0,E.Z)(r,[{key:"componentDidMount",value:function(){this.updatePosition()}},{key:"componentDidUpdate",value:function(){setTimeout(this.updatePosition.bind(this),0)}},{key:"updatePosition",value:function(){var e=this.getMeasurements();if(this.props.inline&&this.controls&&this.arrow&&e){var t=this.controls,n=t.offsetHeight,i=t.offsetWidth,r=this.arrow,o=e.bottomGap,a=o<0||o>n,s=e.top,l=e.viewPortWidth||0,c=e.left,u=c+e.width;if(r.style.display="none",this.props.selectedElementIds)for(var d=0,h=0,p=0;p<this.props.selectedElementIds.length;p++){var f=this.props.selectedElementIds[p],m=document.getElementById(f);if(m){var g=m.offsetLeft,v=g+m.offsetWidth;g<d?(h=v,m.offsetTop,m.offsetHeight,c=g,u=v):v>h&&(h=v),g<c&&(c=g),v>u&&(u=v),d=g}}var x=u-c,y=3,E=!1,b=0;if(!a&&o<n&&(E=!0),(l-(c+x)<i+50||l-e.left<i+50)&&(E=!0),E)r.className=Un().arrowLeft,y=c-i-r.offsetWidth<0?4:2;else{var T=i/2-x/2;c-T<0&&(b=Math.abs(c-T)),u+T>l&&(b=l-(u+T))}if(3===y){var w=0,S=0;this.arrow&&(this.arrow.className=Un().arrowTop,(S=i/2-this.arrow.offsetWidth/2-b)<0&&(S=0),this.arrow.style.left=S+"px",w=this.arrow.offsetHeight,this.arrow.style.top=0-w+"px"),t.style.top=s-e.height-15+"px",t.style.left=e.left+"px"}else if(E){r.className=Un().arrowRight;var I=r.offsetHeight,O=e.top-e.height-15;e.top+e.height+o-O<n&&(O=e.top+e.height+o-n),2===y?(r.style.left=i-2+"px",t.style.left=c-i/2-r.offsetWidth+"px"):(r.className=Un().arrowLeft,r.style.left=-r.offsetWidth+"px",t.style.left=c+x-i/2+r.offsetWidth+"px"),r.style.top=e.top-O+e.height/2-I/2+"px",t.style.top=O+"px"}else t.style.top=s+"px"}}},{key:"getMeasurements",value:function(){if(!this.props.selectedElementIds)return null;var e=this.props.selectedElementIds[this.props.selectedElementIds.length-1],t=document.getElementById(e),n=this.props.selectedElementIds[0],i=document.getElementById(n),r=this.props.splitTextRect,o=0;if(this.props.list&&this.props.list.Grid.state.scrollTop,this.props.pechaImageClass&&(o=document.getElementsByClassName(this.props.pechaImageClass)[0].offsetHeight),!i)return console.warn("no valid element found in getMeasurements, elementId: %s",this.props.selectedElementId),{top:0,textTop:0,rowTop:0,left:0,width:1,height:1,topGap:0,bottomGap:0,viewPortWidth:1};var a=i.offsetTop+o,s=i.offsetTop,l=i.offsetLeft,c=i.offsetWidth,u=i.offsetHeight,d=a,h=null,p=0,f=0;if(i&&r){var m=i.getBoundingClientRect();p=r.height-m.top}if(t&&r){var g=t.getBoundingClientRect();f=r.height+r.top-g.bottom,h=r.width}return{top:a,textTop:s,rowTop:d,left:l,width:c,height:u,topGap:p,bottomGap:f,viewPortWidth:h}}},{key:"render",value:function(){var e,t=this,n=this.props,i=[],r=[],a=null,s=null,l=n.user.isLoggedIn,c=!1;n.activeAnnotation&&(n.activeAnnotation.isType(Ft.DT.pageBreak)||n.activeAnnotation.isType(Ft.DT.lineBreak))&&(c=!0),n.annotationsData?(n.annotationsData.map((function(e){var t=Math.round(99*Math.random())+1,a=!1,s=!1;if(e.isTemporary?(a=!0,s=!0):n.temporaryAnnotation||e.annotation.uniqueId!=n.activeAnnotation.uniqueId||(s=!0),a){var c=o.createElement(Vn,{annotationData:e,key:e.annotation.uniqueId,isActive:s,saveAnnotationHandler:function(t){n.saveAnnotation(e.annotation,t)},cancelAnnotationHandler:function(){n.cancelEditAnnotation(e.annotation)},isLoggedIn:l,selectAnnotationHandler:function(){},editAnnotationHandler:function(){}});r.push(c)}else{var u=o.createElement(zn,{accuracy:t,annotationData:e,key:e.annotation.uniqueId,isActive:s,user:n.user,selectAnnotationHandler:function(){l&&!a&&n.didSelectAnnotation(e.annotation)},editAnnotationHandler:function(){l&&!a&&n.editAnnotation(e.annotation)},isLoggedIn:l});i.push(u)}}),this),n.user.isLoggedIn||(a=o.createElement("div",{className:Un().anonymousMessage},o.createElement(H.Z,{id:"annotations.loginMessage",values:{loginLink:o.createElement("a",{href:"/accounts/login/"},o.createElement(H.Z,{id:"annotations.loginLink"}))}})))):s=o.createElement("div",{className:Un().nothingSelected},"Nothing Selected");var u=null,d=!this.props.selectedWitness.isWorking,h=null,p=!this.props.selectedWitness.isWorking;if(l&&!this.props.selectedWitness.isWorking){var f=[],m=[];this.props.availableAnnotations&&(f=this.props.availableAnnotations.filter((function(e){return e.type===Ft.DT.pageBreak&&e.creatorWitness.id===t.props.selectedWitness.id})),m=this.props.availableAnnotations.filter((function(e){return e.type===Ft.DT.lineBreak&&e.creatorWitness.id===t.props.selectedWitness.id}))),f.length>0&&(u=o.createElement("div",{className:Un().breakButtons},o.createElement(Ri,{title:"Page Break",accessoryType:"DELETE",icon:o.createElement(Bi,{width:20,height:20}),onClick:function(){t.props.deleteAnnotation(f[0])},isActive:!0,backgroundColor:Zn().activeButton})),d=!1),m.length>0&&(h=o.createElement("div",{className:Un().breakButtons},o.createElement(Ri,{title:"Line Break",accessoryType:"DELETE",icon:"¶",onClick:function(){t.props.deleteAnnotation(m[0])},isActive:!0,backgroundColor:Zn().activeButton})),p=!1),d||(p=!1),p||(d=!1)}var g=null,v={};n.temporaryNotes&&n.temporaryNotes.length>0&&(g=n.temporaryNotes.map((function(e){var t="NOTE_"+e.uniqueId;return e.basedOn&&(v[e.basedOn.uniqueId]=e.uniqueId),o.createElement(ii,{note:e,key:t,saveNote:n.saveAnnotation,cancel:function(){return n.cancelEditAnnotation(e)}})})));var x=null;if(n.notes&&n.notes.length>0){var y=n.notes.filter((function(e){return!v.hasOwnProperty(e.uniqueId)}));x=y.map((function(e){var n="NOTE_"+e.uniqueId;return o.createElement(Ei,{note:e,key:n,delete:t.props.deleteAnnotation,edit:t.props.editNote})}))}var E=null,b={};n.temporaryQuestions&&n.temporaryQuestions.length>0&&n.questionQuote&&(E=n.temporaryQuestions.map((function(e){b[e.uniqueId]=e.uniqueId;var t="QUESTION_"+e.uniqueId;return o.createElement(fi,{question:e,questionQuote:n.questionQuote,defaultTitle:n.selectedWitness.text.name,key:t,saveQuestion:n.saveQuestion,cancel:function(){return n.cancelEditAnnotation(e)}})})));var T=[],w=!1;if(n.questions&&n.questions.length>0){for(var S=[],I=0;I<n.questions.length;I++){var k=n.questions[I];!b.hasOwnProperty(k.uniqueId)&&n.questionsData.hasOwnProperty(k.uniqueId)&&(n.questionsData[k.uniqueId].loading&&(w=!0),S=S.concat(n.questionsData[k.uniqueId].questions))}T=S.map((function(e,n){return e.annotationUniqueId,o.createElement(di,{question:e,key:"question_"+e.annotationUniqueId,delete:function(){return t.props.deleteAnnotation(t.props.questions[n])}})}))}var A=null;T.length>0&&(A=o.createElement("h3",{className:Un().sectionHeading},"Questions"));var C=null;w&&(C=o.createElement(vi,null));var Z=0===(null===(e=n.questions)||void 0===e?void 0:e.length)&&0===n.temporaryQuestions.length,R=[Un().annotationControls];n.inline&&R.push(Un().inline);var P=!0;(a||c)&&(P=!1);var B=qt.createPortal(o.createElement("div",{className:Un().annotationContent},a,s,!c&&i,u,h,g,x,A,E,C,T),document.getElementById("annotation-portal"));return o.createElement("div",{className:O().apply(void 0,R),style:{maxWidth:150},ref:function(e){return t.controls=e},id:"annotation-control"},P&&o.createElement(Fi,{addPageBreak:d?n.addPageBreak:null,addLineBreak:p?n.addLineBreak:null,addNote:l&&!g?function(){return n.addNote()}:null,addQuestion:Z?n.addQuestion:null,closeAnnotation:n.closeAnnotation,editAnnotationHandler:function(){var e=document.getElementById("editBtn");null==e||e.click()},userLoggedIn:l}),!c&&r,B,o.createElement("div",{className:Un().arrow,ref:function(e){return t.arrow=e}}))}}]),r}(o.Component);const Qi=Ui;var Ki=n(97762);function Gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(n),!0).forEach((function(t){(0,Ae.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $i=function(e,t,n,i){var r=[],o=t.filter((function(e){return e.isWorking||e.isBase})).map((function(e){return e.name}));if(e){for(var a={},s=function(t){var n=e[t],i=n.content+n.start+t;n.isTemporary?(a[-3]={name:n.getSourceName(),content:n.content,id:n.uniqueId,isTemporary:!0,annotation:n},o=o.filter((function(e){return e!==n.getSourceName()})),i=-3):a[i]?(a[i].name+=" "+B(n.getSourceName()),o=o.filter((function(e){return e!==n.getSourceName()}))):(a[i]={name:B(n.getSourceName()),content:n.content,id:n.uniqueId,userCreated:n.userCreated,annotation:n},o=o.filter((function(e){return e!==n.getSourceName()}))),!n.userCreated&&n.creatorWitness.isWorking?a[i].isWorking=!0:a[i].isWorking=!1},l=0;l<e.length;l++)s(l);o.unshift(n);var c=o;"བྱང་ཆུབ་སེམས་དཔའི་སྤྱོད་པ་ལ་འཇུག་པ་བཞུགས་སོ།"!==(null==i?void 0:i.name)&&(c=o.filter((function(e){return"Dominant"!==e}))),r=Object.keys(a).reduce((function(e,t){var n=a[t];return n.isWorking&&(n.name=c.reduce((function(e,t){return e+" "+B(t,";")}),"")),e.push(n),e}),[])}return r},Xi=(0,l.connect)((function(e,t){var n=v.PR(e),i=v.ZT(e),r=t.activeAnnotation,a=t.inline,s=v.zt(e);if(s||i&&(s=v.NW(e,i.id)),!r||!s)return{annotationsData:null,activeAnnotation:null,baseAnnotation:null,availableAnnotations:null,user:n,temporaryAnnotation:null,inline:null,firstSelectedSegment:null,splitTextRect:null,selectedWitness:null};var l=function(e,t,n,i,r,o){var a=v.$v(e,i.id,r,o,t);return a.length>0?a[0]:null}(e,Ft.DT.variant,0,s,r.start,r.length),u=function(e,t,n,i){var r=[];n&&t.naturalId===n.naturalId||r.push(t),n&&r.push(n);var o=e.getPositionOfAnnotation(t),a=(0,c.Z)(o,2),s=a[0],l=a[1];if(!s)return r;var u=s+l,d=[];if(t.isInsertion){var h=i["i"+s];h&&(d=d.concat(h));var p=i[String(s)];p&&(d=d.concat(p))}else{var f=i[String(s)],m=i[String(u)];f&&(d=f),m&&(d=d.concat(m))}for(var g=0;g<d.length;g++){var v=d[g];v.start===t.start&&v.length===t.length?n&&v.naturalId===n.naturalId||r.push(v):e.activeWitness.isWorking||v.type!==Ft.DT.pageBreak&&v.type!==Ft.DT.lineBreak||r.push(v)}return Be().uniqWith(r,(function(e,t){return e.id===t.id}))}(t.annotatedText,r,l,t.annotationPositions),d=u.filter((function(e){return e.type===Ft.DT.variant})),h=v.e6(e),p=v.i0(e,"annotation.workingEdition","Working"),f=$i(d,h,p,i),m=null;if(r.id==Zt.y9)m=r;else{var g=t.annotatedText.getPositionOfAnnotation(r),x=(0,c.Z)(g,2),y=x[0],E=x[1];if(null===y||null===E)f=null;else{m=t.annotatedText.getBaseAnnotation(y,E);var b=$i([m],h,p);f=[].concat((0,nt.Z)(b),(0,nt.Z)(f))}}f&&f.sort((function(e,t){return e.isTemporary?-1:t.isTemporary?1:e.userCreated?-1:t.userCreated?1:e.annotation.id&&t.annotation.id?e.annotation.id-t.annotation.id:1}));var T=u.filter((function(e){return e.type===Ft.DT.note})),w=v.$v(e,s.id,r.start,r.length,Ft.DT.note),S=u.filter((function(e){return e.type===Ft.DT.question})),I={};if(S.length>0)for(var O=0;O<S.length;O++){var k=S[O];I[k.uniqueId]={};var A=v.Ij(e,k);I[k.uniqueId].loading=A;var C=v.tI(e,k.uniqueId);I[k.uniqueId].questions=C}var Z=v.$v(e,s.id,r.start,r.length,Ft.DT.question),R=null;if(Z.length>0){var P=Z[0],B=t.annotatedText.getPositionOfAnnotation(P),N=(0,c.Z)(B,2),W=N[0],D=N[1];if(W){D||(D=W+1);var _=t.annotatedText.segmentedText.extractTextAroundPosition(W,D,["།"," "]),L=(0,c.Z)(_,3),j=L[0],z=L[1],q=L[2],H=document.location.href;R=o.createElement("blockquote",null,j,o.createElement("a",{href:H},z),q)}}var M=(0,v.bK)(e);return{annotationsData:f,activeAnnotation:r,baseAnnotation:m,availableAnnotations:u,user:n,temporaryAnnotation:l,inline:a,firstSelectedSegment:t.firstSelectedSegment,splitTextRect:t.splitTextRect,selectedWitness:s,notes:T,temporaryNotes:w,questions:S,temporaryQuestions:Z,questionsData:I,questionQuote:R,fontSize:M}}),null,(function(e,t,n){var i=t.dispatch;if(e.questions.length>0)for(var r=0;r<e.questions.length;r++){var o=e.questions[r],a=!0;e.questionsData.hasOwnProperty(o.uniqueId)&&e.questionsData[o.uniqueId].questions.length>0&&!e.questionsData[o.uniqueId].loading&&(a=!1),a&&i(new g.fkv(o))}var s=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var o=n.activeAnnotation,a=new Ft.ZP(null,o.witness,o.end+1,0,null,t,e.selectedWitness,e.user),s=v.gm(e.selectedWitness),l=[];l.push(g.iAb(a)),l.push(g.oaZ(a.uniqueId,s)),r?l.push(g.Enf(a)):l.push(g.Enf(null)),i((0,Q.$C)(l))}},l=function(t,n){if(t.isTemporary){var r=e.selectedWitness,o=v.gm(r),a=new Ft.ZP(t.id,t.witness,t.start,t.length,n,t.type,t.creatorWitness,e.user,t.uniqueId,t.basedOn);a.isSaved=t.isSaved;var s=[],l=null;l=a.isSaved?g.qTN:g.iAb,s.push(l(a)),s.push(g.uGD(t)),s.push(g.oaZ(a.uniqueId,o)),a.type===Ft.DT.variant&&s.push(g.Enf(a)),i((0,Q.$C)(s))}else console.warn("Tried to save a non-temporary annotation: %o",t)};return Yi(Yi(Yi({},e),n),{},{closeAnnotation:function(){if(e.activeAnnotation){var t=g.Enf(null);i(t)}},didSelectAnnotation:function(t){var n;n=t.id==Zt.y9?e.baseAnnotation:Be().find(e.availableAnnotations,(function(e){return e.uniqueId==t.uniqueId}))||null;var r=[],o=e.selectedWitness,a=v.gm(o);t.uniqueId!=e.activeAnnotation.uniqueId&&(o.isWorking?(t.id!=Zt.y9&&r.push(g.oaZ(n.uniqueId,a)),e.activeAnnotation.id!=Zt.y9&&r.push(g.OS1(e.activeAnnotation.uniqueId,a))):e.activeAnnotation.creatorWitness.id===o.id?(r.push(g.FFx(e.activeAnnotation.uniqueId,a)),n.id!==Zt.y9&&r.push(g.oaZ(n.uniqueId,a))):(n.creatorWitness.id===o.id?r.push(g.SDX(n.uniqueId,a)):n.id!==Zt.y9&&r.push(g.oaZ(n.uniqueId,a)),e.activeAnnotation.id!==Zt.y9&&r.push(g.OS1(e.activeAnnotation.uniqueId,a))),r.push(g.Enf(n)),i((0,Q.$C)(r)))},editAnnotation:function(t){var n=t.isWorkingAnnotation||t.userCreated||t.id===Zt.y9?null:t,r=new Ft.BN(n,t.witness,t.start,t.length,t.content,t.type,e.selectedWitness,e.user);t.userCreated&&(r.uniqueId=t.uniqueId,r.isSaved=t.isSaved),i(g.tBV(r,!0))},saveAnnotation:l,cancelEditAnnotation:function(e){if(e.isTemporary){var t=g.uGD(e);i(t)}else console.warn("Tried to call cancelEditAnnotation on a non-temporary annotation: %o",e)},deleteAnnotation:function(t){var n=e.selectedWitness,r=v.gm(n),o=[];o=t.userCreated?[g.aF7(t,n),g.OS1(t.uniqueId,r)]:[g.FFx(t.uniqueId,r)],e.activeAnnotation.uniqueId===t.uniqueId&&o.push(g.Enf(null)),i((0,Q.$C)(o))},addNote:function(){var t=n.activeAnnotation,r=new Ft.BN(null,t.witness,t.start,t.length,"",Ft.DT.note,e.selectedWitness,e.user);i(g.tBV(r,!0))},editNote:function(t){var n=new Ft.BN(t,t.witness,t.start,t.length,t.content,Ft.DT.note,e.selectedWitness,e.user);i(g.tBV(n,!0))},addPageBreak:s(Ft.DT.pageBreak),addLineBreak:s(Ft.DT.lineBreak),addQuestion:function(){var t=n.activeAnnotation,r=new Ft.BN(null,t.witness,t.start,t.length,"",Ft.DT.question,e.selectedWitness,e.user);i(g.tBV(r,!0))},saveQuestion:function(t,r,o){var a=n.annotatedText.getPositionOfAnnotation(t),s=(0,c.Z)(a,2),u=(s[0],s[1],Ki.renderToStaticMarkup(e.questionQuote)+o);l(t,o);var d=g.LxW(t,r,u);i(d)}})}))(Qi);const Ji=Xi,er=(0,o.memo)((0,h.ZP)((function(e){var t=[],n="",i="",r=[];return e.witnesses&&e.activeWitness&&(i=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id})),(t=e.witnesses.map((function(e){return e}))).sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),0===t.length?null:o.createElement(p.px,{onChange:function(n){Be().isEmpty(t)||e.onSelectedWitness(t[n.target.value])},className:et().selectVersion,value:i,label:"Version",classes:{root:et().selectEmpty,select:et().selectOptions}},t.map((function(t,i){var a;return t.id===e.activeWitness.id&&r.push(et().selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===(null===(a=e.user)||void 0===a?void 0:a.name)?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),o.createElement("option",{key:"versionSelect-".concat(i),value:i,className:et().selectOptions},n)})))})));function tr(e){var t=(0,o.useRef)(e.texts),n=(0,o.useState)(t.current),i=(0,c.Z)(n,2),r=i[0],a=i[1],s=(0,o.useState)(null),l=(0,c.Z)(s,2),u=l[0],d=l[1],h=e.onSelectedText,f=e.selectedText,m=(0,o.useState)(!1),g=(0,c.Z)(m,2),v=g[0],x=g[1],y=null==f?void 0:f.name,E=(0,o.useRef)(new it.t1({fixedHeight:!0,defaultHeight:40})),b=[ot().textlist];(0,o.useEffect)((function(){var e=[];""===u&&a((0,nt.Z)(t.current)),null!==u&&""!==u&&(e=t.current.filter((function(e){return e.name.includes(u)})),a((0,nt.Z)(e)))}),[u]);var T=o.useCallback((function(e){var t=e.key,n=e.index,i=e.style,a=e.parent,s=r[n];return o.createElement(it.Z8,{key:"optionvalues-".concat(t),cache:E.current,parent:a,columnIndex:0,rowIndex:n},o.createElement("div",{style:i,onClick:function(){x(!1),h(s)}},o.createElement(p.xu,{sx:{overflow:"hidden",textOverflow:"ellipsis",width:"13rem",paddingLeft:2,fontSize:{lg:12,md:11,sm:10,xs:10},color:"text.primary"},component:"div"},o.createElement(p.ZT,{noWrap:!0},B(s.name)))))}),[r]);return o.createElement(p.dy,{onClickAway:function(){return x(!1)}},o.createElement("div",{style:{position:"relative",marginLeft:10}},o.createElement(p.zx,{onClick:function(){x((function(e){return!e})),!1===v&&b.push(ot().open)},component:"div",variant:"outlined",sx:{textOverflow:"ellipsis",width:"10rem",height:"100%",color:"text.primary"}},o.createElement(p.ZT,{noWrap:!0},y||"select Text here")),o.createElement(p.Q5,{in:v},o.createElement(p.xu,{className:O()(b),sx:{position:"absolute",bgcolor:"heading.main",zIndex:1}},o.createElement(p.nv,{onChange:function(e){var t=e.target.value;d(t)},id:"standard-basic",label:"Search",variant:"standard",style:{width:"100%"}}),o.createElement(it.qj,null,(function(e){var t=e.width,n=e.height;return o.createElement(it.aV,{width:t,height:n,rowHeight:30,deferredMeasurementCache:E.current,rowCount:r.length,rowRenderer:T})}))))))}const nr=o.memo(tr);var ir=(0,l.connect)((function(e){return{texts:v.r6(e),selectedText:v.ZT(e)}}),(function(e){return{onSelectedText:function(t){e(g.kPP(t))}}}))(nr);const rr=o.memo(ir),or=function(e){var t=e.handleWindowSearch;return o.createElement(p.hU,{size:"small",variant:"text",onClick:t},o.createElement(f.Z,null))},ar=function(e){var t=(0,o.useState)(!1),n=(0,c.Z)(t,2),i=n[0],r=n[1],a=(0,xe.Z)("WindowOneFont","Tibetan"),s=(0,c.Z)(a,2),l=s[0],u=s[1];return(0,o.useEffect)((function(){document.body.style.setProperty("--tibetan-fonts",l)}),[]),o.createElement(p.dy,{onClickAway:function(){return r(!1)}},o.createElement(p.xu,{position:"relative"},o.createElement(p.hU,{onClick:function(){r((function(e){return!e}))},size:"small",variant:"text"},o.createElement(dt,{height:20,width:20,fill:"currentColor"})),o.createElement(p.Q5,{in:i},o.createElement(p.qy,{dense:!0,sx:{position:"absolute",right:0,zIndex:2,top:40,bgcolor:"heading.main"}},o.createElement(ft,{fontSize:e.textFontSize,onChange:e.onChangedFontSize}),o.createElement(p.iz,null),o.createElement(sr,{selectFont:function(e){u(e),document.body.style.setProperty("--tibetan-fonts","".concat(e)),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),1e3),r(!1)},selectedfont:l}),o.createElement(p.sN,{onClick:function(){return e.onExport()}},o.createElement(p.ZT,{variant:"subtitle2"},"Export Document"))))))};var sr=function(e){var t=e.selectFont,n=e.selectedfont,i=$.yn||[];return o.createElement(p.xu,{textAlign:"center"},o.createElement("span",null,"Font:")," ",o.createElement("select",{onChange:function(e){return t(e.target.value)},value:n},i.map((function(e,t){return o.createElement("option",{key:t+"-fontselect",value:e},e)}))))};const lr=function(e){var t=e.changeShowTableContent,n=e.showTableContent;return o.createElement(o.Fragment,null,o.createElement(p.hU,{onClick:function(){t(!n)}},n?o.createElement(yt.Z,null):o.createElement(ie.Z,null)))};var cr=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(e){return(0,y.Z)(this,r),i.call(this,e)}return(0,E.Z)(r,[{key:"render",value:function(){var e=this,t=this.props.string,n=t,i=this.props.stringClass||"";if(this.props.searchTerm){var r=this.props.searchTerm,a=(new(_())).splitGraphemes(t),s=t.indexOf(r),l=s+r.length,c=0,u="";if(s>-1)for(var d=0;d<a.length;d++){var h=a[d];c>=s&&c<l&&(u+=h),c+=h.length}u.length>0&&(n=j()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:i},n)}}]),r}(o.Component),ur=n(45871),dr=n.n(ur);const hr=function(e){var t=e.onSelectedSearchResult,n=e.searchValue,i=e.results,r=e.selectedText,a=(0,o.useRef)(),s=(0,o.useRef)(new it.t1({fixedWidth:!0,defaultHeight:100})),l=function(e){var a=e.key,l=e.index,c=e.parent,u=e.style,d=i[l];return o.createElement(it.Z8,{key:"listkeys2-".concat(a),cache:s.current,parent:c,columnIndex:0,rowIndex:l},o.createElement("div",{className:dr().searchListItem,onClick:function(){return t(r,d[0],n.length,r)},style:u},o.createElement(cr,{string:d[1],highlightClass:dr().highlight,searchTerm:n})))};return i?o.createElement(o.Fragment,null,o.createElement(it.qj,null,(function(e){var t=e.height,n=e.width;return o.createElement(it.aV,{ref:a,height:t,rowCount:null==i?void 0:i.length,rowHeight:s.current.rowHeight,deferredMeasurementCache:s.current,rowRenderer:l,width:n,overscanRowCount:1})}))):null};function pr(e){var t,n=(0,o.useState)(""),i=(0,c.Z)(n,2),r=i[0],a=i[1],s=(0,o.useState)(!1),l=(0,c.Z)(s,2),u=l[0],d=l[1],h=(0,o.useState)(!1),f=(0,c.Z)(h,2),m=f[0],g=f[1],v=(0,o.useRef)(),x=(0,o.useRef)(),y=o.useRef(Be().debounce((function(t){e.searchChanged(t)}),1e3)).current,E=(0,o.useCallback)((function(e){e.preventDefault(),y(r),g(!0)}),[r]),b=(0,o.useCallback)((function(){!1===u&&y(null),d(!u)}),[u]);(0,o.useEffect)((function(){!0===u&&x.current.focus(),!1===u&&y(null)}),[u]);var T=(0,o.useCallback)((function(){g(!1),y(null),a("")}),[]),w=(0,o.useMemo)((function(){return Be().isObject(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id)}),[e.searchResults,e.selectedText]),S=w?e.searchResults[e.selectedText.id].results:[];return o.createElement(p.Kq,{ref:v,direction:"column",spacing:1,sx:{paddingInline:{md:1,xs:0},paddingBlock:{md:1,xs:0},bgcolor:"heading.main",color:"text.primary"}},o.createElement(p.Kq,{direction:"row",spacing:1,justifyContent:"space-between"},o.createElement(p.xu,{sx:{display:"flex",gap:{md:2,sx:0},flexDirection:{md:"row",xs:"column"}}},o.createElement(rr,null),o.createElement(er,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),o.createElement(p.hE,{size:"small",sx:{position:"relative",display:"flex",height:"fit-content",alignItems:"center",justifyContent:"center",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1},"& hr":{mx:.5}},className:Xe().button_group_menu},o.createElement(p.iz,{orientation:"vertical",variant:"middle",flexItem:!0}),o.createElement(or,{handleWindowSearch:b}),o.createElement(ar,{textFontSize:e.textFontSize,onChangedFontSize:e.onChangedFontSize,onExport:e.onExport}),o.createElement(lr,{changeShowTableContent:e.changeShowTableContent,showTableContent:e.showTableContent}))),o.createElement(p.UO,{in:u,mountOnEnter:!0,unmountOnExit:!0},o.createElement("form",{onSubmit:E},o.createElement(p.Kq,{direction:"row",spacing:2,position:"relative"},o.createElement(p.nv,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:x,value:r,onChange:function(e){return a(e.target.value)}}),o.createElement(p.zx,{variant:"outlined",size:"small",onClick:E,style:{height:25}},"Search"),e.searchResults&&m&&o.createElement(p.xu,{sx:(t={position:"absolute",top:35,right:0,zIndex:1,bgcolor:"heading.main",height:350,width:350,boxShadow:3,overflowX:"hidden"},(0,Ae.Z)(t,"boxShadow",3),(0,Ae.Z)(t,"display",0===S.length?"none":"block"),t)},w&&S.length>0&&o.createElement(hr,{onSelectedSearchResult:e.onSelectedSearchResult,searchValue:e.searchValue,results:S,selectedText:e.selectedText}),o.createElement(p.hU,{"aria-label":"closeButton",onClick:T,size:"small",sx:{right:15,top:0,position:"absolute"}},o.createElement(re.Z,{fontSize:"inherit"})))))))}const fr=o.memo(pr);function mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(n),!0).forEach((function(t){(0,Ae.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vr=(0,l.connect)((function(e){var t,n,i=v.ZT(e),r=v.an(e),o=[],a=!1;if(i){o=v.hX(e,i.id);var s=v.R8(e,i.id);s?(t=v.mh(e,s),a=v.dp(e,s)):t=v.NW(e,i.id)}if(r){var l=v.y6(e,r.id);n=l?v.vp(e,l):v.S9(e,r.id)}var c=v.bK(e),u=v.SI(e);return{witnesses:o,selectedText:i,selectedText2:r,selectedWitness:t,selectedWitness2:n,textFontSize:c,exportingWitness:a,searchValue:u,showTableContent:v.Q(e),searchResults:v.BP(e,u)}}),null,(function(e,t,n){var i,r=t.dispatch,o=e.selectedText;return gr(gr(gr({},n),e),{},(i={navigationButtonClicked:function(){t.dispatch(g.DaN(!e.textListIsVisible))},onSelectedWitness:function(e){r(g.ygg(null==o?void 0:o.id,null==e?void 0:e.id))},onChangedFontSize:function(e){r(g.$4v(e))},onChangeWindowOpen:function(e){r(g.rE3(e))},onExport:function(){r(g.mUt(e.selectedWitness.id,"docx"))}},(0,Ae.Z)(i,"navigationButtonClicked",(function(){r(g.DaN(!e.textListIsVisible))})),(0,Ae.Z)(i,"changeIsAnnotating",(function(e){if(r(g.zBT(e)),!1===e){var t=g.Enf(null);r(t),r(g.Enf(null))}})),(0,Ae.Z)(i,"searchChanged",(function(e){r(g.QuB(e))})),(0,Ae.Z)(i,"changeShowTableContent",(function(e){r(g.G0K(e))})),(0,Ae.Z)(i,"onSelectedSearchResult",(function(e,t,n,i){i&&i.id===e.id?r(g.soO(e.id,t,n)):r(batchActions([g.soO(e.id,t,n),g.kPP(e)]))})),i))}))(fr);const xr=vr;var yr=n(58628),Er=n.n(yr);const br=(0,l.connect)((function(e){var t=v.Al(e);return{alignmentData:v.hp(e),selectedMedia:t,text:function(t){return v.Jv(e,t)},getWitness:function(t){return v.mh(e,t)}}}),(function(e){return{changeMediaSelection:function(t){return e(g.PS_(t))},onChangeWindowOpen:function(t){e(g.rE3(t))},onSelectedSearchResult:function(t,n,i){e(g.soO(t,n,i))},selectSecondWindowText:function(t){e(g.rE3(!0)),e(g.M1d(t))}}}))((function(e){e.getWitness;var t=e.alignmentData,n=e.text,i=e.selectSecondWindowText,r=(null==t?void 0:t.alignments.text)||[];return r.length?o.createElement(p.xu,null,o.createElement(p.ZT,{variant:"h6",gutterBottom:!0,component:"div"},"Commentary"),r.map((function(e,t){return o.createElement("div",{key:"commentary-".concat(t),style:{cursor:"pointer"},onClick:function(){return function(e){i(e)}(n(2))}},n(2).name,e.target)}))):null}));var Tr=(0,Wt.ZP)("div")((function(e){var t=e.theme;return(0,Ae.Z)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:(0,Dt.Fq)(t.palette.common.white,.15),"&:hover":{backgroundColor:(0,Dt.Fq)(t.palette.common.white,.25)},marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{marginLeft:t.spacing(1),width:"auto"})})),wr=(0,Wt.ZP)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),Sr=(0,Wt.ZP)(p.MA)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":(0,Ae.Z)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("sm"),{width:"0",cursor:"pointer","&:focus":{width:"20ch"}})}}));const Ir=o.memo((0,l.connect)((function(e){return{}}),(function(e){return{changeScrollToId:function(t){return e(g.VZO(t))}}}))((function(e){var t=[{Id:1,Title:"chapter 1",segment_id:1},{Id:2,Title:"chapter 2",segment_id:400},{Id:3,Title:"chapter 3",segment_id:3e3}];return t.length,o.createElement(p.xu,{className:Er().TableContent,sx:{bgcolor:"heading.main",color:"text.primary",width:"100%",height:"100%",paddingInline:2}},o.createElement(br,null),o.createElement(p.o8,{sx:{justifyContent:"space-between",paddingLeft:"0 !important",margin:0}},o.createElement(p.ZT,{textTransform:"uppercase",component:"h6"},"Table Of Content"),o.createElement(Tr,null,o.createElement(wr,null,o.createElement(f.Z,null)),o.createElement(Sr,{placeholder:"Search…",inputProps:{"aria-label":"search"}}))),o.createElement(p.xu,null,t.map((function(t,n){return o.createElement(p.xu,{key:"TableContent-"+n,sx:{cursor:"pointer",width:"fit-content","&:hover":{textDecoration:"underline"}},onClick:function(){return e.changeScrollToId({from:"table",id:t.segment_id})}},t.Title)}))))})));var Or=!0;const kr=(0,l.connect)((function(e){return{activeAnnotation:(0,v.Z9)(e)}}))((function(e){var t=e.activeAnnotation,n=o.useRef(null),i=o.useCallback((function(e){var i=document.getElementById("s_".concat(null==t?void 0:t.start));if(i){var r=i.getBoundingClientRect(),o=Math.floor(r.top-40);n.current.style.top=o+"px"}}),[null==t?void 0:t.start]);return o.useEffect((function(){var e=document.getElementById("scroller");if(!Or){e&&e.addEventListener("scroll",i);var r=null==t?void 0:t.start,o=document.getElementById("s_".concat(r));if(o){var a=o.getBoundingClientRect(),s=Math.floor(a.top-40);n.current.style.top=s+"px"}}return Or=!1,function(){if(!e)return null;e.removeEventListener("scroll",i)}}),[null==t?void 0:t.start]),o.createElement("div",{id:"annotation-portal",ref:n,style:{position:"absolute",left:"97%",zIndex:10,maxWidth:300,width:"max-content",transition:"all 0.1s linear 0s"}})}));var Ar=n(62557);const Cr=function(e){var t=e.children,n=e.cl;return(0,o.useEffect)((function(){var e=document.querySelector("."+n);(0,Ar.Z)(e,{margin:50,background:"rgba(0,0,0,0.4)",scrollOffset:200})}),[]),o.createElement(o.Fragment,null,t)};function Zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(n),!0).forEach((function(t){(0,Ae.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pr(e){return"s_"+e.start}function Br(e){return"ds_"+e.start}function Nr(e){return"i_"+e.start}function Wr(e){return"p_"+(e.end+1)}function Dr(e){return"l_"+(e.end+1)}var _r=String.fromCharCode(182),Lr=Ki.renderToStaticMarkup(o.createElement(Bi,null)),jr=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(e){var t;return(0,y.Z)(this,r),(t=i.call(this,e)).textAlignmentById=[],t.state={segmentedText:e.segmentedText},t.textAlignmentById=t.props.textAlignmentById,t._renderedSegments=null,t._renderedHtml=null,t.rangeSelect=[],t.theme=e.theme,t}return(0,E.Z)(r,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return Rr(Rr({},t),{},{segmentedText:e.segmentedText})}))}},{key:"annotationsForSegment",value:function(e){var t=[],n=this.props.annotationPositions[String(e.start)];n&&(t=n);var i=this.props.annotationPositions[Zt.Rs+e.start]||[],r=this.props.annotationPositions[Zt.eH+e.start]||[],o=this.props.annotationPositions[Zt.Iv+(e.end+1)]||[],a=this.props.annotationPositions[Zt.FQ+(e.end+1)]||[];return t.concat(i,r,o,a)}},{key:"segmentsContainSegment",value:function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.start===t.start&&i.text===t.text)return!0}return!1}},{key:"selectedElement",value:function(e){if("DIV"!==e.tagName){var t=[],n=[],i=document.getSelection(),r=parseInt(e.id.replace("s_",""));if(this.props.changeSyncIdOnClick(r),null!=e&&e.id.includes("s_")&&this.props.condition){this.props.changeScrollToId({id:null,from:null});var o=parseInt(e.id.replace("s_","")),a=(0,Pe.find)(this.textAlignmentById,(function(e){return o>=e.start&&o<e.end}));if(a){for(var s=a.start;s<a.end;s++)t.push(s);for(var l=a.TStart;l<a.TEnd;l++)n.push(l);this.props.changeSelectedRange({source:t,target:n})}}i&&"Range"===i.type||(this.props.selectedSegmentId(e.id),e.id||this.props.changeSelectedRange({source:[],target:[]}))}else this.props.selectedSegmentId("")}},{key:"generateHtml",value:function(e,t){var n=t.segmentedText.segments,i=Mt().textLine,r='<p class="'+i+'">';if(0===n.length)return{__html:r};var o=Mt().insertion,a=n[n.length-1].end+1;if(e.annotationPositions[Zt.Rs+a]){var s=new Vt.Z(a,"");n.push(s)}if(e.annotationPositions[Zt.Iv+a]){var l=new Vt.Z(a,"");n.push(l)}if(e.annotationPositions[Zt.FQ+a]){var u=new Vt.Z(a,"");n.push(u)}for(var d=e.activeAnnotations||{},h=Mt().highlight,p=Mt().activeHighlight,f=null,m={},g=0;g<n.length;g++){var v=n[g],x="",y=[],E=this.annotationsForSegment(v),b=null,T=!1,w=!1,S=!1,I=!1,k=null;if(E){for(var A=[],C=[],Z=[],R=[],P=0,B=E.length;P<B;P++){var N=E[P];if(N.isInsertion)if(N.uniqueId in d)A.push(N);else{var W=N.start;m.hasOwnProperty(W)||(C.push(N),m[W]=N)}else N.isDeletion?N.uniqueId in d&&R.push(N):N.type!==Ft.DT.pageBreak||e.activeWitness.isWorking?N.type!==Ft.DT.lineBreak||e.activeWitness.isWorking?Z.push(N):I=N:k=N}if(0===A.length&&C.length>0){var D=C[0],_=Nr(v),L=o;e.activeAnnotation&&e.activeAnnotation.isInsertion&&e.activeAnnotation.start===D.start&&(L+=" "+Mt().selectedAnnotation),r+="<span id="+_+" key="+_+' class="'+L+'">'+D.content+"</span>"}if(R.length>0){var j=R[0];b=e.getBaseAnnotation(j).content,e.activeAnnotation&&e.activeAnnotation.isDeletion&&e.activeAnnotation.start===j.start&&e.activeAnnotation.length===j.length&&0===v.length&&(T=!0)}k&&e.activeAnnotation&&e.activeAnnotation.uniqueId===k.uniqueId&&(w=!0),I&&e.activeAnnotation&&e.activeAnnotation.uniqueId===I.uniqueId&&(S=!0),(Z.length>0||A.length>0)&&(Z.some((function(e){return"P"===e.type}))&&y.push(Mt().P_annotation),Z.some((function(e){return"Q"===e.type}))&&(Z.filter((function(e){return"Q"===e.type})).length>1&&y.push(Mt().Q_annotation_double),y.push(Mt().Q_annotation)),Z.some((function(e){return"N"===e.type}))&&y.push(Mt().N_annotation),Z.some((function(e){return"V"===e.type}))&&y.push(Mt().V_annotation))}if(v.start===a)break;var z=null;if(0===v.length?(z=Br(v),y.push(Mt().removedByAnnotation),b&&(v=new Vt.Z(v.start,b))):z=Pr(v),(this.segmentsContainSegment(e.selectedAnnotatedSegments,v)||T)&&y.push(Mt().selectedAnnotation),e.selectedSourceRange.includes(v.start)&&e.condition){var q="light"===e.theme.palette.mode?Mt().selectedRangelight:Mt().selectedRangeDark;y.push(q)}e.selectedMedia.isVideoVisible&&e.isPanelLinked&&e.MediaInterval.source_segment&&e.MediaInterval.source_segment.start<v.start&&e.MediaInterval.source_segment.end>v.start&&y.push(Mt().mediaInterval),y.length>0&&(x='class="'+O().apply(void 0,y)+'"');var H=v.text;if(e.searchStringPositions){var M=v.start,V=M;H="";var F=h;e.selectedSearchResult&&e.selectedSearchResult.start<=V&&e.selectedSearchResult.start+e.selectedSearchResult.length>V&&(F=p);for(var U=0;U<v.text.length;U++){var Q=v.text.charAt(U);if(V=M+U,f){var K=f,G=(0,c.Z)(K,2);G[0],0===U&&(H+='<span class="'+F+'">'),V===G[1]?(H+=Q+"</span>",f=null):U===v.text.length-1?H+=Q+"</span>":H+=Q}else if(V in e.searchStringPositions){var Y=(0,c.Z)(e.searchStringPositions[V],2),$=Y[0],X=Y[1];H+='<span class="'+F+'">'+Q,U!==v.text.length-1&&V!==X||(H+="</span>"),V<X&&(f=[$,X])}else H+=Q}}if(r+="<span id="+z+" key="+z+" "+x+">"+H+"</span>",k){var J=[Mt().pageBreak];w&&J.push(Mt().selectedAnnotation);var ee=' class="'+J.join(" ")+'" ';r+="<span id="+Wr(v)+" key="+Wr(v)+ee+">"+Lr+"</span>"}if(I){var te=[Mt().lineBreak];S&&te.push(Mt().selectedAnnotation);var ne=' class="'+te.join(" ")+'" ';r+="<span id="+Dr(v)+" key="+Dr(v)+ne+">"+_r+"</span>",r+='</p><p class="'+i+'">'}}return this._renderedSegments=n,{__html:r+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){this.textAlignmentById=this.props.textAlignmentById;var n=this.generateHtml(e,t);return this.props.fontSize!==e.fontSize||(!this._renderedHtml||n.__html!==this._renderedHtml.__html)&&(this._renderedHtml=n,!0)}},{key:"render",value:function(){var e=this,t=[Mt().text];0===this.props.row&&t.push(Mt().textFirstRow);var n=this._renderedHtml?this._renderedHtml:this.generateHtml(this.props,this.state);return this._renderedHtml||(this._renderedHtml=n),o.createElement("div",{className:Mt().textContainer},o.createElement("div",{className:O().apply(void 0,t),id:"text1",dangerouslySetInnerHTML:n,style:{fontSize:this.props.fontSize,fontFamily:"var(--tibetan-fonts)"},onClick:function(t){e.selectedElement(t.target)}}))}}]),r}(o.Component);const zr=(0,Ut.Z)(jr);function qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(n),!0).forEach((function(t){(0,Ae.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}parseInt(Un().inlineWidth);var Mr={},Vr=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(e){var t;return(0,y.Z)(this,r),(t=i.call(this,e)).textAlignmentById=[],t.list=null,t.splitText=null,t.cache=new A.t1({fixedWidth:!0}),t.splitTextRef=o.createRef(null),t.rowRenderer=t.rowRenderer.bind((0,b.Z)(t)),t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.isPanelLinked=e.isPanelLinked,t.activeSelection=null,t.selectedNodes=null,t._mouseDown=!1,t._activeWitness=null,t._didSetInitialScrollPosition=!1,t._modifyingSelection=!1,t.imageHeight=null,t.imageWidth=null,t.calculatedImageHeight=null,t.processProps(e),t.changeScrollToId=e.changeScrollToId,t.changeSyncIdOnClick=e.changeSyncIdOnClick,t.closeAnnotation=e.closeAnnotation,t.scrollJump=e.scrollJump,t.textAlignmentById=[],t.scrollEvent=t.scrollEvent.bind((0,b.Z)(t)),t.selectedWindow=e.selectedWindow,t.condition=e.condition,t}return(0,E.Z)(r,[{key:"scrollEvent",value:function(e){if(2===this.selectedWindow)return null;if(1===this.selectedWindow){var t=[];this.textAlignmentById.map((function(e){var n=document.getElementById("s_"+e.start);n&&n.getBoundingClientRect().top>102&&t.push({id:e.id,start:e.start,target:e.TStart})})),Be().isEmpty(t)&&Be().isEmpty([])||1===this.selectedWindow&&this.debouncedScroll(t)}}},{key:"updateList",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var i=0;i<t.length;i++){var r=t[i];this.cache.clear(r)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){if(this._mouseDown=!1,this.activeSelection){var e=this.processSelection(this.activeSelection);e||(e=[]),this.props.didSelectSegmentIds(e),this.activeSelection=null}}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),this._mouseDown||this.mouseUp())}},{key:"processSelection",value:function(e){if(0===e.rangeCount||e.isCollapsed||"Caret"===e.type)return this.selectedNodes=null,null;var t=e.getRangeAt(0),n=t.startContainer,i=this.getNodeSegmentSpan(n);if(!i||!i.parentNode)return null;var r=this.getRangeNodes(t,i.parentNode);if(r.length>0){var o=r[0];t.startOffset===o.textContent.length&&r.shift()}var a=t.endContainer,s=this.getNodeSegmentSpan(a);if(!s||!s.parentNode)return null;s&&i.parentNode!==s.parentNode?r=r.concat(this.getRangeNodes(t,s.parentNode)):0===t.endOffset&&r.pop(),this.selectedNodes=r;var l=[];return r.reduce((function(e,t){return t instanceof Element&&e.push(t.id),e}),l),l}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,i=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&i.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"getRangeNodes",value:function(e,t){for(var n=[],i=0,r=t.childNodes.length;i<r;i++){var o=t.childNodes[i];e.intersectsNode(o)&&n.push(o)}return n}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,i=null,r=null,o=null,a=null,s=[],l=0;if(e.activeAnnotation){var u=e.activeAnnotation,d=e.splitText.annotatedText.getPositionOfAnnotation(u);if(null===(l=(0,c.Z)(d,1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;u.type===Ft.DT.pageBreak&&(l-=1),u.type===Ft.DT.lineBreak&&(l-=1),u.length,u.length,n=e.splitText.getTextIndexOfPosition(l),o=t.getBoundingClientRect()}var h=[];if(e.selectedAnnotatedSegments&&e.selectedAnnotatedSegments.length>0){h=e.selectedAnnotatedSegments;for(var p=0;p<h.length;p++){var f=h[p];if(null===i&&f instanceof Vt.Z){i=f;break}}i&&(0===i.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(r=Nr(i),a=Nr):(r=Pr(i),a=Pr))}else if(e.activeAnnotation)if(e.activeAnnotation.isDeletion){var m=new Vt.Z(l,"");r=Br(m),a=Br,h=[i=m]}else if(e.activeAnnotation.isInsertion){var g=e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),v=(0,c.Z)(g,1)[0];if(v){var x=new Vt.Z(v,"");r=Nr(x),a=Nr,h=[i=x]}}else if(e.activeAnnotation.type===Ft.DT.pageBreak){var y=new Vt.Z(l+1,"");i=y,h=[y],s=[r=Wr(new Vt.Z(l,""))]}else if(e.activeAnnotation.type===Ft.DT.lineBreak){var E=new Vt.Z(l+1,"");i=E,h=[E],s=[r=Dr(new Vt.Z(l,""))]}if(a)for(var b=0;b<h.length;b++){var T=h[b];if(T instanceof Vt.Z){var w=a(T);s.push(w)}}return null!=n&&i&&r&&o?{selectedTextIndex:n,firstSelectedSegment:i,selectedElementId:r,splitTextRect:o,selectedElementIds:s}:null}},{key:"shouldResetListCache",value:function(e,t){var n=!1;return(e.showImages!==t.showImages||this.pageBreaksChanged(e,t))&&(n=!0),n}},{key:"pageBreaksChanged",value:function(e,t){var n=e.splitText.getTextsFinalPositions(),i=t.splitText.getTextsFinalPositions();return n.length!==i.length||JSON.stringify(n)!==JSON.stringify(i)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,i=t.activeAnnotation,r=!1;return n&&n.isType(Ft.DT.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(r=!0),i&&i.isType(Ft.DT.lineBreak)&&e.activeAnnotations&&!e.activeAnnotations.hasOwnProperty(i.uniqueId)&&(r=!0),r}},{key:"selectedListRow",value:function(e){var t=null;return e.activeAnnotation&&(t=e.splitText.getTextIndexOfPosition(e.activeAnnotation.start)),t}},{key:"processProps",value:function(e){var t=this,n=!1;(!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(n=!0,this._didSetInitialScrollPosition=!1),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),this._filteredSelectedAnnotatedSegments=e.selectedAnnotatedSegments.reduce((function(e,t){return t instanceof Vt.Z&&e.push(t),e}),[]);var i=this.getControlsMeasurements(e);if(i&&(this.selectedTextIndex=i.selectedTextIndex,this.firstSelectedSegment=i.firstSelectedSegment,this.splitTextRect=i.splitTextRect,this.selectedElementId=i.selectedElementId,this.selectedElementIds=i.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var r=null,o=this.selectedListRow(this.props),a=this.selectedListRow(e);if(o&&a){r=[];for(var s=o>a?a:o,l=this.props.splitText.texts.length;s<l;s++)r.push(s)}this.updateList(!0,r)}else if(this.lineBreaksChanges(this.props,e)){var c=this.selectedListRow(e);c||(c=this.selectedListRow(this.props));var u=this.props.splitText.texts,d=[];if(null!==c){for(var h=c,p=u.length;h<p;h++)d.push(h);this.updateList(!0,d)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"annotationsInSameLocation",value:function(e,t){return e.start===t.start&&e.length===t.length}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"scrollToIndex",value:function(e){var t=this.list,n=this.props.splitText.getTextIndexOfPosition(e);setTimeout((function(){t.scrollToRow(n),setTimeout((function(){t.scrollToPosition(t.props.scrollTop-300)}),0)}),100)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=Be().throttle((function(){e.calculatedImageHeight=null,e.updateList()}),600).bind(this),this.processProps(this.props),this.debouncedScroll=Be().debounce((function(t){var n;t.length&&e.changeScrollToId({id:null===(n=t[0])||void 0===n?void 0:n.start,from:1})}),1e3),window.addEventListener("resize",this.resizeHandler),this.selectionHandler=Be().debounce((function(t){e.handleSelection(t)}),200).bind(this),setTimeout((function(){window.dispatchEvent(new Event("resize"))}),2e3),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.Alignment=this.props.textAlignment,this.condition=this.props.condition,this.scrollToId=this.props.scrollToId,this.props.isAnnotating||(this.activeSelection=null),this.textAlignmentById=this.props.textAlignmentById,this.selectedWindow=this.props.selectedWindow,this.targetId=this.props.syncIdOnClick,this.selectedNodes&&this.selectedNodes.length>0){var n=this.selectedNodes,i=this.props.selectedAnnotatedSegments;setTimeout((function(){var e=document.createRange(),r=n[0],o=n[n.length-1],a=i[i.length-1];if(a instanceof Vt.Z){var s=document.getElementById(Pr(a));s&&(o=s)}if(r instanceof Element&&o instanceof Element&&(r=document.getElementById(r.id),o=document.getElementById(o.id),r&&o)){e.setStart(r,0),e.setEnd(o,o.childNodes.length);var l=document.getSelection();l&&(t._modifyingSelection=!0,l.removeAllRanges(),l.addRange(e),t.selectedNodes=null)}}),0)}if(!this._didSetInitialScrollPosition&&this.list){var r=this.list;if(this.props.activeAnnotation||this.props.selectedSearchResult){var o=this.getSelectedTextIndex();setTimeout((function(){r.scrollToRow(o),setTimeout((function(){r.scrollToPosition(r.props.scrollTop-300)}),0)}),100)}this._didSetInitialScrollPosition=!0}if("table"==this.scrollToId.from&&this.scrollToId.id){var a=this.scrollToId.id;this.scrollToIndex(a)}if("video"==this.scrollToId.from&&this.scrollToId.id){var s=this.scrollToId.id;this.scrollToIndex(s)}if(2===this.selectedWindow&&2==this.scrollToId.from&&this.condition&&null!==this.scrollToId.id&&(this.textAlignmentById=this.props.textAlignmentById||[],this.Alignment)){var l=this.textAlignmentById.find((function(e){return e.TStart===t.scrollToId.id})),c=null==l?void 0:l.start;null!==c&&this.scrollToIndex(c)}if(this.targetId&&"ua"===this.scrollToId.from&&2===this.selectedWindow&&"ua"===this.scrollToId.id&&this.condition){var u,d=this.Alignment.alignment.find((function(e){return t.targetId>=e.target_segment.start&&t.targetId<e.target_segment.end})),h=null==d||null===(u=d.source_segment)||void 0===u?void 0:u.start;this.scrollToIndex(h)}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler)}},{key:"calculateImageHeight",value:function(){var e=null;if(this.imageHeight&&this.imageWidth){var t=this.imageWidth/this.imageHeight,n=Jt().pechaImage,i=document.getElementsByClassName(n);i.length>0&&(e=i[0].offsetWidth/t)}return e}},{key:"getSelectedTextIndex",value:function(){var e=0,t=null;if(this.props.activeAnnotation){var n=this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation);t=(0,c.Z)(n,1)[0]}else if(this.props.selectedSearchResult){var i=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start);i instanceof Vt.Z?t=i.start:"number"==typeof i&&(t=i)}return t&&(e=this.props.splitText.getTextIndexOfPosition(t)),e}},{key:"getBaseAnnotation",value:function(e){var t=this.props.splitText.annotatedText.getPositionOfAnnotation(e),n=(0,c.Z)(t,1)[0];return null===n&&(n=0),this.props.splitText.annotatedText.getBaseAnnotation(n,e.content.length)}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,i=this.cache,r=t.selectedWitness?t.selectedWitness.id:0;return o.createElement("div",{className:Jt().splitText,ref:function(t){return e.splitText=t},key:r},o.createElement(k.q,{disableWidth:!0},(function(r){var a=r.height;return o.createElement(C.aV,{id:"scroller",width:1,ref:function(t){return e.list=t},height:a,rowCount:t.splitText.texts.length,rowHeight:i.rowHeight,rowRenderer:n,overscanRowCount:3,deferredMeasurementCache:i,onScroll:e.scrollEvent,scrollToAlignment:"start",containerStyle:{width:"100%",maxWidth:"100%"},style:{width:"100%",paddingTop:30,paddingInline:50}})})))}},{key:"getImageUrl",value:function(e){if(!this.props.selectedWitness||!this.props.selectedWitness.properties)return"";var t=this.props.selectedWitness.properties,n=t.bdrcimg_pre,i=t.bdrcimg_number,r=t.bdrcimg_suffix;return"//iiif.bdrc.io/"+n+(Number(i)+e)+"."+r+"/full/full/0/default.jpg"}},{key:"getStringPositions",value:function(e,t,n){var i=this.props.splitText.annotatedText.getUniqueId();if(Mr.hasOwnProperty(i)||(Mr=(0,Ae.Z)({},i,{})),Mr[i].hasOwnProperty(t)||(Mr[i]=(0,Ae.Z)({},t,{})),Mr[i][t].hasOwnProperty(n))return Mr[i][t][n];for(var r=new(_()),o=e.getText(),a=e.segments[0],s=null==a?void 0:a.start,l=[],c=o.indexOf(t);-1!==c;)l.push(c),c=o.indexOf(t,c+1);var u={};if(l.length>0)for(var d=r.splitGraphemes(o),h=0,p=null,f=0;f<d.length;f++){var m=d[f],g=h+(m.length-1);null!==p?g>=p+(t.length-1)&&(u[p+s]=[p+s,g+s],p=null):-1!==l.indexOf(h)?t.length===m.length?u[h+s]=[h+s,g+s]:t.length>m.length&&(p=h):p=null,h+=m.length}return Mr[i][t][n]=u,u}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,i=e.parent,r=e.style,a=this.props,s=this.cache,l=this,c="";a.selectedWitness&&a.selectedWitness.properties&&a.selectedWitness.properties.hasOwnProperty("bdrcimg_pre")&&(c=this.getImageUrl(n));var u={},d=this.props.searchValue;d&&d.length>0&&a.splitText&&(u=this.getStringPositions(a.splitText.texts[n],d,n));var h=a.showImages&&c?Jt().pechaImage:null,p=(r.height,{});a.showImages&&h&&this.calculatedImageHeight&&(p.height=this.calculatedImageHeight+"px");var f=Hr(Hr({},r),{},{height:r.height,cursor:this.props.isAnnotating?"text":"pointer"});return o.createElement(A.Z8,{columnIndex:0,parent:i,rowIndex:n,cache:s,key:t},o.createElement("div",{key:t,style:f,className:Jt().splitTextRow,ref:this.splitTextRef,id:"index_".concat(n)},o.createElement("div",{className:Jt().splitTextRowContent},a.showImages&&c&&o.createElement("div",{className:h,style:p},o.createElement(Cr,{cl:"zoomableImage-".concat(n)},o.createElement("img",{alt:"Text related Image",className:O()([Jt().image,"zoomableImage-".concat(n)]),src:c,width:"100%",height:"100%",loading:"lazy",decoding:"async",onLoad:function(e){e.target&&null===l.imageWidth&&(l.imageWidth=e.target.naturalWidth,l.imageHeight=e.target.naturalHeight,l.calculatedImageHeight=null,window.setTimeout(l.updateList.bind(l),0))}}))),o.createElement(zr,{segmentedText:a.splitText.texts[n],annotations:a.annotations,activeAnnotations:a.activeAnnotations,activeAnnotation:a.activeAnnotation,row:n,selectedSegmentId:a.selectedSegmentId,annotationPositions:a.annotationPositions,selectedAnnotatedSegments:this._filteredSelectedAnnotatedSegments,getBaseAnnotation:this.getBaseAnnotation.bind(this),activeWitness:this.props.selectedWitness,searchValue:d,selectedSearchResult:this.props.selectedSearchResult,searchStringPositions:u,fontSize:a.fontSize,changeSyncIdOnClick:this.props.changeSyncIdOnClick,changeScrollToId:this.props.changeScrollToId,textAlignmentById:this.props.textAlignmentById,selectedSourceRange:this.props.selectedSourceRange,selectedTargetRange:this.props.selectedTargetRange,changeSelectedRange:this.props.changeSelectedRange,condition:this.condition,isPanelLinked:this.props.isPanelLinked,selectedMedia:this.props.selectedMedia,MediaInterval:this.props.MediaInterval})),this.props.isAnnotating&&this.selectedTextIndex===n&&this.props.activeAnnotation&&o.createElement(Ji,{annotationPositions:a.annotationPositions,annotatedText:a.splitText.annotatedText,activeAnnotation:a.activeAnnotation,inline:!0,firstSelectedSegment:this.firstSelectedSegment,splitTextRect:this.splitTextRect,selectedElementId:this.selectedElementId,pechaImageClass:h,splitText:a.splitText,selectedElementIds:this.selectedElementIds,list:this.list})))}}]),r}(o.PureComponent);var Fr=0;const Ur=function(e){(0,T.Z)(r,e);var t,n,i=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,S.Z)(t);if(n){var r=(0,S.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,w.Z)(this,e)});function r(){var e;return(0,y.Z)(this,r),(e=i.call(this)).key=Fr++,e.ref=o.createRef(),e.selectedWindow=null,e}return(0,E.Z)(r,[{key:"mouseEnter",value:function(){2===this.selectedWindow&&this.props.text.name&&this.props.changeSelectedWindow(1)}},{key:"componentDidMount",value:function(){this.ref.current.addEventListener("mouseenter",this.mouseEnter.bind(this))}},{key:"componentDidUpdate",value:function(){this.selectedWindow=this.props.selectedWindow}},{key:"render",value:function(){this.props.text&&this.props.text;var e,t,n,i=null,r=null;this.props.annotatedText&&this.props.text&&!this.props.loading?(this.props.paginated?(e=this.props.pageBreaks,0===(t=(0,nt.Z)(e))[0]&&t.shift(),n=function(e){return t}):n=(0,Pt.Z)(1e3,/^།[\s]+(?!།[\s]+)/,2,5),r=new Rt(this.props.annotatedText,n),i=o.createElement(Vr,{splitText:r,annotations:this.props.annotations,activeAnnotations:this.props.activeAnnotations,activeAnnotation:this.props.activeAnnotation,limitWidth:!1,didSelectSegmentIds:this.props.didSelectSegmentIds,selectedSegmentId:this.props.selectedSegmentId,annotationPositions:this.props.annotationPositions,selectedAnnotatedSegments:this.props.selectedAnnotatedSegments,isAnnotating:this.props.isAnnotating,syncIdOnClick:this.props.syncIdOnClick,textListVisible:this.props.textListVisible,showImages:this.props.pageImagesVisible,imagesBaseUrl:this.props.imagesBaseUrl,selectedWitness:this.props.selectedWitness,key:this.key,selectedSearchResult:this.props.selectedSearchResult,searchValue:this.props.searchValue,fontSize:this.props.fontSize,isSecondWindowOpen:this.props.isSecondWindowOpen,changeScrollToId:this.props.changeScrollToId,changeSyncIdOnClick:this.props.changeSyncIdOnClick,imageData:this.props.imageData,isPanelLinked:this.props.isPanelLinked,selectedImage:this.props.selectedImage,changeSelectedImage:this.props.changeSelectedImage,closeAnnotation:this.props.closeAnnotation,textAlignment:this.props.textAlignment,textAlignmentById:this.props.textAlignmentById,isPanelVisible:this.props.isPanelVisible,scrollToId:this.props.scrollToId,selectedWindow:this.selectedWindow,selectedSourceRange:this.props.selectedSourceRange,selectedTargetRange:this.props.selectedTargetRange,changeSelectedRange:this.props.changeSelectedRange,searchResults:this.props.searchResults,showTableContent:this.props.showTableContent,selectedText:this.props.text,condition:this.props.condition,selectedMedia:this.props.selectedMedia,MediaInterval:this.props.MediaInterval})):i=o.createElement("div",{key:this.key});var a=[i];return o.createElement(p.xu,{sx:{bgcolor:"heading.main",color:"texts.main"},className:O()(Nt().textDetail,ke().flex,ke().flexColumn),key:this.key,ref:this.ref},o.createElement(xr,null),o.createElement(p.iz,null),o.createElement(s(),{loaded:!this.props.loading,zIndex:5}),o.createElement(p.xu,{style:{display:"flex",height:"100%",width:"100%"}},o.createElement(p.xu,{className:O()(Nt().textContainer,ke().flex)},this.props.loading?o.createElement("div",null):a),o.createElement(p.Mi,{direction:"left",in:this.props.showTableContent,container:this.ref.current,unmountOnExit:!0,mountOnEnter:!0},o.createElement(p.xu,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0}},o.createElement(Ir,null)))),o.createElement(kr,null))}}]),r}(o.Component);var Qr,Kr,Gr,Yr,$r=n(47311);function Xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(n),!0).forEach((function(t){(0,Ae.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function to(e){return[e.start,e.length].join("-")}var no=null,io=(0,l.connect)((function(e){var t=(0,v.PR)(e),n=e.data.loadingWitnesses||e.data.loadingAnnotations,i=(0,v.Tq)(e),r=v.LZ(e);if(n)return{text:null,witnesses:null,baseWitness:null,annotations:null,loading:n,paginated:null,pageImagesVisible:!0,annotatedText:null,selectedAnnotatedSegments:null,annotationPositions:null,activeAnnotations:null,activeAnnotation:null,user:t,textListVisible:i,fontSize:$.$M,textAlignmentById:r};var o,a,s=(0,v.ZT)(e),l={};s&&(o=(0,v.NW)(e,s.id),a=(0,v.dG)(e,s.id));var u,d=(0,v.zL)(e),h={},p=[],f=null,m=(0,v.Z9)(e),g=[],x={},y=[],E="",b=(0,v.SI)(e),T=!1,w=!1,S=(0,v.bK)(e);if(o&&s&&e.data.witnessAnnotationsById.hasOwnProperty(o.id)){l=(0,v.hX)(e,s.id);var I=(0,v.R8)(e,s.id);I&&(u=(0,v.mh)(e,I)),u||(u=o,I=o.id),u.id!==o.id&&(T=!0,w=(0,v.Hn)(e)),f=$r.Mz(e,u.id);var O=$r.CI(e,u,o),k=(0,c.Z)(O,2);if(x=k[0],p=k[1],f&&(h=function(e,t){if(e===Qr&&t===Kr&&e.version===Yr)return Gr;for(var n={},i={},r=function(r){var o=t[r],a=e.getPositionOfAnnotation(o),s=(0,c.Z)(a,2),l=s[0],u=s[1];if(null==l)return"continue";if(0===u){if(o.isInsertion){var d=to(o),h=i[d];if(h)return h.map((function(e){return n[e].push(o)})),"continue";l=Zt.Rs+l}o.isDeletion&&o.length>0&&(l=Zt.eH+l),o.type===Ft.DT.pageBreak&&(l=Zt.Iv+l),o.type===Ft.DT.lineBreak&&(l=Zt.FQ+l),void 0===n[l]&&(n[l]=[]),-1===n[l].indexOf(o)&&n[l].push(o)}else{for(var p=[],f=l;f<l+u;f++)void 0===n[f]&&(n[f]=[]),-1===n[f].indexOf(o)&&n[f].push(o),p.push(f);if(o.isInsertion){var m=to(o);i[m]=p}}},o=0;o<t.length;o++)r(o);return Qr=e,Kr=t,Gr=n,Yr=e.version,n}(f,Object.values(p))),m&&f&&(no&&no.id===u.id||(m=f.getAnnotation(m.start,m.length)),m&&(g=f.segmentsForAnnotation(m))),u&&a&&f){var A=e.data.witnessAnnotationsById[u.id],C=Object.values(A),Z=null;u.id!==a.id&&(Z=(0,v.CO)(e,o.id,Ft.DT.pageBreak,a.id));for(var R=0,P=(y=function(e,t){var n=[];if(Be().forIn(e,(function(e){return n.push(e.start)})),n=n.sort((function(e,t){return e-t})),!t)return n;var i=[];if(Be().forIn(t,(function(e){return i.push(e.start)})),i=i.sort((function(e,t){return e-t})),0===n.length)return i;if(n.length/i.length<.9)for(var r=n[n.length-1],o=0,a=i.length;o<a;o++){var s=i[o];s>r&&n.push(s)}return n}(C,Z)).length;R<P;R++){var B=y[R],N=f.segmentAtOriginalPosition(B);N instanceof Vt.Z?y[R]=N.start:N instanceof Number&&(y[R]=N)}T&&(E="/static/images/texts/"+s.name+"/"+u.source.name+"/")}}no=u;var W=v.Hd(e),D=v.tt(e),_=v.X3(e),L=v.UO(e),j=v.pt(e),z=(v.VD(e),v.Al(e)),q=v.qB(e),H=v.Cd(e);return{text:s,witnesses:l,workingWitness:o,baseWitness:a,annotations:p,loading:n,paginated:T,pageImagesVisible:w,annotatedText:f,selectedAnnotatedSegments:g,annotationPositions:h,activeAnnotations:eo({},x),activeAnnotation:m,pageBreaks:y,imagesBaseUrl:E,user:t,textListVisible:i,selectedWitness:u,selectedSearchResult:d,searchValue:b,fontSize:S,isSecondWindowOpen:q,isAnnotating:v.pf(e),textAlignment:_,textAlignmentById:r,scrollToId:W,syncIdOnClick:L,selectedWindow:j,selectedSourceRange:(0,v.xX)(e),selectedTargetRange:(0,v.rv)(e),searchResults:(0,v.BP)(e,b),showTableContent:(0,v.Q)(e),selectedMedia:z,MediaInterval:(0,v.oC)(e),condition:H&&D&&q,isPanelLinked:D}}),null,(function(e,t,n){var i=t.dispatch,r=e.annotatedText,o=e.annotationPositions,a=function(e,t,n){var a=o[e],s=[],l=[],u=[];a&&(s=a.filter((function(e){return e.type===Ft.DT.variant})),l=a.filter((function(e){return e.type===Ft.DT.pageBreak})),u=a.filter((function(e){return e.type===Ft.DT.lineBreak})));var d=Be().intersectionWith(s.concat(l,u),r.annotations,(function(e,t){return e.toString()==t.toString()})),h=null;if(d.length>0)h=d[0];else if(s&&s.length>0){var p=function(e){for(var t=null,n=0;n<e.length;n++){var i=e[n];t?i.length>t.length&&(t=i):t=i}return t}(s),f=r.getPositionOfAnnotation(p),m=(0,c.Z)(f,2),v=m[0],x=m[1];p&&p.isInsertion&&(x=0),h=r.getBaseAnnotation(v,x)}else h=r.getBaseAnnotation(t,n);i((0,g.Enf)(h))},s=function(e){return-1!==e.indexOf("i_")},l=function(e){return-1!==e.indexOf("ds_")},u=function(e){return-1!==e.indexOf("p_")},d=function(e){return-1!==e.indexOf("l_")},h=function(e){return s(e)?e.substr(2):l(e)?e.substr(3):e.substr(2)};return eo(eo(eo({},e),n),{},{didSelectSegmentIds:function(t){if(0!==t.length){var n,a=[],u=[],d=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Xr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(d.s();!(n=d.n()).done;){var p=n.value;if(!l(p)&&!s(p)){var f=h(p),m=r.segmentedText.segmentAtPosition(f);u.push(m);var v=o[m.start];v&&(a=a.concat(v))}}}catch(e){d.e(e)}finally{d.f()}a=Be().uniqWith(a,(function(e,t){return e.toString()==t.toString()}));var x=Be().intersectionWith(a,r.annotations,(function(e,t){return e.toString()==t.toString()})),y=function(e,t,n,i){if(0===e.length)return null;for(var r=e[0],o=e[e.length-1],a=r.start,s=o.end,l=null,u=null,d=0;d<n.length;d++){var h,p,f=n[d],m=null,g=i.getPositionOfAnnotation(f),v=(0,c.Z)(g,2);h=v[0],p=v[1],-1!==t.indexOf(f)?(h&&h<a&&(a=h,l=f),(m=h+p-1)&&m>s&&(s=m,u=m)):(m=h+p-1)>s&&(s=m)}var x=null;return l&&u&&l===u&&(x=l),{start:a,length:s-a+1,annotation:x}}(u,x,a,e.annotatedText);if(y){var E=r.getBaseAnnotation(y.start,y.length),b=null;if(y.annotation)b=y.annotation;else if(x.length>0){var T=r.segmentedText.segmentsInRange(y.start,y.length).reduce((function(e,t){return e+t.text}),"");e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),b=new Ft.ZP(Zt.Ii,(w=e.text,S=new Sn.Z(Zt.Ii,Sn.T),I=new On.Z(w.id,w.name),new In.Z(Zt.Ii,I,S,"",!1)),E.start,E.length,T,Ft.DT.variant,e.selectedWitness,e.user)}else b=E;i((0,g.Enf)(b))}else console.warn("No range for selected segment ids: %o",t)}var w,S,I},selectedSegmentId:function(t){var n=h(t),c=n;if(s(t)?c=Zt.Rs+n:l(t)?c=Zt.eH+n:u(t)?c=Zt.Iv+n:d(t)&&(c=Zt.FQ+n),o[c],""===t){if(e.activeAnnotation){var p=g.Enf(null);i(p)}}else if(s(t)||l(t)||u(t)||d(t))a(c,n,0);else{var f=Number(h(t)),m=r.segmentedText.segmentAtPosition(f);m&&a(m.start,m.start,m.length)}},changeScrollToId:function(e){return i(g.VZO(e))},changeSyncIdOnClick:function(e){return i(g.a_O(e))},changeSelectedImage:function(e){i(g.XmY(e))},changeSelectedWindow:function(e){i(g.skj(e))},changeSelectedRange:function(e){i(g.S7E(e))},changeShowTableContent:function(e){i(g.G0K(e))},closeAnnotation:function(){var e=g.Enf(null);i(e)}})}))(Ur);const ro=io;var oo,ao=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=v.zt(e),o=v.Z9(e);if(o&&!o.isType(Ft.DT.pageBreak)&&!o.isType(Ft.DT.lineBreak)){var a=null;r&&(a=$r.Mz(e,r.id));var s=v.PR(e);if(o&&r&&a&&s){var l=new Ft.ZP(null,o.witness,o.end+1,0,null,n,r,s);if(!so(a,l)){var c=v.gm(r),u=[];u.push(g.iAb(l)),u.push(g.oaZ(l.uniqueId,c)),i?u.push(g.Enf(l)):u.push(g.Enf(null)),t((0,Q.$C)(u))}}}},so=function(e,t){return lo(e,Ft.DT.pageBreak,t.start)||lo(e,Ft.DT.lineBreak,t.start)},lo=function(e,t,n){var i=e.getAnnotationsOfType(t);for(var r in i)if(i.hasOwnProperty(r)&&n===i[r].start)return!0;return!1},co=(oo={Escape:function(e,t){v.Z9(e)&&t(g.Enf(null))}},(0,Ae.Z)(oo,"shift-Enter",(function(e,t){ao(e,t,Ft.DT.pageBreak)})),(0,Ae.Z)(oo,"Enter",(function(e,t){ao(e,t,Ft.DT.lineBreak)})),(0,Ae.Z)(oo,"ArrowLeft",(function(e,t){var n=v.zt(e),i=v.Z9(e),r=null;if(n&&(r=$r.Mz(e,n.id)),n&&i&&r&&0!==i.start){var o,a=i.start-1,s=r.segmentAtOriginalPosition(a);if(s&&s instanceof Vt.Z)o=s.start;else if(s&&"number"==typeof s){r.annotationsForPosition(s);var l=r.segmentsForAnnotation(i);l.length>0&&(o="number"==typeof l[0]?l[0]:l[0].start)}if(void 0!==o){var c=r.annotationsForPosition(o),u=null;if(c.length>0&&(u=c[0]).isDeletion&&s&&s instanceof Vt.Z&&(u=null),!u&&s&&s instanceof Vt.Z){var d=r.getBaseAnnotation(o,s.length),h=v.NW(e,n.text.id),p=v.PR(e);d&&h&&p&&s&&(u=new Ft.ZP(Zt.Ii,h,d.start,d.length,s.text,Ft.DT.variant,n,p))}u&&t(g.Enf(u))}else console.warn("Can't get previous segment before %o",i)}})),(0,Ae.Z)(oo,"ArrowRight",(function(e,t){var n=v.zt(e),i=v.Z9(e),r=null;if(n&&(r=$r.Mz(e,n.id)),n&&i&&r){var o,a;if(i.isDeletion){var s=i.end+1,l=r.segmentAtOriginalPosition(s);l&&l instanceof Vt.Z&&(a=l.start)}else a=("number"==typeof(o=r.segmentsForAnnotation(i))[0]?o[0]:o[0].start)+i.content.length;if(void 0!==a){var c=r.annotationsForPosition(a);i.isDeletion&&(c=c.filter((function(e){i.uniqueId,e.uniqueId})));var u=null;if(c.length>0)u=c[0];else{var d=r.segmentedText.segmentAtPosition(a);if(d){var h=r.getBaseAnnotation(a,d.length),p=v.NW(e,n.text.id),f=v.PR(e);h&&p&&f&&d&&(u=new Ft.ZP(Zt.Ii,p,h.start,h.length,d.text,Ft.DT.variant,n,f))}}u&&t(g.Enf(u))}else console.warn("Can't get next segment after %o",i)}})),(0,Ae.Z)(oo,"shift-ArrowRight",(function(e,t){var n=v.zt(e),i=v.Z9(e),r=null;if(n&&(r=$r.Mz(e,n.id)),n&&i&&r&&!i.isDeletion){var o=r.segmentsForAnnotation(i),a=("number"==typeof o[0]?o[0]:o[0].start)+i.content.length;if(void 0!==a){var s=r.annotationsForPosition(a),l=null;if(s.length>0)l=s[0];else{var c=r.segmentedText.segmentAtPosition(a);if(c){var u=r.getBaseAnnotation(a,c.length),d=v.NW(e,n.text.id),h=v.PR(e);u&&d&&h&&c&&(l=new Ft.ZP(Zt.Ii,d,u.start,u.length,c.text,Ft.DT.variant,n,h))}}if(l){var p=new Ft.ZP(Zt.Ii,l.witness,i.start,i.length+l.length,i.content+l.content,i.type,i.creatorWitness,i.creatorUser);t(g.Enf(p))}}else console.warn("Can't get next segment after %o",i)}})),(0,Ae.Z)(oo,"shift-ArrowLeft",(function(e,t){var n=v.zt(e),i=v.Z9(e),r=null;if(n&&(r=$r.Mz(e,n.id)),n&&i&&!i.isSaved&&r&&!i.isDeletion){var o=r.segmentsForAnnotation(i);if(1!==o.length){o.pop();var a=o.reduce((function(e,t){return t instanceof Vt.Z&&(e+=t.text),e}),""),s=new Ft.ZP(Zt.Ii,i.witness,i.start,a.length,a,i.type,i.creatorWitness,i.creatorUser);t(g.Enf(s))}}})),oo);function uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uo(Object(n),!0).forEach((function(t){(0,Ae.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const po=(0,l.connect)((function(e){var t=v.qB(e),n=v.Al(e);return{state:e,selectedText:v.ZT(e),isSecondWindowOpen:t,Media:n}}),null,(function(e,t,n){return ho(ho({dispatch:t.dispatch},n),e)}))((function(e){var t=(0,o.useRef)(null);return o.createElement(p.xu,{ref:t,sx:{display:"flex",flexDirection:"column",width:"100%",height:e.bodyHeight,position:"relative"},onKeyDown:function(t){!function(e,t,n){var i=function(e){var t=e.key;return e.shiftKey&&(t="shift-"+t),t}(e);co.hasOwnProperty(i)&&co[i](t,n)}(t,e.state,e.dispatch)}},o.createElement(Ye.Z,{size:e.isSecondWindowOpen&&e.selectedText?"50%":"100%",pane1Style:{display:"flex",justifyContent:"center"},resizerStyle:{display:e.isSecondWindowOpen?"block":"none"},onDragFinished:function(e){e>0&&window.dispatchEvent(new Event("resize"))}},o.createElement(Ge,null,o.createElement(ro,null)),e.isSecondWindowOpen&&e.selectedText?o.createElement(Ge,null,o.createElement(wn,null)):o.createElement("div",null)),e.Media.isPanelVisible&&o.createElement(Ge,null,o.createElement(Ke,null)))}));var fo=n(51797),mo=n(40512),go=n(49185),vo=n(62254);const xo=(0,l.connect)((function(e){var t,n,i=v.ZT(e),r=v.an(e);if(i){v.hX(e,i.id);var o=v.R8(e,i.id);t=o?v.mh(e,o):v.NW(e,i.id)}if(r){v.Dl(e,r.id);var a=v.y6(e,r.id);n=a?v.vp(e,a):v.S9(e,r.id)}return{selectedText:i,selectedWitness:t,selectedText2:r,selectedWitness2:n,title:v.i0(e,"header.title"),page:e.page,isAnnotating:v.pf(e),isSecondWindowOpen:v.qB(e),theme:v.gh(e),isPanelLinked:v.tt(e),textListIsVisible:v.Tq(e),isPanelVisible:v.K2(e)}}),(function(e){return{onChangedTextWidth:function(t){e(g.tOq(t))},onChangedTextListVisible:function(t){e(g.DaN(t))},changeIsAnnotating:function(t){if(e(g.zBT(t)),!1===t){var n=g.Enf(null);e(n),e(g.Enf(null))}},onChangeWindowOpen:function(t){e(g.rE3(t))},onChangePanelLink:function(t){e(g.jpX(t))}}}))((function(e){var t,n=[Ie().listContainer],i=($.fq,$.zA,(0,o.useState)(!1)),r=(0,c.Z)(i,2),a=r[0],s=r[1];$.j6,e.textListWidth,e.textListIsVisible?n.push(Ie().showListContainer):n.push(Ie().hideListContainer),t="calc(100vh - "+J().headerHeight+")";var l=function(e,t){"clickaway"!==t&&s(!1)},u=[{icon:o.createElement(fo.Z,{htmlColor:e.isAnnotating?"#ff7961":void 0}),name:"Annotate",condition:e.isAnnotating,function:function(){return e.changeIsAnnotating(!e.isAnnotating)}},{icon:o.createElement(mo.Z,{htmlColor:e.isPanelLinked?"#ff7961":void 0}),name:"Link Panel",condition:e.isPanelLinked,function:function(){return e.onChangePanelLink(!e.isPanelLinked)}},{icon:o.createElement(go.Z,null),name:"Share",function:function(){var t,n=e.selectedText,i=e.selectedText2,r=e.selectedWitness,o=e.selectedWitness2;t=i&&o?window.location.origin+"/texts/".concat(n.id,"/witnesses/").concat(null==r?void 0:r.id,"/texts2/").concat(i.id,"/witnesses2/").concat(o.id):window.location.origin+"/texts/".concat(n.id,"/witnesses/").concat(null==r?void 0:r.id),navigator.clipboard.writeText(t).then().catch((function(e){return console.log(e.message)})).finally((function(){return s(!0)}))}},{icon:o.createElement(vo.Z,{htmlColor:e.isSecondWindowOpen?"#ff7961":void 0}),name:"Split Window",condition:e.isSecondWindowOpen,function:function(){return e.onChangeWindowOpen(!e.isSecondWindowOpen,140)}}];return(0,o.useEffect)((function(){var e=setTimeout((function(){window.dispatchEvent(new Event("resize"))}),1e3);return function(){return clearTimeout(e)}}),[e.textListIsVisible]),o.createElement("div",{className:O()(Ie().interface,ke().flex)},o.createElement(be,null),o.createElement(po,{bodyHeight:t}),o.createElement(p.Vr,{ariaLabel:"SpeedDial basic",sx:{position:"absolute",bottom:60,right:16},icon:o.createElement(p.aZ,null)},u.map((function(e){return o.createElement(p.AR,{key:e.name,icon:e.icon,tooltipTitle:e.name,onClick:e.function,open:e.condition})}))),o.createElement(p.A9,{open:a,autoHideDuration:6e3,onClose:l},o.createElement(p.bZ,{onClose:l,severity:"success",sx:{width:"100%"}},"The Url Copied to Clipboard !")))}));var yo=n(25616),Eo=n(49793),bo=n.n(Eo),To=n(56143),wo=n(68426),So=n(90912);wo.Z,So.Z;const Io=function(e){var t=e.setFiltered,n=e.featureText,i=void 0===n?[]:n;return(0,o.useEffect)((function(){t(i)}),[]),o.createElement(p.Kq,{direction:{md:"row",xs:"column"},justifyContent:"space-around",alignItems:{md:"center"},gap:2,mx:{md:3},sx:{boxShadow:3,padding:2}},o.createElement(p.ZT,null,"Filter"),o.createElement(p.xu,{flex:1},o.createElement(Oo,{handleChange:function(e){t(e.target.value)}})))};var Oo=function(e){var t=e.handleChange;return o.createElement(p.nv,{id:"search-bar",className:"text",onInput:t,label:"Title",variant:"outlined",placeholder:"Search...",size:"small"})},ko=n(68068);const Ao=n.p+"b81eedeb7a90a13b48c4a1185a58ca30.png";function Co(){return o.createElement(p.Xk,{sx:(0,Ae.Z)({marginTop:"calc(10% + 60px)",width:"100%",position:"fixed",bottom:0},"width","100%"),component:"footer",square:!0,variant:"outlined"},o.createElement(p.Kq,{sx:{width:"100%",position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",bottom:0}},o.createElement(p.xu,{sx:(0,Ae.Z)({height:"100%",display:"flex",background:"#292826",width:"100%",alignItems:"center",justifyContent:"center"},"height",55)},o.createElement(p.ZT,{textAlign:"center",variant:"h6",fontSize:{md:"20px",xs:"10px"},textTransform:"capitalize",color:"white"},"Our Trusted partner"),o.createElement("img",{src:Ao,alt:"indrajala logo",style:{objectFit:"contain",maxHeight:"100%",marginLeft:"40px"}}))))}function Zo(e){var t=e.Textdata,n=(t.activeText,t.detail),i=(0,o.useState)(1),r=(0,c.Z)(i,2),a=r[0],s=r[1];console.log(n);var l=(0,o.useState)(n),u=(0,c.Z)(l,2),d=u[0],h=u[1],f=(0,o.useState)(!1),m=(0,c.Z)(f,2),g=m[0],v=m[1],x=(0,o.useState)(""),y=(0,c.Z)(x,2),E=y[0],b=y[1],T=Math.ceil(d.length/4),w=function(e,t){var n=(0,o.useState)(1),i=(0,c.Z)(n,2),r=i[0],a=i[1],s=Math.ceil(e.length/t);return{next:function(){a((function(e){return Math.min(e+1,s)}))},prev:function(){a((function(e){return Math.max(e-1,1)}))},jump:function(e){var t=Math.max(1,e);a((function(e){return Math.min(t,s)}))},currentData:function(){var n=(r-1)*t,i=n+t;return e.slice(n,i)},currentPage:r,maxPage:s}}(d,4)||[],S=o.useCallback((function(){v((function(e){return!e}))}),[]),I=o.useRef(null);return(0,o.useEffect)((function(){var e=[];e=null!==E?null==n?void 0:n.filter((function(e){return""===E||E===[]?e:e.title.includes(E)})):n,h(e.sort((function(e,t){return(null==e?void 0:e.order)-(null==t?void 0:t.order)})))}),[E,n]),o.createElement(p.Kq,{sx:{height:"100vh"}},o.createElement(p.xu,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",height:"4rem"},m:4},o.createElement("h3",{className:bo().title,mx:3},o.createElement(H.Z,{id:"library"})),o.createElement(p.hU,{onClick:S},o.createElement(To.Z,null))),o.createElement(p.UO,{in:g},o.createElement(Io,{setFiltered:b})),o.createElement(p.W2,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},d.length>4&&o.createElement(p.tl,{count:T,size:"small",page:a,variant:"outlined",shape:"rounded",onChange:function(e,t){s(t),w.jump(t)},sx:{alignSelf:"flex-end",marginTop:2}}),o.createElement(p.xu,{mt:2,py:1,display:"flex"},o.createElement(ko.E.div,{layout:!0},o.createElement(p.Kq,{sx:{flexWrap:"wrap",gap:1},pb:2,direction:"row",className:bo().list,ref:I},w.currentData().map((function(e,t){return o.createElement(p.xu,{key:e.id||"filteredData-".concat(t),sx:{width:"auto",scrollSnapAlign:"start"}},o.createElement(p.u,{title:e.description},o.createElement(ko.E.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},layout:!0},o.createElement(yo.ZP,{to:"/texts/".concat(e.text),style:{textDecoration:"none"}},o.createElement(p.Zb,{sx:{cursor:"pointer",textDecoration:"none"},elevation:3,key:e.id},o.createElement(p.aY,null,o.createElement(p.ZT,{gutterBottom:!0,variant:"h6",textAlign:"center",textTransform:"capitalize",fontWeight:"bold",width:"max-content"},B(e.title))))))))})))))),o.createElement(Co,null))}const Ro=o.memo(Zo),Po=(0,l.connect)((function(e){return-1===!e.user.userId&&e.user,{text:v.r6(e),title:v.i0(e,"header.title"),Textdata:v.si(e)}}),(function(e){return{onChangedTextWidth:function(t){e(g.tOq(t))},onChangedTextTitle:function(t){e(g.sV5(t))},dispatch:e}}))(Ro);function Bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function No(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bo(Object(n),!0).forEach((function(t){(0,Ae.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(34570);var Wo=[{annotationId:"234241weq",annotationContent:"sad",voteCount:20},{annotationId:"12312weq",annotationContent:"happy",voteCount:40}];const Do=(0,l.connect)((function(e){return console.log(e),{user:"hi"}}))((function(e){var t=o.useState(Wo),n=(0,c.Z)(t,2),i=n[0],r=n[1];return o.createElement(p.xu,{sx:{display:"flex",flexDirection:"column",gap:2,marginTop:2}},i.map((function(e,t){return o.createElement(p.xu,{sx:{display:"flex",alignItems:"center"},key:e.annotationId},o.createElement(p.Ct,{badgeContent:e.voteCount,color:"primary"},o.createElement(p.Af,{label:e.annotationContent,onClick:function(){return function(e){var t=i.map((function(t){return t.annotationId===e?No(No({},t),{},{voteCount:t.voteCount+1}):t}));r(t)}(e.annotationId)}})))})))}));var _o=function(){return o.createElement(Po,null)},Lo=function(){return o.createElement(xo,null)},jo=function(){return o.createElement(Do,null)},zo=function(){return o.createElement("h3",null,"404")},qo=["page","direction"];const Ho=(0,l.connect)((function(e){var t=e.page;return e.direction,{page:t,isLoading:!(0,r.Z)(e,qo).data.loadedInitialData}}))((function(e){var t=e.page,n=(e.isLoading,i[t]);return o.createElement(n,null)}))},22685:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(70885),r=n(67294);function o(e,t){var n=(0,r.useState)((function(){return function(e,t){return JSON.parse(localStorage.getItem(e))||t}(e,t)})),o=(0,i.Z)(n,2),a=o[0],s=o[1];return(0,r.useEffect)((function(){localStorage.setItem(e,JSON.stringify(a))}),[a]),[a,s]}},42547:e=>{e.exports={container:"Editor---container",interface:"Editor---interface",listContainer:"Editor---listContainer",showListContainer:"Editor---showListContainer",hideListContainer:"Editor---hideListContainer"}},26292:e=>{e.exports={Resizer:"resizerStyle---Resizer",horizontal:"resizerStyle---horizontal",vertical:"resizerStyle---vertical",disabled:"resizerStyle---disabled"}},13097:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b","header-height":"40px",mainTint:"#024279",activeButton:"#00746b",headerHeight:"40px",header:"Header---header",logo:"Header---logo",navigationButton:"Header---navigationButton",loginButton:"Header---loginButton",ButtonText:"Header---ButtonText",buttonLink:"Header---buttonLink",controls:"Header---controls"}},49793:e=>{e.exports={title:"HomePage---title",list:"HomePage---list"}},71868:e=>{e.exports={time_stamp:"Chapters---time_stamp",active_stamp:"Chapters---active_stamp",dot:"Chapters---dot",image:"Chapters---image",chapter_info:"Chapters---chapter_info",topic:"Chapters---topic",startTime:"Chapters---startTime"}},36682:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",Resources:"Sidebar---Resources",ResourceDetail:"Sidebar---ResourceDetail",optionlist:"Sidebar---optionlist","css-heg063-MuiTabs-flexContainer":"Sidebar---css-heg063-MuiTabs-flexContainer",listContainer:"Sidebar---listContainer",sidebar:"Sidebar---sidebar",menu_title:"Sidebar---menu_title",sidebar_header:"Sidebar---sidebar_header"}},53804:()=>{},15178:e=>{e.exports={Dictionary:"ResourceOption---Dictionary"}},14632:()=>{},89674:e=>{e.exports={highlight:"SearchStyle---highlight",searchListItem:"SearchStyle---searchListItem"}},56096:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",button:"AddButton---button"}},17084:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"AnnotationControls---annotationControls",annotationContent:"AnnotationControls---annotationContent",subTitle:"AnnotationControls---subTitle",title:"AnnotationControls---title",sectionHeading:"AnnotationControls---sectionHeading",text:"AnnotationControls---text",padding:"AnnotationControls---padding",arrowTop:"AnnotationControls---arrowTop",arrowLeft:"AnnotationControls---arrowLeft",arrowRight:"AnnotationControls---arrowRight",inline:"AnnotationControls---inline",arrow:"AnnotationControls---arrow",arrowDs:"AnnotationControls---arrowDs",nothingSelected:"AnnotationControls---nothingSelected",anonymousMessage:"AnnotationControls---anonymousMessage",noNotes:"AnnotationControls---noNotes",breakButtons:"AnnotationControls---breakButtons"}},41931:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",header:"AnnotationControlsHeader---header",Anotation_closeBtn:"AnnotationControlsHeader---Anotation_closeBtn",edit:"AnnotationControlsHeader---edit"}},17716:e=>{e.exports={heading:"AnnotationControlsHeading---heading",title:"AnnotationControlsHeading---title",button:"AnnotationControlsHeading---button"}},9908:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b","annotation-desc":"AnnotationDetail---annotation-desc",annotationDetail:"AnnotationDetail---annotationDetail",date:"AnnotationDetail---date",active:"AnnotationDetail---active",annotationHeader:"AnnotationDetail---annotationHeader",activeIcon:"AnnotationDetail---activeIcon",editing:"AnnotationDetail---editing",contentOptions:"AnnotationDetail---contentOptions",actionButtons:"AnnotationDetail---actionButtons",edit:"AnnotationDetail---edit",editImage:"AnnotationDetail---editImage",save:"AnnotationDetail---save",cancel:"AnnotationDetail---cancel"}},47670:e=>{e.exports={name:"AnswerView---name",answer:"AnswerView---answer"}},84512:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",save:"Button---save",cancel:"Button---cancel",buttonContainer:"Button---buttonContainer"}},45871:e=>{e.exports={highlight:"SearchStyle---highlight",searchListItem:"SearchStyle---searchListItem"}},48499:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",note:"Note---note",header:"Note---header",info:"Note---info",content:"Note---content",delete:"Note---delete"}},18141:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",editorContainer:"NoteEditor---editorContainer",textEditor:"NoteEditor---textEditor"}},76600:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",editorContainer:"QuestionEditor---editorContainer",textEditor:"QuestionEditor---textEditor"}},19090:e=>{e.exports={question:"QuestionView---question",threadLink:"QuestionView---threadLink"}},91337:e=>{e.exports={loading:"QuestionsLoading---loading"}},92794:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",selectVersion:"SelectVersion---selectVersion",selectEmpty:"SelectVersion---selectEmpty",selectOptions:"SelectVersion---selectOptions","styled-select":"SelectVersion---styled-select"}},43842:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"SplitText---annotationControls",annotationContent:"SplitText---annotationContent",subTitle:"SplitText---subTitle",title:"SplitText---title",sectionHeading:"SplitText---sectionHeading",text:"SplitText---text",padding:"SplitText---padding",arrowTop:"SplitText---arrowTop",arrowLeft:"SplitText---arrowLeft",arrowRight:"SplitText---arrowRight",inline:"SplitText---inline",arrow:"SplitText---arrow",arrowDs:"SplitText---arrowDs",nothingSelected:"SplitText---nothingSelected",anonymousMessage:"SplitText---anonymousMessage",noNotes:"SplitText---noNotes",breakButtons:"SplitText---breakButtons",splitText:"SplitText---splitText",splitTextRowContent:"SplitText---splitTextRowContent",splitTextRow:"SplitText---splitTextRow",pechaImage:"SplitText---pechaImage",image:"SplitText---image",controlsPlaceholder:"SplitText---controlsPlaceholder",hide:"SplitText---hide",pageNumber:"SplitText---pageNumber","image-loading":"SplitText---image-loading"}},58628:e=>{e.exports={TableContent:"TableOfContent---TableContent"}},90147:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",paddingSide:"20px",maxWidth:"600px",text:"Text---text",textFirstRow:"Text---textFirstRow",textLine:"Text---textLine",textline:"Text---textline",limitWidth:"Text---limitWidth",textContainer:"Text---textContainer",N_annotation:"Text---N_annotation",V_annotation:"Text---V_annotation",Q_annotation:"Text---Q_annotation",Q_annotation_double:"Text---Q_annotation_double",P_annotation:"Text---P_annotation",selectedAnnotation:"Text---selectedAnnotation",removedByAnnotation:"Text---removedByAnnotation",insertion:"Text---insertion",highlight:"Text---highlight",activeHighlight:"Text---activeHighlight",lineBreak:"Text---lineBreak",pageBreak:"Text---pageBreak",selectedRangelight:"Text---selectedRangelight",selectedRangeDark:"Text---selectedRangeDark",selectedImage:"Text---selectedImage",mediaInterval:"Text---mediaInterval"}},9438:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textDetail:"TextDetail---textDetail",textContainer:"TextDetail---textContainer",tableContent:"TextDetail---tableContent"}},73209:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",button_group_menu:"TextDetailHeading---button_group_menu"}},21709:e=>{e.exports={textlist:"TextList---textlist",open:"TextList---open"}},30329:e=>{e.exports={container:"LoadMore---container"}},66424:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textList:"TextList---textList",textListRow:"TextList---textListRow",selectedRow:"TextList---selectedRow",textNameRow:"TextList---textNameRow",textName:"TextList---textName",highlight:"TextList---highlight",searchResults:"TextList---searchResults",searchResult:"TextList---searchResult",selectedSearchResult:"TextList---selectedSearchResult",searchTotal:"TextList---searchTotal",textListLoader:"TextList---textListLoader",searching:"TextList---searching",loadMore:"TextList---loadMore"}},91082:e=>{e.exports={tab:"TextListTab---tab",showTab:"TextListTab---showTab",hideTab:"TextListTab---hideTab"}},76644:e=>{e.exports={textsSearchContainer:"TextsSearch---textsSearchContainer",textsSearch:"TextsSearch---textsSearch",minify:"TextsSearch---minify"}},12733:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",accessory:"Accessory---accessory"}},12763:e=>{e.exports={avatars:"AnnotationAvatar---avatars",avatar:"AnnotationAvatar---avatar"}},69646:e=>{e.exports={button:"Button---button",buttonNoBezel:"Button---buttonNoBezel",active:"Button---active",leftAlign:"Button---leftAlign",title:"Button---title",icon:"Button---icon"}},46530:e=>{e.exports={shareContainer:"Sharebutton---shareContainer",shareButton:"Sharebutton---shareButton",facebookButton:"Sharebutton---facebookButton",whatsappButton:"Sharebutton---whatsappButton"}},94507:e=>{e.exports={voteBtn:"Vote---voteBtn",number:"Vote---number",voteContainer:"Vote---voteContainer"}},58247:e=>{e.exports={fontSize:"FontSize---fontSize"}},34570:e=>{e.exports={voteBtn:"embedingVote---voteBtn"}},75740:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b"}},7731:(e,t,n)=>{var i={".":53944,"./":53944,"./index":53944,"./index.js":53944,"react-universal-component/dist/requireById":53944,"react-universal-component/dist/requireById/":53944,"react-universal-component/dist/requireById/index":53944,"react-universal-component/dist/requireById/index.js":53944};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=7731}}]);