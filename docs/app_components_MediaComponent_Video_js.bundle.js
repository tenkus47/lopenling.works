"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkteminusclient"] = self["webpackChunkteminusclient"] || []).push([["app_components_MediaComponent_Video_js"],{

/***/ "./app/components/MediaComponent/Video.js":
/*!************************************************!*\
  !*** ./app/components/MediaComponent/Video.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_player__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-player */ \"./node_modules/react-player/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ \"./node_modules/@mui/material/Collapse/Collapse.js\");\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n\n\n\n\n\nfunction toHMS(seconds) {\n  var date = new Date(null);\n  date.setSeconds(seconds);\n  return date.toISOString().substr(11, 8);\n}\n\nfunction toSec() {\n  var hms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  var a = hms.split(\":\"); // split it at the colons\n  // minutes are worth 60 seconds. Hours are worth 60 minutes.\n\n  var seconds = +a[0] * 60 * 60 + +a[1] * 60 + +a[2];\n  return seconds;\n}\n\nfunction calTimeToSeek(maxValue, currentTime) {\n  var i = toSec(currentTime) / maxValue;\n  return parseFloat(i);\n}\n\nfunction getClosestNumber(arr, d) {\n  return arr.reduce(function (a, b) {\n    return b <= d && a < b ? b : a;\n  }, 0);\n}\n\nfunction Video(props) {\n  var _props$videoData, _props$videoData$sour, _props$videoData2;\n\n  var textIdfromAlignment = props.alignmentData.text;\n  var sourceId = props === null || props === void 0 ? void 0 : (_props$videoData = props.videoData) === null || _props$videoData === void 0 ? void 0 : (_props$videoData$sour = _props$videoData.source) === null || _props$videoData$sour === void 0 ? void 0 : _props$videoData$sour.text;\n  var VideoData = (props === null || props === void 0 ? void 0 : (_props$videoData2 = props.videoData) === null || _props$videoData2 === void 0 ? void 0 : _props$videoData2.alignment) || [];\n  var url = \"https://www.youtube.com/watch?v=2MMM_ggekfE\";\n\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({}),\n      _useState2 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_useState, 2),\n      interval = _useState2[0],\n      setInterval = _useState2[1];\n\n  var VideoIdList = []; // const syncIdOnScroll = props.syncIdOnScroll;\n\n  var syncIdOnClick = props.syncIdOnClick;\n\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({\n    played: 0,\n    duration: 0,\n    playing: true\n  }),\n      _useState4 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_useState3, 2),\n      state = _useState4[0],\n      setState = _useState4[1];\n\n  if (!lodash__WEBPACK_IMPORTED_MODULE_4___default().isEmpty(VideoData)) {\n    VideoIdList = VideoData.map(function (l) {\n      return parseInt(l.source_segment.start);\n    });\n  }\n\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function () {\n    if (textIdfromAlignment === props.selectedText.id) {\n      //     let intersection = syncIdOnScroll.filter(element => VideoIdList.includes(element));\n      //     newList= VideoData.filter(d=>d.source_segment===intersection[0]);\n      //     jumpToTime(newList[0]?.target_segment.start)\n      var ClickId = syncIdOnClick;\n      var closestID = getClosestNumber(VideoIdList, ClickId);\n      var data = VideoData.find(function (l) {\n        return l.source_segment.start === closestID.toString();\n      });\n\n      if (!lodash__WEBPACK_IMPORTED_MODULE_4___default().isEmpty(data)) {\n        jumpToTime(data.target_segment.start);\n      }\n    }\n  }, [syncIdOnClick]);\n  var changeTextBackground = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function () {\n    var current = interval;\n\n    if (textIdfromAlignment === props.selectedText.id) {\n      for (var i = current.start; i < current.end; i++) {\n        var currentIds = document.getElementById(\"s_\".concat(i));\n\n        if (currentIds) {\n          currentIds.style.fontWeight = \"bold\";\n        }\n      }\n    }\n  }, [interval.start]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function () {\n    var timer = setTimeout(function () {\n      return changeTextBackground();\n    }, 800);\n    var current = interval;\n\n    if (interval.start) {\n      props.changeScrollToId({\n        id: current.start || null,\n        from: \"video\"\n      });\n    }\n\n    return function () {\n      clearTimeout(timer);\n\n      for (var i = current.start; i < current.end; i++) {\n        var currentIds = document.getElementById(\"s_\".concat(i));\n\n        if (currentIds) {\n          currentIds.style.fontWeight = \"normal\";\n        }\n      }\n    };\n  }, [interval.start]);\n  var videoRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)();\n\n  var jumpToTime = function jumpToTime(time) {\n    var newData = calTimeToSeek(state.duration, time);\n    videoRef.current.seekTo(parseFloat(newData));\n  };\n\n  var handleProgress = function handleProgress(e) {\n    var played = e.playedSeconds;\n    var Interval = VideoData.find(function (time) {\n      return toSec(time.target_segment.start) < played && toSec(time.target_segment.end) > played;\n    });\n\n    if (!lodash__WEBPACK_IMPORTED_MODULE_4___default().isEmpty(Interval)) {\n      var source_segment = Interval.source_segment;\n      changeTextBackground();\n      setInterval(_objectSpread({}, source_segment));\n    }\n  };\n\n  if (VideoData.length === 0) return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", null);\n  if (sourceId !== props.selectedText.id) return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", null);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n    \"in\": props.open\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(react_player__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n    url: url,\n    style: {\n      maxWidth: \"100%\"\n    },\n    ref: videoRef,\n    controls: true,\n    onDuration: function onDuration(duration) {\n      return setState(_objectSpread(_objectSpread({}, state), {}, {\n        duration: duration\n      }));\n    },\n    light: true,\n    playing: true,\n    onPlay: function onPlay() {\n      return setState(_objectSpread(_objectSpread({}, state), {}, {\n        playing: true\n      }));\n    },\n    onPause: function onPause() {\n      return setState(_objectSpread(_objectSpread({}, state), {}, {\n        playing: false\n      }));\n    },\n    onProgress: handleProgress,\n    onError: function onError() {\n      return console.log(\"error in media sec\");\n    }\n  }));\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Video);\n\n//# sourceURL=webpack://teminusclient/./app/components/MediaComponent/Video.js?");

/***/ })

}]);