(self.webpackChunkteminusclient=self.webpackChunkteminusclient||[]).push([[418],{41513:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>eo});var i=n(70885),o=n(67294),r=n.n(o),s=(t=n(2040),n(76644)),a=n.n(s),l=(s=n(3473),n(15671)),c=n(43144),u=n(60136),d=n(6215),h=n(61120),p=n(94184),f=n.n(p),g=(p=n(75740),n.n(p)),m=(p=n(69646),n.n(p)),v=(n(12733),n(86933)),x=n(47326);function y(e){var t=e.children,n=e.tooltipName,i=void 0===(i=e.format)?null:i,o=void 0===(o=e.className)?"":o,s=void 0===(s=e.shortcut)?"":s;return e=void 0!==(e=e.on)&&e,r().createElement(r().Fragment,null,r().createElement("div",{"data-tip":!0,"data-for":n,className:o,style:{width:"100%"}},e?t:r().createElement(x.Z,{placement:"top",followCursor:!0,title:i?r().createElement(v.Z,{id:i}):r().createElement("span",null,n," [".concat(s,"]"))},t)))}var T,b=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"render",value:function(){var e=this.props.color||"#ffffff",t=this.props.backgroundColor||g().mainTint,n=this.props.fontSize||"14px",i=this.props.noBezel?[m().buttonNoBezel]:[m().button],o=this.props.tooltipTitle||"",s=(this.props.isActive&&i.push(m().active),i=f().apply(void 0,i),this.props.shortcut||"");return n={fontSize:n,color:e,backgroundColor:t},this.props.align&&(n.textAlign=this.props.align),r().createElement(y,{tooltipName:o,shortcut:s,on:this.props.disabled},r().createElement("button",{style:n,className:i,onClick:this.props.onClick,disabled:this.props.disabled},this.props.icon&&r().createElement("div",{className:m().icon},this.props.icon),this.props.title&&r().createElement("span",{className:m().title},this.props.title)))}}]),n}(r().Component);function E(){return(E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function S(e){return r().createElement("svg",E({width:24,height:24},e),T=T||r().createElement("path",{d:"M9 2C5.146 2 2 5.146 2 9s3.146 7 7 7a6.959 6.959 0 004.574-1.719l.426.426V16l6 6 2-2-6-6h-1.293l-.426-.426A6.959 6.959 0 0016 9c0-3.854-3.146-7-7-7zm0 2c2.773 0 5 2.227 5 5s-2.227 5-5 5-5-2.227-5-5 2.227-5 5-5z"}))}p=(0,s.ZP)((function(e){function t(t){var i;t.preventDefault(),n.current instanceof HTMLInputElement&&(i=n.current.value,l((function(){e.searchChanged(i)})))}var n=r().createRef(),s=(0,o.useTransition)(),l=((s=(0,i.Z)(s,2))[0],s[1]);return console.log(e.textListWidth),r().createElement("div",{className:a().textsSearchContainer,style:{maxWidth:e.textListWidth}},r().createElement("div",{className:a().textsSearch},r().createElement("form",{onSubmit:t},r().createElement("input",{onChange:function(t){l((function(){""===t.target.value?e.searchChanged(null):e.searchChanged(t.target.value)}))},style:{outline:"none",width:150},type:"text",id:"textSearchInput",placeholder:e.intl.formatMessage({id:"leftbar.search"}),ref:n}),r().createElement(b,{backgroundColor:"#35BF5C",onClick:t,noBezel:!0,icon:r().createElement(S,null)}))))}));var w=n(48097),I=n(40646),O=((0,t.connect)((function(e){return{searchTerm:I.SI(e),searchValue:e.ui.searchValue,textListWidth:I.W3(e)}}),(function(e){return{searchChanged:function(t){e((0,w.QuB)(t))}}}))(p),n(97326)),k=n(54939),Z=n(29940),C=(n(5398),n(79593)),A=(n(19986),n(71889)),R=(p=n(66424),n.n(p)),P=(p=n(70758),n.n(p)),B=(p=n(30323),n.n(p)),W=(p=n(59632),n.n(p)),L=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(e){return(0,l.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.string,n=t,i=this.props.stringClass||"";if(this.props.searchTerm){var r=this.props.searchTerm,s=(new(B())).splitGraphemes(t),a=t.indexOf(r),l=a+r.length,c=0,u="";if(-1<a)for(var d=0;d<s.length;d++){var h=s[d];a<=c&&c<l&&(u+=h),c+=h.length}0<u.length&&(n=W()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:i},n)}}]),n}(o.Component),N=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(e){return(0,l.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"render",value:function(){var e=this.props.count;return this.props.extra&&(e+="+"),o.createElement("span",{className:R().searchTotal},e)}}]),n}(o.Component),D=(p=n(30329),n.n(p));function j(e){return e=e.loading?r().createElement("span",null,r().createElement(v.Z,{id:"leftbar.loading"})):r().createElement("span",null,r().createElement(v.Z,{id:"leftbar.loadMore"})),r().createElement("div",{className:D().container},e)}p=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(e){return(0,l.Z)(this,n),(e=t.call(this,e)).cache=new Z.t1({fixedWidth:!0,defaultHeight:60,minHeight:60}),e.rowRenderer=e.rowRenderer.bind((0,O.Z)(e)),e}return(0,c.Z)(n,[{key:"componentDidUpdate",value:function(e){this.cache.clearAll(),this.list&&this.list.forceUpdateGrid()}},{key:"componentDidMount",value:function(){}},{key:"rowRenderer",value:function(e){var t=this,n=e.key,i=e.index,o=e.parent,s=(e=e.style,this.props.selectedText),a=s?s.id:-1,l=this.props.selectedSearchResult,c=this.props.texts,u=this.props.onSelectedText,d=this.props.onSelectedSearchResult,h=this.props.searchTerm,p=this.props.searchResults,g=R().textListRow,m=c[i],v=(m.id===a&&(g=f()(g,R().selectedRow)),a=(0,A.Z)(m.name),r().createElement("span",{className:R().textName},a)),x=[],y=null,T=!1,b=!1,E=(0<h.length&&(v=r().createElement(L,{string:a,stringClass:R().textName,highlightClass:R().highlight,searchTerm:h}),p.hasOwnProperty(m.id)&&(x=p[m.id].results,T=p[m.id].extra,b=p[m.id].loading,y=r().createElement(N,{count:p[m.id].total,extra:T}))),a=this.cache,[]);return 0<x.length&&(E=x.map((function(e){var t=(t=l&&l.textId===m.id&&l.start===e[0])?R().selectedSearchResult:R().searchResult;return r().createElement("div",{key:m.id+"_"+e[0],onClick:function(){d(m,e[0],h.length,s)},className:t},r().createElement(L,{string:e[1],highlightClass:R().highlight,searchTerm:h}))}))),null!==p?r().createElement(Z.Z8,{columnIndex:0,key:n,parent:o,rowIndex:i,cache:a},r().createElement("div",{key:"listkeys-".concat(n),style:e,className:g},h&&r().createElement("div",{className:R().textNameRow,onClick:function(){u(c[i])}},v," ",y),0<x.length&&r().createElement("div",{className:R().searchResults},E),T&&r().createElement("div",{className:R().loadMore,onClick:function(){t.props.onSearchText(m,h)}},r().createElement(j,{loading:b})))):null}},{key:"findRowHeight",value:function(e){return e.searchTerm?null:40}},{key:"render",value:function(){var e=this,t=this.props.texts.length;return r().createElement("div",{className:R().textList},this.props.texts&&0<this.props.texts.length?r().createElement(k.q,null,(function(n){var i=n.height;return n=n.width,r().createElement(C.aV,{ref:function(t){return e.list=t},height:i,rowCount:t,rowHeight:e.findRowHeight(e.props)||e.cache.rowHeight,rowRenderer:e.rowRenderer,width:n,overscanRowCount:1,deferredMeasurementCache:e.cache})})):this.props.searching?r().createElement("div",{className:R().textListLoader},r().createElement(P(),{loaded:!this.props.searching,scale:.5}),r().createElement("p",{className:R().searching},"Searching…")):r().createElement("ul",{className:"textList"}))}}]),n}(r().Component);var _=n(81566),H=((0,t.connect)((function(e){var t=I.SI(e),n=I.BP(e,t),i=I.zL(e),o=!1,r=e.data.texts;return{texts:r=0<t.length?null===n?(o=!0,[]):r.filter((function(e){return n.hasOwnProperty(e.id)})):r,selectedText:(0,I.ZT)(e),searchTerm:t,searchResults:n,selectedSearchResult:i,searching:o}}),(function(e){return{onSelectedText:function(t){e(w.kPP(t))},onSelectedSearchResult:function(t,n,i,o){o&&o.id===t.id?e(w.soO(t.id,n,i)):e((0,_.$C)([w.soO(t.id,n,i),w.kPP(t)]))},onSearchText:function(t,n){e(w.Wjr(t.id,n))}}}))(p),p=n(91082),n.n(p)),z=((0,t.connect)((function(e){return{textListIsVisible:(0,I.Tq)(e)}}),(function(e){return{tabClicked:function(){e((0,w.DaN)(!0))}}}))((function(e){var t=[H().tab];return e.textListIsVisible?t.push(H().hideTab):t.push(H().showTab),r().createElement("div",{className:f().apply(void 0,t),onClick:e.tabClicked},"Text List")})),n(50137));n.p,p=n(13097);var q=n.n(p),V=n(1376),M=n(23998),F=(p=n(43929),n.n(p)),U=(p=n(83097),n.n(p)),Q=n(4942),G=(n(64687),p=n(99706),n.n(p)),Y=(n(26126),n(96486)),K=n.n(Y);n(72679);var $=n(12981),X=n(71349),J=n(2734);function ee(e){var t=(0,J.Z)(),n=r().useRef(null);return r().createElement($.Z,{in:e.open},r().createElement(X.Z,{profile:"top_progress",src:["https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"],isDark:"dark"===t.palette.mode,onLoad:function(e){console.log(e)},speedPanel:"bottom",ref:n,onPlay:function(e){console.log(e)}}))}var te=n(22004);function ne(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,Q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e){return 60*+(e=(0<arguments.length&&void 0!==e?e:"").split(":"))[0]*60+60*+e[1]+ +e[2]}function re(e){var t=e.alignmentData.text,n=null==e||null==(n=e.videoData)||null==(n=n.source)?void 0:n.text,s=(null==e||null==(a=e.videoData)?void 0:a.alignment)||[],a=(0,o.useState)({}),l=(a=(0,i.Z)(a,2))[0],c=a[1],u=[],d=e.syncIdOnClick,h=(a=(0,o.useState)({played:0,duration:0,playing:!0}),(a=(0,i.Z)(a,2))[0]),p=a[1],f=(K().isEmpty(s)||(u=s.map((function(e){return parseInt(e.source_segment.start)}))),(0,o.useEffect)((function(){var n,i,o;t===e.selectedText.id&&(o=d,n=u.reduce((function(e,t){return t<=o&&e<t?t:e}),0),i=s.find((function(e){return e.source_segment.start===n.toString()})),K().isEmpty(i)||m(i.target_segment.start))}),[d]),(0,o.useCallback)((function(){var n=l;if(t===e.selectedText.id)for(var i=n.start;i<n.end;i++){var o=document.getElementById("s_".concat(i));o&&(o.style.fontWeight="bold")}}),[l.start])),g=((0,o.useEffect)((function(){var t=setTimeout((function(){return f()}),800),n=l;return l.start&&e.changeScrollToId({id:n.start||null,from:"video"}),function(){clearTimeout(t);for(var e=n.start;e<n.end;e++){var i=document.getElementById("s_".concat(e));i&&(i.style.fontWeight="normal")}}}),[l.start]),(0,o.useRef)()),m=function(e){t=h.duration,e=oe(e)/t;var t=parseFloat(e);g.current.seekTo(parseFloat(t))};return 0===s.length||n!==e.selectedText.id?r().createElement("div",null):r().createElement($.Z,{in:e.open},r().createElement(te.Z,{url:"https://www.youtube.com/watch?v=2MMM_ggekfE",style:{maxWidth:"100%"},ref:g,controls:!0,onDuration:function(e){return p(ie(ie({},h),{},{duration:e}))},light:!0,playing:!0,onPlay:function(){return p(ie(ie({},h),{},{playing:!0}))},onPause:function(){return p(ie(ie({},h),{},{playing:!1}))},onProgress:function(e){var t=e.playedSeconds;e=s.find((function(e){return oe(e.target_segment.start)<t&&oe(e.target_segment.end)>t})),K().isEmpty(e)||(e=e.source_segment,f(),c(ie({},e)))},onError:function(){return console.log("error in media sec")}}))}n(57787);var se=n(87462),ae=(p=n(61193),n.n(p)),le=n(50594),ce=n(36501),ue=(n(1706),n(6867));function de(e){return r().createElement(ae(),{handle:"#draggable-dialog-title",bounds:"parent"},r().createElement(ce.Z,e))}const he=(0,t.connect)((function(e){var t=I.Hd(e),n=I.UO(e),i=I.n$(e),o=I.fn(e),r=I.Al(e),s=I.ZT(e);return{scrollToId:t,syncIdOnClick:n,imageData:i,videoData:o,selectedMedia:r,selectedText:s,isImagePortrait:I.Cb(e),alignmentData:I.hp(e),witness:I.R8(e,s.id),witnesses:I.hX(e,s.id),ImageVersion:I.Xp(e),selectedImage:I.Px(e),imageScrollId:I.Jh(e),imageAlignmentById:I.d6(e)}}),(function(e){return{toggleImage:function(t){return e(w.lGC(t))},onSelectedSearchResult:function(t,n,i,o){o&&o.id===t.id?e(w.soO(t.id,n,i)):e(batchActions([w.soO(t.id,n,i),w.kPP(t)]))},changeMediaSelection:function(t){return e(w.PS_(t))},changeIsImagePortrait:function(t){return e(w.qLu(t))},changeImageVersion:function(t){return e(w.MY8(t))},changeSelectedImage:function(t){return e(w.XmY(t))},changeSelectedRange:function(t){e(w.S7E(t))},changeScrollToId:function(t){return e(w.VZO(t))}}}))((function(e){var t=r().useState(!0),n=(t=(0,i.Z)(t,2))[0],o=t[1];return e.selectedMedia.isImageVisible?null:r().createElement(de,{sx:{position:"absolute",zIndex:1,right:0}},r().createElement("div",{className:"Resizable-media-div"},r().createElement("div",{style:{cursor:"move",paddingInline:20,paddingTop:10,display:"flex",justifyContent:"space-between",alignItems:"center"},id:"draggable-dialog-title"},r().createElement("h3",null,e.selectedMedia.isVideoVisible&&"VIDEO"),r().createElement("h3",null,e.selectedMedia.isAudioVisible&&"AUDIO"),r().createElement("div",{className:"buttons-hide-close"},r().createElement(ue.Z,{onClick:function(){o((function(e){return!e}))},disableRipple:!0},n?"-":"+"),r().createElement(ue.Z,{onClick:function(){e.changeMediaSelection(null)},disableRipple:!0},r().createElement(le.Z,null)))),r().createElement(r().Fragment,null,e.selectedMedia.isVideoVisible&&r().createElement(re,(0,se.Z)({},e,{open:n,setOpen:o})),e.selectedMedia.isAudioVisible&&r().createElement(ee,{open:n,setOpen:o}))))})),pe=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(e){return(0,l.Z)(this,n),(e=t.call(this,e)).state={hasError:!1},e}return(0,c.Z)(n,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?r().createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(r().Component);p=n(26292);var fe=n.n(p),ge=(p=n(52925),n.n(p)),me=(p=n(23199),n.n(p)),ve=n(88566);const xe=(0,o.memo)((0,s.ZP)((function(e){var t=[],n="",i="",o=[];return e.witnesses&&(t=e.witnesses.map((function(e){return e})),e.activeWitness&&(i=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id}))),t.sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),K().isEmpty(t)&&!e.activeWitness?null:r().createElement(ve.Z,{onChange:function(n){K().isEmpty(t)||e.onSelectedWitness(t[n.target.value])},className:me().selectVersion,value:i,label:"Version2",classes:{root:me().selectEmpty,select:me().selectOptions}},t.map((function(t,i){var s;return t.id===(null==(s=e.activeWitness)?void 0:s.id)&&o.push(me().selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===e.user.name?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),r().createElement("option",{key:"versionSelect2-".concat(i),value:i,className:me().selectOptions},n)})))})));p=n(44490);var ye=n.n(p);function Te(e){var t=e.max,n=(e.min,e.initialvalue),s=void 0===(e=e.changeSize)?function(e){return console.log(e)}:e,a=(e=(0,o.useState)(n/t*100),(e=(0,i.Z)(e,2))[0]),l=e[1];return e=K().debounce((function(e){s(Math.floor(parseInt(a/100*t)))}),500),r().createElement("div",{className:ye().inputRanges},r().createElement("span",{style:{fontSize:13,top:"-5px"},onClick:function(){return s(n-2)}},"ཀ"),r().createElement("input",{type:"range",style:{width:"70%"},className:ye().inputRange,min:40,max:100,smooth:"yes",step:1,value:a,onChange:function(e){return l(e.target.value)},onMouseUp:e,onTouchEnd:e}),r().createElement("span",{style:{fontSize:18,top:"-10px"},onClick:function(){return s(n+2)}},"ཀ"))}var be=n(42982),Ee=n(91250),Se=(p=n(14960),n.n(p)),we=n(99226),Ie=n(2658),Oe=n(23926),ke=n(72642),Ze=n(96514),Ce=n(66712);p=r().memo((function(e){var t=(0,o.useRef)(e.texts),n=(0,o.useState)(t.current),s=(n=(0,i.Z)(n,2))[0],a=n[1],l=(n=(0,o.useState)(null),(n=(0,i.Z)(n,2))[0]),c=n[1],u=e.onSelectedText,d=e.selectedText,h=(n=(0,o.useState)(!1),(e=(0,i.Z)(n,2))[0]),p=e[1],g=(n=(0,o.useMemo)((function(){return(d||s[0]).name}),[d,s]),(0,o.useEffect)((function(){var e;""===l&&a((0,be.Z)(t.current)),null!==l&&""!==l&&(e=t.current.filter((function(e){return e.name.includes(l)})),a((0,be.Z)(e)))}),[l]),(0,o.useRef)(new Ee.t1({fixedHeight:!0,defaultHeight:40}))),m=[Se().textlist],v=r().useCallback((function(e){var t=e.key,n=e.index,i=e.style,o=(e=e.parent,s[n]);return r().createElement(Ee.Z8,{key:"optionvalues-".concat(t),cache:g.current,parent:e,columnIndex:0,rowIndex:n},r().createElement("div",{style:i,onClick:function(){p(!1),u(o)}},r().createElement(we.Z,{sx:{overflow:"hidden",textOverflow:"ellipsis",width:"13rem",paddingLeft:2,fontSize:{lg:12,md:11,sm:10,xs:10},color:"text.primary"},component:"div"},r().createElement(Ie.Z,{noWrap:!0},(0,A.Z)(o.name)))))}),[s]);return r().createElement(Oe.Z,{onClickAway:function(){return p(!1)}},r().createElement("div",{style:{position:"relative",marginLeft:10}},r().createElement(ke.Z,{onClick:function(){p((function(e){return!e})),!1===h&&m.push(Se().open)},component:"div",variant:"outlined",sx:{overflow:"hidden",textOverflow:"ellipsis",width:"10rem",height:"100%",color:"text.primary"}},r().createElement(Ie.Z,{noWrap:!0},n)),r().createElement(Ze.Z,{in:h},r().createElement(we.Z,{className:f()(m),sx:{position:"absolute",bgcolor:"heading.main",zIndex:1}},r().createElement(Ce.Z,{onChange:function(e){e=e.target.value,c(e)},id:"standard-basic",label:"filter",variant:"standard",style:{width:"100%"}}),r().createElement(Ee.qj,null,(function(e){var t=e.width;return e=e.height,r().createElement(Ee.aV,{width:t,height:e,rowHeight:40,deferredMeasurementCache:g.current,rowCount:s.length,rowRenderer:v})}))))))}));const Ae=(0,t.connect)((function(e){var t=I.SI(e),n=I.BP(e,t),i=I.zL(e),o=!1,r=e.data.texts;return{texts:r=0<t.length?null===n?(o=!0,[]):r.filter((function(e){return n.hasOwnProperty(e.id)})):r,selectedText:(0,I.an)(e),searchTerm:t,searchResults:n,selectedSearchResult:i,searching:o}}),(function(e){return{onSelectedText:function(t){e(w.M1d(t))}}}))(p);var Re;function Pe(){return(Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function Be(e){return r().createElement("svg",Pe({viewBox:"0 0 512 512"},e),Re=Re||r().createElement("path",{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"}))}var We=n(22685),Le=n(27036),Ne=n(83975),De=n(67720),je=n(33797);function _e(e){var t=(0,o.useState)(!1),n=(t=(0,i.Z)(t,2))[0],s=t[1],a=(t=(0,We.Z)("WindowTwoFont","Tibetan"),(t=(0,i.Z)(t,2))[0]),l=t[1];return(0,o.useEffect)((function(){document.body.style.setProperty("--tibetan-fonts2",a)}),[]),r().createElement(Oe.Z,{onClickAway:function(){return s(!1)}},r().createElement(we.Z,{position:"relative"},r().createElement(ue.Z,{onClick:function(){s((function(e){return!e}))},size:"small",variant:"text"},r().createElement(Be,{height:20,width:20,fill:"currentColor"})),r().createElement(Ze.Z,{in:n},r().createElement(Ne.Z,{dense:!0,sx:{position:"absolute",right:0,zIndex:2,top:40,bgcolor:"heading.main"}},r().createElement(Te,{max:20,min:7,initialvalue:e.textFontSize,changeSize:e.onChangedFontSize}),r().createElement(De.Z,null),r().createElement(He,{selectFont:function(e){l(e),document.body.style.setProperty("--tibetan-fonts2","".concat(e));var t=document.getElementById("updateList2"),n=1,i=setInterval((function(){t.click(),n++,console.log("ran"),4<n&&clearInterval(i)}),800);s(!1)},selectedfont:a}),r().createElement(je.Z,{onClick:function(){return e.onExport()}},"Export Document",e.exportingWitness&&r().createElement(Le.Z,null))))))}var He=function(e){var t=e.selectFont,n=(e=e.selectedfont,z.yn||[]);return r().createElement(we.Z,{textAlign:"center"},r().createElement("span",null,"Font:")," ",r().createElement("select",{onChange:function(e){return t(e.target.value)},value:e},n.map((function(e,t){return r().createElement("option",{key:t+"-fontselect",value:e},e)}))))},ze=n(42761);function qe(e){return e=e.handleWindowSearch,r().createElement(ue.Z,{size:"small",variant:"text",onClick:e},r().createElement(ze.Z,null))}var Ve=n(326),Me=n(63343);function Fe(e){return r().createElement(r().Fragment,{key:"right"},r().createElement(ue.Z,{onClick:function(){e.changeShowTableContent(!e.showTableContent)}},e.showTableContent?r().createElement(Me.Z,null):r().createElement(Ve.Z,null)))}var Ue=n(26447),Qe=n(8044),Ge=n(1849);function Ye(e){e=e.isSecondWindowOpen;var t=(0,o.useCallback)((function(){var e=document.getElementById("updateList2");e&&e.click()}),[e]);return(0,o.useEffect)((function(){var e=setTimeout((function(){t()}),500);return function(){return clearTimeout(e)}}),[e]),r().createElement(ue.Z,{variant:"text",size:"small",onClick:t},r().createElement(Ge.Z,null))}var Ke=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(e){return(0,l.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.string,n=t,i=this.props.stringClass||"";if(this.props.searchTerm){var r=this.props.searchTerm,s=(new(B())).splitGraphemes(t),a=t.indexOf(r),l=a+r.length,c=0,u="";if(-1<a)for(var d=0;d<s.length;d++){var h=s[d];a<=c&&c<l&&(u+=h),c+=h.length}0<u.length&&(n=W()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:i},n)}}]),n}(o.Component),$e=(p=n(89674),n.n(p));function Xe(e){function t(e){var t=e.key,o=e.index,a=e.parent,c=(e=e.style,s[o]);return r().createElement(Ee.Z8,{key:"listkeys2-".concat(t),cache:l.current,parent:a,columnIndex:0,rowIndex:o},r().createElement("div",{style:e},0<s.length&&r().createElement("div",{className:$e().searchListItem,onClick:function(){return n(c[0])}},r().createElement(Ke,{string:c[1],highlightClass:$e().highlight,searchTerm:i}))))}var n=e.handleListItemClick,i=e.searchValue,s=e.results,a=(e.selectedText,(0,o.useRef)()),l=(0,o.useRef)(new Ee.t1({fixedWidth:!0,defaultHeight:100}));return s?r().createElement(r().Fragment,null,r().createElement(Ee.qj,null,(function(e){var n=e.height;return e=e.width,r().createElement(Ee.aV,{ref:a,height:n,rowCount:null==s?void 0:s.length,rowHeight:l.current.rowHeight,deferredMeasurementCache:l.current,rowRenderer:t,width:e,overscanRowCount:1})}))):null}function Je(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){(0,Q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const tt=(0,t.connect)((function(e){var t,n=I.PR(e),i=I.an(e),o=[],r=(i&&(o=I.Dl(e,i.id),t=(t=I.y6(e,i.id))?I.vp(e,t):I.S9(e,i.id)),I.xM(e)),s=(0,I.$L)(e),a=I.Ef(e);return{witnesses:o,selectedText:i,selectedWitness:t,textListIsVisible:(0,I.Tq)(e),accountOverlayVisible:(0,I.FG)(e),textFontSize:r,user:n,searchValue:a,showTableContent:s,searchResults:I.YE(e,a)}}),null,(function(e,t,n){var i=t.dispatch,o=e.selectedText;return et(et(et({},n),e),{},{navigationButtonClicked:function(){t.dispatch(w.DaN(!e.textListIsVisible))},onSelectedWitness:function(e){i(w.FRK(null==o?void 0:o.id,null==e?void 0:e.id))},onChangedFontSize:function(e){i(w.BUD(e))},changeShowTableContent:function(e){i(w.WkO(e))},searchChanged:function(e){i(w.fAN(e))},changeSelectSyncId:function(e){i(w.YqQ(e))}})}))((function(e){var t=(0,o.useState)(""),n=(t=(0,i.Z)(t,2))[0],s=t[1],a=(t=(0,o.useState)(!1),(t=(0,i.Z)(t,2))[0]),l=t[1],c=(t=(0,o.useState)(!1),(t=(0,i.Z)(t,2))[0]),u=t[1],d=(0,o.useRef)(),h=(t=(0,o.useRef)(),r().useRef(K().debounce((function(t){e.searchChanged(t)}),1e3)).current),p=(0,o.useCallback)((function(e){e.preventDefault(),h(n),u(!0)}),[n]),f=(0,o.useCallback)((function(){l(!a)}),[a]),g=((0,o.useEffect)((function(){!0===a&&d.current.focus(),!1===a&&h(null)}),[a]),K().isObject(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id)),m=g?e.searchResults[e.selectedText.id].results:[];return r().createElement(Ue.Z,{direction:"column",ref:t,spacing:1,sx:{paddingInline:{md:1,xs:0},paddingBlock:{md:1,xs:0},borderTop:{md:0,xs:"1px solid gray"},bgcolor:"heading.main",color:"text.primary"}}," ",r().createElement(Ue.Z,{direction:"row",spacing:1,justifyContent:"space-between"},r().createElement(we.Z,{sx:{display:"flex",gap:{md:2,sx:0},flexDirection:{md:"row",xs:"column"}}},r().createElement(Ae,null),r().createElement(xe,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),r().createElement(Qe.Z,{size:"small","aria-label":"small button group",sx:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"fit-content",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1.5},"& hr":{mx:.5}},className:ge().button_group_menu},r().createElement(Ye,{isSecondWindowOpen:e.isSecondWindowOpen}),r().createElement(qe,{handleWindowSearch:f}),r().createElement(_e,{textFontSize:e.textFontSize,onChangedFontSize:e.onChangedFontSize,onExport:e.onExport,isPanelLinked:e.isPanelLinked}),r().createElement(Fe,{changeShowTableContent:e.changeShowTableContent,showTableContent:e.showTableContent}))),r().createElement($.Z,{in:a,mountOnEnter:!0,unmountOnExit:!0},r().createElement("form",{onSubmit:p},r().createElement(Ue.Z,{direction:"row",spacing:2,position:"relative"},r().createElement(Ce.Z,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:d,value:n,onChange:function(e){return s(e.target.value)}}),r().createElement(ke.Z,{variant:"outlined",size:"small",onClick:p,style:{height:25}},"Search"),e.searchResults&&c&&r().createElement(we.Z,{sx:(0,Q.Z)({position:"absolute",top:35,right:0,zIndex:1,bgcolor:"heading.main",width:350,height:350,boxShadow:3,overflowX:"hidden"},"boxShadow",3)},0===m.length&&r().createElement("p",null,"no such word present"),g&&0<m.length&&r().createElement(Xe,{handleListItemClick:function(t){e.changeSelectSyncId(t)},searchValue:e.searchValue,results:m,selectedText:e.selectedText}),r().createElement(ue.Z,{"aria-label":"closeButton",onClick:function(){u(!1),h(null),s("")},size:"small",sx:{right:15,top:0,position:"absolute"}},r().createElement(le.Z,{fontSize:"inherit"})))))))}));var nt=n(79243),it=n(88859),ot=function(){function e(t,n){(0,l.Z)(this,e),this.annotatedText=t,this.splitter=n,this._texts=null,this._textsId=null,this._textsFinalPositions=[]}return(0,c.Z)(e,[{key:"texts",get:function(){if(!this.annotatedText)return[];if(!this._texts||this._textsId!==this.annotatedText.getUniqueId()){this._textsFinalPositions=[];var e=this.annotatedText.segmentedText,t=e.getText(),n=this.splitter(t).filter((function(e){return 0!==e}));if(0===n.length)return this._textsFinalPositions.push(t.length),[e];n[n.length-1]+1<t.length&&n.push(t.length-1);for(var i=e.segments,o=0,r=[],s=0;s<n.length;s++){var a=n[s],l=void(a=e.indexOfSegmentAtPosition(a-1));l=s==n.length-1?i.slice(o):i.slice(o,a+1),l=new nt.Z(l),r.push(l),o=a+1,0<=a&&(l=i[a],this._textsFinalPositions.push(l.end))}this._texts=r.filter((function(e){return 0<e.segments.length})),this._textsId=this.annotatedText.getUniqueId()}return this._texts||[]}},{key:"getTextsFinalPositions",value:function(){return this.texts,this._textsFinalPositions}},{key:"getTextIndexOfPosition",value:function(e){for(var t=this.getTextsFinalPositions(),n=0,i=null,o=0;o<t.length;o++){var r=t[o];if(n<=e&&e<=r){i=o;break}n=r}return null===i&&(console.warn("no index for position %d",e),i=t.length-1),i}}]),e}(),rt=n(19854),st=(p=n(91308),n.n(p)),at=n(54776),lt=(p=n(90948),n(41796)),ct=n(58719),ut=n(54386),dt=(0,p.ZP)("div")((function(e){return e=e.theme,(0,Q.Z)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:(0,lt.Fq)(e.palette.common.white,.15),"&:hover":{backgroundColor:(0,lt.Fq)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"})})),ht=(0,p.ZP)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),pt=(0,p.ZP)(ct.ZP)((function(e){return e=e.theme,{color:"inherit","& .MuiInputBase-input":(0,Q.Z)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"0",cursor:"pointer","&:focus":{width:"20ch"}})}}));function ft(){var e=[{Id:1,Title:"chapter 1",segment_id:0},{Id:2,Title:"chapter 2",segment_id:400}];return e.length,r().createElement(we.Z,{sx:{bgcolor:"heading.main",color:"text.primary",width:"100%",height:"100%",paddingInline:2}},r().createElement(ut.Z,{sx:{justifyContent:"space-between",paddingLeft:"0 !important",margin:0}},r().createElement(Ie.Z,{textTransform:"uppercase",component:"h6"},"Table Of Content"),r().createElement(dt,null,r().createElement(ht,null,r().createElement(ze.Z,null)),r().createElement(pt,{placeholder:"Search…",inputProps:{"aria-label":"search"}}))),r().createElement(we.Z,null,e.map((function(e,t){return r().createElement(we.Z,{key:"TableContent-"+t,sx:{cursor:"pointer",width:"fit-content","&:hover":{fontWeight:"bold"}}},e.Title)}))))}n(73935);var gt=n(97007),mt=n.n(gt),vt=n(56604),xt=n(84506);function yt(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){(0,Q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}gt=n(99038);var bt=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this,e)).state={segmentedText:e.segmentedText},i.textAlignmentById=i.props.textAlignmentById,i._renderedSegments=null,i._renderedHtml=null,i}return(0,c.Z)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return Tt(Tt({},t),{},{segmentedText:e.segmentedText})}))}},{key:"selectedElement",value:function(e){var t=[],n=[],i=document.getSelection();if(null!=e&&e.id.includes("s2_")&&this.props.isPanelLinked&&this.props.condition){var o=parseInt(e.id.replace("s2_","")),r=(this.props.changeSyncIdOnClick(o),this.props.changeScrollToId({id:"ua",from:"ua"}),parseInt(e.id.replace("s2_",""))),s=this.textAlignmentById.find((function(e){return r>=e.TStart&&r<e.TEnd}));if(s){for(var a=s.start;a<s.end;a++)t.push(a);for(var l=s.TStart;l<s.TEnd;l++)n.push(l);this.props.changeSelectedRange({source:t,target:n})}}i&&"Range"===i.type||(this.props.selectedSegmentId(e.id),e.id||this.props.changeSelectedRange({source:[],target:[]}))}},{key:"generateHtml",value:function(e,t){var n=t.segmentedText.segments,o='<p class="'+mt().textLine+'">';if(0===n.length)return{__html:o};for(var r=n[n.length-1].end+1,s=mt().highlight,a=mt().activeHighlight,l=null,c=0;c<n.length;c++){var u=n[c],d="",h=[];if(u.start===r)break;var p,g=null,m=(0!==u.length&&(g="s2_"+u.start),null!=(p=e.selectedTargetRange)&&p.includes(u.start)&&e.condition&&(p="light"===e.theme.palette.mode?mt().selectedRangelight:mt().selectedRangeDark,h.push(p)),0<h.length&&(d='class="'+f().apply(void 0,h)+'"'),u.text);if(e.searchStringPositions){var v=u.start,x=v,y=(m="",s);e.selectedSearchResult&&e.selectedSearchResult.start<=x&&e.selectedSearchResult.start+e.selectedSearchResult.length>x&&(y=a);for(var T=0;T<u.text.length;T++){var b,E,S,w=u.text.charAt(T);x=v+T,l?(b=l,(b=(0,i.Z)(b,2))[0],0===T&&(m+='<span class="'+y+'">'),x===b[1]?(m+=w+"</span>",l=null):T===u.text.length-1?m+=w+"</span>":m+=w):x in e.searchStringPositions?(E=(b=(0,i.Z)(e.searchStringPositions[x],2))[0],S=b[1],m+='<span class="'+y+'">'+w,T!==u.text.length-1&&x!==S||(m+="</span>"),x<S&&(l=[E,S])):m+=w}}o+="<span id="+g+" key="+g+" "+d+">"+m+"</span>"}return this._renderedSegments=n,{__html:o+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){return t=this.generateHtml(e,t),this.props.fontSize!==e.fontSize||(!this._renderedHtml||t.__html!==this._renderedHtml.__html)&&this._renderedHtml!==t&&(this._renderedHtml=t,!0)}},{key:"componentDidUpdate",value:function(){this.textAlignmentById=this.props.textAlignmentById}},{key:"render",value:function(){var e=this,t=[mt().text],n=(0===this.props.row&&t.push(mt().textFirstRow),this._renderedHtml||this.generateHtml(this.props,this.state));return this._renderedHtml||(this._renderedHtml=n),r().createElement("div",{className:mt().textContainer},r().createElement("div",{className:f().apply(void 0,t),dangerouslySetInnerHTML:n,onClick:function(t){return e.selectedElement(t.target)},style:{fontSize:this.props.fontSize,fontFamily:"var(--tibetan-fonts2)"}}))}}]),n}(r().Component);const Et=(0,gt.Z)(bt);bt=n(64726);var St=n.n(bt);function wt(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){(0,Q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ot={},kt=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this,e)).textAlignmentById=[],i.changeScrollToId=e.changeScrollToId,i.list=null,i.splitText=null,i.cache=new Z.t1({fixedWidth:!0}),i.rowRenderer=i.rowRenderer.bind((0,O.Z)(i)),i.isPanelLinked=i.props.isPanelLinked,i.activeSelection=null,i.selectedNodes=null,i._mouseDown=!1,i._activeWitness=null,i._didSetInitialScrollPosition=!1,i._modifyingSelection=!1,i.imageHeight=null,i.imageWidth=null,i.calculatedImageHeight=null,i.selectedWindow=i.props.selectedWindow,i.scrollEvent=i.scrollEvent.bind((0,O.Z)(i)),i.scrollTop=0,i}return(0,c.Z)(n,[{key:"scrollEvent",value:function(e){if(1===this.selectedWindow)return null;var t;2===this.selectedWindow&&this.isPanelLinked&&(t=[],this.textAlignmentById.map((function(e){var n=document.getElementById("s2_"+e.TStart);n&&90<n.getBoundingClientRect().top&&t.push({id:e.id,start:e.start,TStart:e.TStart,end:e.end,TEnd:e.TEnd})})),K().isEmpty(t)||2===this.selectedWindow&&this.debouncedScroll(t))}},{key:"selectedListRow",value:function(e){return e.activeAnnotation?e.splitText.getTextIndexOfPosition(e.activeAnnotation.start):null}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),this._mouseDown||this.mouseUp())}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){this._mouseDown=!1,this.activeSelection&&(this.activeSelection=null)}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,i=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&i.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"updateList",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var i=0;i<t.length;i++){var o=t[i];this.cache.clear(o)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"processProps",value:function(e){var t=this,n=!1;if((!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(this._didSetInitialScrollPosition=!(n=!0)),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),(o=this.getControlsMeasurements(e))&&(this.selectedTextIndex=o.selectedTextIndex,this.firstSelectedSegment=o.firstSelectedSegment,this.splitTextRect=o.splitTextRect,this.selectedElementId=o.selectedElementId,this.selectedElementIds=o.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var i=null,o=this.selectedListRow(this.props);if(n=this.selectedListRow(e),o&&n){i=[];for(var r=n<o?n:o,s=this.props.splitText.texts.length;r<s;r++)i.push(r)}this.updateList(!0,i)}else if(this.lineBreaksChanges(this.props,e)){n=(n=this.selectedListRow(e))||this.selectedListRow(this.props),o=this.props.splitText.texts;var a=[];if(null!==n){for(var l=n,c=o.length;l<c;l++)a.push(l);this.updateList(!0,a)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"pageBreaksChanged",value:function(e,t){return e=e.splitText.getTextsFinalPositions(),t=t.splitText.getTextsFinalPositions(),e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,i=t.activeAnnotation,o=!1;return n&&n.isType(ANNOTATION_TYPES.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(o=!0),!(!(i&&i.isType(ANNOTATION_TYPES.lineBreak)&&e.activeAnnotations)||e.activeAnnotations.hasOwnProperty(i.uniqueId))||o}},{key:"shouldResetListCache",value:function(e,t){return!(e.showImages===t.showImages&&!this.pageBreaksChanged(e,t))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=K().throttle((function(){e.calculatedImageHeight=null,e.updateList()}),500).bind(this),this.debouncedScroll=K().debounce((function(t){e.changeScrollToId({id:t[0].TStart,from:2})}),1e3),window.addEventListener("resize",this.resizeHandler),this.selectionHandler=K().debounce((function(t){e.handleSelection(t)}),200).bind(this),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.processProps(this.props),this.timer=setTimeout((function(){e.resizeHandler()}),2e3),this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(e,t){var n,i,o,r,s,a=this,l=this.props.scrollToId,c=(this.imageData!==(null==e?void 0:e.imageData)&&(this.calculatedImageHeight=null,this.updateList(!0)),this.targetId2=this.props.syncIdOnClick,this.isPanelLinked=this.props.isPanelLinked,this.selectedWindow=this.props.selectedWindow,this.props.syncIdOnSearch||null),u=this.list,d=this.props.searchResults,h=this.props.textAlignment;this.condition=(null==h||null==(o=h.target)?void 0:o.witness)===this.props.selectedWitness.id,((null==e?void 0:e.searchResults)!==(null==(o=this.props)?void 0:o.searchResults)||(null==e?void 0:e.syncIdOnSearch)!==(null==(o=this.props)?void 0:o.syncIdOnSearch))&&d&&c&&(n=this.props.splitText.getTextIndexOfPosition(c),setTimeout((function(){u.scrollToRow(n),setTimeout((function(){u.scrollToPosition(u.props.scrollTop-300)}),0)}),100)),1===this.selectedWindow&&1===l.from&&this.isPanelLinked&&this.condition&&null!==l.id&&(i=this.list,this.textAlignmentById=this.props.textAlignmentById||[],this.splitText.style.scrollBehavior="smooth",h&&this.isPanelLinked&&null!==(o=null==(e=this.textAlignmentById.find((function(e){return e.start===l.id})))?void 0:e.TStart)&&(r=this.props.splitText.getTextIndexOfPosition(o),setTimeout((function(){i.scrollToRow(r),setTimeout((function(){i.scrollToPosition(i.props.scrollTop-300)}),0)}),100))),this.isPanelLinked&&this.targetId2&&null===l.from&&1===this.selectedWindow&&null===l.id&&this.condition&&(e=null==(d=h.alignment.find((function(e){return a.targetId2>=e.source_segment.start&&a.targetId2<e.source_segment.end})))||null==(c=d.target_segment)?void 0:c.start,s=this.props.splitText.getTextIndexOfPosition(e),setTimeout((function(){u.scrollToRow(s),setTimeout((function(){u.scrollToPosition(u.props.scrollTop-300)}),0)}),100))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler),clearTimeout(this.timer)}},{key:"calculateImageHeight",value:function(){var e,t,n=null;return this.imageHeight&&this.imageWidth&&(e=this.imageWidth/this.imageHeight,t=St().pechaImage,0<(t=document.getElementsByClassName(t)).length&&(n=t[0].offsetWidth/e)),console.log(n),n}},{key:"getSelectedTextIndex",value:function(){var e,t=null;return this.props.activeAnnotation?(e=this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),t=(0,i.Z)(e,1)[0]):this.props.selectedSearchResult&&((e=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start))instanceof vt.Z?t=e.start:"number"==typeof e&&(t=e)),t?this.props.splitText.getTextIndexOfPosition(t):0}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,o=null,r=null,s=null,a=null,l=[],c=0;if(e.activeAnnotation){var u=e.activeAnnotation,d=e.splitText.annotatedText.getPositionOfAnnotation(u);if(null===(c=(0,i.Z)(d,1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;u.type===ANNOTATION_TYPES.pageBreak&&--c,u.type===ANNOTATION_TYPES.lineBreak&&--c,d=c+u.length,0<u.length&&--d,n=e.splitText.getTextIndexOfPosition(d),s=t.getBoundingClientRect()}var h=[];if(e.selectedAnnotatedSegments&&0<e.selectedAnnotatedSegments.length){h=e.selectedAnnotatedSegments;for(var p=0;p<h.length;p++){var f=h[p];if(null===o&&f instanceof vt.Z){o=f;break}}o&&(a=0===o.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(r=idForInsertion(o),idForInsertion):(r=idForSegment(o),idForSegment))}else e.activeAnnotation&&(e.activeAnnotation.isDeletion?(u=new vt.Z(c,""),r=idForDeletedSegment(u),a=idForDeletedSegment,h=[o=u]):e.activeAnnotation.isInsertion?(d=e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),(t=(0,i.Z)(d,1)[0])&&(u=new vt.Z(t,""),r=idForInsertion(u),a=idForInsertion,h=[o=u])):e.activeAnnotation.type===ANNOTATION_TYPES.pageBreak?(d=new vt.Z(c+1,""),t=new vt.Z(c,""),h=[o=d],l=[r=idForPageBreak(t)]):e.activeAnnotation.type===ANNOTATION_TYPES.lineBreak&&(u=new vt.Z(c+1,""),d=new vt.Z(c,""),h=[o=u],l=[r=idForLineBreak(d)]));if(a)for(var g=0;g<h.length;g++){var m=h[g];m instanceof vt.Z&&(m=a(m),l.push(m))}return null!=n&&o&&r&&s?{selectedTextIndex:n,firstSelectedSegment:o,selectedElementId:r,splitTextRect:s,selectedElementIds:l}:null}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,i=this.cache,r=t.selectedWitness?t.selectedWitness.id:0;return o.createElement("div",{className:St().splitText2,ref:function(t){return e.splitText=t},key:r,style:{cursor:"pointer"}},o.createElement("button",{id:"updateList2",style:{display:"none"},onClick:function(){return e.updateList(!0)}}),o.createElement(k.q,{disableWidth:!0},(function(r){return r=r.height,o.createElement(Ee.aV,{ref:function(t){return e.list=t},height:r,rowCount:t.splitText.texts.length,rowHeight:i.rowHeight,rowRenderer:n,width:1,overscanRowCount:1,deferredMeasurementCache:i,onScroll:e.scrollEvent,scrollToAlignment:"start",containerStyle:{width:"100%",maxWidth:"100%"},style:{width:"100%"}})})))}},{key:"getImageUrl",value:function(e){var t,n,i;return this.props.selectedWitness&&this.props.selectedWitness.properties?(t=(n=this.props.selectedWitness.properties)[z.f1],i=n[z.oB],n=n[z.Ey],i=Number(i)+e,z.v5+t+i+"."+n+z.WL):""}},{key:"getStringPositions",value:function(e,t,n){var i=this.props.splitText.annotatedText.getUniqueId();if((Ot=Ot.hasOwnProperty(i)?Ot:(0,Q.Z)({},i,{}))[i].hasOwnProperty(t)||(Ot[i]=(0,Q.Z)({},t,{})),Ot[i][t].hasOwnProperty(n))return Ot[i][t][n];for(var o=new(B()),r=e.getText(),s=e.segments[0].start,a=[],l=r.indexOf(t);-1!==l;)a.push(l),l=r.indexOf(t,l+1);var c={};if(0<a.length)for(var u=o.splitGraphemes(r),d=0,h=null,p=0;p<u.length;p++){var f=u[p],g=d+(f.length-1);null!==h?h+(t.length-1)<=g&&(c[h+s]=[h+s,g+s],h=null):-1!==a.indexOf(d)?t.length===f.length?c[d+s]=[d+s,g+s]:t.length>f.length&&(h=d):h=null,d+=f.length}return Ot[i][t][n]=c}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,i=e.parent,r=(e=e.style,this.props),s=this.cache,a="",l=r.showImages?St().pechaImage:null,c=this,u={},d=(r.showImages&&l&&this.calculatedImageHeight&&(u.height=this.calculatedImageHeight+"px"),r.selectedWitness&&r.selectedWitness.properties&&r.selectedWitness.properties.hasOwnProperty(z.f1)&&(a=this.getImageUrl(n)),{}),h=((h=this.props.searchValue)&&0<h.length&&r.splitText&&(d=this.getStringPositions(r.splitText.texts[n],h,n)),It(It({},e),{},{height:e.height+10}));return o.createElement(Z.Z8,{columnIndex:0,key:t,parent:i,rowIndex:n,cache:s},o.createElement("div",{key:t,style:h,ref:this.splitTextRef,id:"index2_".concat(n),className:St().splitTextRow},o.createElement("div",{className:St().splitTextRowContent},r.showImages&&o.createElement("div",{className:l,style:u},o.createElement("img",{alt:"Text related Image",className:St().image,src:a,width:"100%",height:"100%",loading:"lazy",decoding:"async",onLoad:function(e){e.target&&null===c.imageWidth&&(c.imageWidth=e.target.naturalWidth,c.imageHeight=e.target.naturalHeight,c.calculatedImageHeight=null,window.setTimeout(c.updateList.bind(c),0))}})),o.createElement(Et,{segmentedText:r.splitText.texts[n],row:n,selectedSegmentId:r.selectedSegmentId,searchStringPositions:d,textAlignmentById:r.textAlignmentById,fontSize:r.fontSize,isPanelLinked:this.props.isPanelLinked,selectedSourceRange:r.selectedSourceRange,selectedTargetRange:r.selectedTargetRange,changeSelectedRange:r.changeSelectedRange,changeSyncIdOnClick:this.props.changeSyncIdOnClick,changeScrollToId:this.props.changeScrollToId,condition:this.condition}))))}}]),n}(o.PureComponent),Zt=n(17622);function Ct(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){(0,Q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rt,Pt,Bt,Wt,Lt={},Nt={},Dt=function(e,t){var n,i,o={};for(n in t)t.hasOwnProperty(n)&&(i=t[n],(i=I.h4(e,i))&&(o[n]=i));return o},jt={};function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ht(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){(0,Q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(e){return[e.start,e.length].join("-")}bt=(0,t.connect)((function(e){var t,n,o={},r=!1,s=I.xM(e),a=I.an(e),l={},c=(a&&(t=I.S9(e,a.id)||{},(o=(n=I.y6(e,a.id))?I.vp(e,n):o)||(n=(o=t).id)),n=function(e,t){var n=null;return t&&(n=function(e,t){var n,o;return(t=I.vp(e,t))?(o=t.text,n=I.S9(e,o.id),o=I.Ei(e,o.id),n&&o?(o=function(e,t,n){if(Nt.hasOwnProperty(t.id))return[Nt[t.id].appliedAnnotations,Nt[t.id].allAnnotations];t.text;var i=I.CO(e,n.id),o=function(e,t,n){if(!I.aJ(e,t))return{};var i=I.F5(e,t);if(!i)return{};var o,r,s={};for(o in i)!i.hasOwnProperty(o)||(r=I.zG(e,n,o))&&(s[r.unique_id]=r);return Dt(e,s)}(e,t.id,n.id),r=null,s={};if(t.id!==n.id){r=I.Zt(e,t.id);var a,l,c={};for(a in i)i.hasOwnProperty(a)&&((l=i[a]).creator_witness!==t.id||r.hasOwnProperty(l.unique_id)?l.creator_witness===t.id&&(s[l.unique_id]=l):c[l.unique_id]=l);o=At(At({},Dt(e,c)),o),i=c}return n=Dt(e,i),s=Dt(e,s),0<Object.keys(s).length&&(n=At(At({},n),s)),n=At(At({},o),n),n=K().pickBy(n,(function(e,n){return!(t&&e.type===xt.DT.lineBreak&&e.creatorWitness.id!==t.id)})),I.Ty(e,t.id)&&I.aJ(e,t.id)&&(Nt[t.id]={appliedAnnotations:o,allAnnotations:n}),[o,n]}(e,t,n),o=(e=(0,i.Z)(o,2))[0],e[1],e=function(e){return jt[e.id]||(jt[e.id]=(0,Zt.Z)(e.content||"")),jt[e.id]}(n),new it.ZP(e,Object.values(o),(function(e){return(0,Zt.Z)(e).segments}),n,t)):null):(console.warn("no witness"),null)}(e,t))&&(Lt[t]=n),n}(e,null==(n=o)?void 0:n.id),e.data2.loadingWitnesses),u=(n&&(l=function(e,t){if(e===Rt&&t===Pt&&e.version===Wt)return Bt;for(var n={},o={},r=0;r<t.length;r++)!function(r){var s=t[r],a=(r=e.getPositionOfAnnotation(s),(r=(0,i.Z)(r,2))[0]),l=r[1];if(null!=a)if(0===l){if(s.isInsertion){if(r=qt(s),r=o[r])return r.map((function(e){return n[e].push(s)}));a=INSERTION_KEY+a}s.isDeletion&&0<s.length&&(a=DELETION_KEY+a),s.type===ANNOTATION_TYPES.pageBreak&&(a=PAGE_BREAK_KEY+a),s.type===ANNOTATION_TYPES.lineBreak&&(a=LINE_BREAK_KEY+a),void 0===n[a]&&(n[a]=[]),-1===n[a].indexOf(s)&&n[a].push(s)}else{for(var c=[],u=a;u<a+l;u++)void 0===n[u]&&(n[u]=[]),-1===n[u].indexOf(s)&&n[u].push(s),c.push(u);s.isInsertion&&(r=qt(s),o[r]=c)}}(r);return Pt=t,Bt=n,Wt=(Rt=e).version,n}(n,Object.values([]))),I.tt(e)),d=I.Hd(e),h=I.UO(e),p=I.X3(e),f=I.pt(e),g=I.Ef(e);return{text:a,textFontSize:s,annotatedText:n,selectedWitness:o,loading:c,annotationPositions:l,pageImagesVisible:r=o.id!==(null==(a=t)?void 0:a.id)?(0,I.Hn)(e):r,isSecondWindowOpen:(0,I.qB)(e),imageData:(0,I.n$)(e),isPanelLinked:u,selectedImage:(0,I.Px)(e),isImagePortrait:(0,I.Cb)(e),isPanelVisible:(0,I.K2)(e),scrollToId:d,syncIdOnClick:h,textAlignment:p,textAlignmentById:I.LZ(e),selectedWindow:f,selectedSourceRange:(0,I.xX)(e),selectedTargetRange:(0,I.rv)(e),showTableContent:I.$L(e),searchResults:(0,I.YE)(e,g),searchValue:g,syncIdOnSearch:I.QE(e)}}),null,(function(e,t,n){function i(e){return-1!==e.indexOf("ds2_")}function o(e){return-1!==e.indexOf("i2_")}function r(e){return!o(e)&&i(e)?e.substr(3):e.substr(2)}var s=e.annotatedText,a=e.annotationPositions,l=t.dispatch;return zt(zt(zt({},n),e),{},{onChangedFontSize:function(e){l(w.$4v(e))},didSelectSegmentIds:function(t){if(0!==t.length){var n,l=[],c=[],u=function(e,t){var n,i,o,r,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return i=!(n=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return n=e.done,e},e:function(e){i=!0,o=e},f:function(){try{n||null==s.return||s.return()}finally{if(i)throw o}}};if(Array.isArray(e)||(s=function(e,t){var n;if(e)return"string"==typeof e?_t(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);try{for(u.s();!(n=u.n()).done;){var d,h,p,f=n.value;i(f)||o(f)||(d=r(f),h=s.segmentedText.segmentAtPosition(d),c.push(h),(p=a[h.start])&&(l=l.concat(p)))}}catch(t){u.e(t)}finally{u.f()}l=K().uniqWith(l,(function(e,t){return e.toString()==t.toString()}));var g,m=K().intersectionWith(l,s.annotations,(function(e,t){return e.toString()==t.toString()})),v=getSegmentsRange(c,m,l,e.annotatedText);v?(g=s.getBaseAnnotation(v.start,v.length),v.annotation||0<m.length&&(m=s.segmentedText.segmentsInRange(v.start,v.length).reduce((function(e,t){return e+t.text}),""),e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new Annotation(WORKING_VERSION_ANNOTATION_ID,getTextWorkingWitness(e.text),g.start,g.length,m,ANNOTATION_TYPES.variant,e.selectedWitness,e.user))):console.warn("No range for selected segment ids: %o",t)}},changeScrollToId:function(e){return l(w.VZO(e))},changeSyncIdOnClick:function(e){l(w.a_O(e))},changeSelectedWindow:function(e){l(w.skj(e))},changeSelectedRange:function(e){l(w.S7E(e))},changeShowTableContent:function(e){l(w.WkO(e))},selectedSegmentId:function(t){var n=r(t),s=n;o(t)?s=INSERTION_KEY+n:i(t)?s=DELETION_KEY+n:-1!==t.indexOf("p2_")?s=PAGE_BREAK_KEY+n:-1!==t.indexOf("l2_")&&(s=LINE_BREAK_KEY+n),a[s],e.activeAnnotation&&e.activeAnnotation&&(t=w.Enf(null),l(t))}})}))((function(e){var t=(0,o.useRef)();function n(){e.changeSelectedWindow(2)}e.text&&e.text,(0,o.useEffect)((function(){var e=t.current;return e.addEventListener("mouseenter",n),function(){e.removeEventListener("mouseenter",n)}}),[]);var i=null,s=e.selectedWindow,a=[e.annotatedText&&e.text&&!e.loading?(a=e.paginated?positionSplitter(e.pageBreaks):(0,rt.Z)(800,/^།[\s]+(?!།[\s]+)/,2,5),i=new ot(e.annotatedText,a),r().createElement(kt,{splitText:i,limitWidth:!1,selectedSegmentId:e.selectedSegmentId,annotationPositions:e.annotationPositions,selectedAnnotatedSegments:null==e?void 0:e.selectedAnnotatedSegments,showImages:e.pageImagesVisible,selectedWitness:e.selectedWitness,key:12,fontSize:e.textFontSize,scrollToId:e.scrollToId,syncIdOnClick:e.syncIdOnClick,textAlignment:e.textAlignment,textAlignmentById:e.textAlignmentById,isPanelLinked:e.isPanelLinked,changeScrollToId:e.changeScrollToId,changeSyncIdOnClick:e.changeSyncIdOnClick,selectedWindow:s,selectedSourceRange:e.selectedSourceRange,selectedTargetRange:e.selectedTargetRange,changeSelectedRange:e.changeSelectedRange,searchResults:e.searchResults,searchValue:e.searchValue,selectedText:e.text,syncIdOnSearch:e.syncIdOnSearch})):r().createElement("div",{key:"key-".concat(Math.random())})];return G().ThirdWindowHeight,r().createElement(we.Z,{ref:t,className:st().textDetail2,sx:{height:"100%",flex:1,bgcolor:"navbar.main",color:"texts.main"}},r().createElement(tt,null),r().createElement(De.Z,null),r().createElement(P(),{loaded:!e.loading}),r().createElement(we.Z,{style:{display:"flex",height:"100%",width:"100%",position:"relative"}},r().createElement(we.Z,{style:{flex:1},className:f()(st().textContainer2,U().flex)},e.loading?r().createElement("div",null):a),r().createElement(at.Z,{direction:"left",in:e.showTableContent,container:t.current,unmountOnExit:!0,mountOnEnter:!0},r().createElement(we.Z,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0}},r().createElement(ft,null)))))}));const Vt=r().memo(bt);var Mt,Ft,Ut=n(76818),Qt=n(81718),Gt=n(90696),Yt=(bt=n(9908),n.n(bt));function Kt(){return(Kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function $t(e){return r().createElement("svg",Kt({viewBox:"0 0 24 24"},e),Mt=Mt||r().createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),Ft=Ft||r().createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))}function Xt(e){var t=(0,o.useState)(null),n=((t=(0,i.Z)(t,2))[0],t[1],t=r().createElement("p",null,"<",r().createElement(v.Z,{id:"annotation.delete"}),">"),""!==(n=e.annotationData.content).trim()&&(250<n.length&&(n=n.substr(0,250)+"…"),t=r().createElement("p",null,n)),[Yt().annotationDetail]);return e.isActive&&n.push(Yt().active),n=f().apply(void 0,n),r().createElement("div",{className:n,onClick:e.selectAnnotationHandler},r().createElement("div",{className:Yt().annotationHeader},e.isActive&&r().createElement("div",{className:Yt().activeIcon},r().createElement($t,{style:{fill:g().activeButton},width:15,height:15})),r().createElement("h3",null,e.annotationData.name),e.isLoggedIn&&e.isActive&&r().createElement("button",{style:{display:"none"},className:Yt().edit,onClick:e.editAnnotationHandler,id:"editBtn"})),!e.isWorkingSection&&t)}function Jt(e){var t=e.annotationData.content,n=[Yt().annotationDetail],i=null;return e.isActive&&n.push(Yt().active),n=f().apply(void 0,n),r().createElement("div",{className:n},r().createElement("h3",null,e.annotationData.name),r().createElement("div",{className:Yt().editing},r().createElement("textarea",{defaultValue:t,autoFocus:!0,onInput:function(e){i.style.height="5px",i.style.height=i.scrollHeight+"px"},ref:function(e){return i=e}}),r().createElement("div",{className:Yt().actionButtons},r().createElement("div",{className:Yt().save,onClick:function(){i&&e.saveAnnotationHandler(i.value)}},r().createElement(v.Z,{id:"annotation.save"})),r().createElement("div",{className:Yt().cancel,onClick:e.cancelAnnotationHandler},r().createElement(v.Z,{id:"annotation.cancel"})))))}bt=n(17084);var en=n.n(bt),tn=(bt=n(17716),n.n(bt)),nn=(bt=n(56096),n.n(bt));function on(e){return r().createElement("div",{className:nn().button,title:e.title,onClick:e.onClick},"+")}bt=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"render",value:function(){var e,t=null;return this.props.buttonOnClick&&(e=this.props.buttonTitleId?this.props.intl.formatMessage({id:this.props.buttonTitleId}):"",t=r().createElement(on,{title:e,onClick:this.props.buttonOnClick})),r().createElement("h3",{className:tn().heading},r().createElement("span",{className:tn().title},r().createElement(v.Z,{id:this.props.titleId})),t&&r().createElement("div",{className:tn().button},t))}}]),n}(r().Component),(0,s.ZP)(bt),bt=n(18141);var rn,sn,an,ln=n.n(bt),cn=(bt=n(84512),n.n(bt)),un=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this,e)).state={content:e.note.content},i}return(0,c.Z)(n,[{key:"save",value:function(){var e=this.textarea?this.textarea.value:"";this.props.saveNote(this.props.note,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"handleChange",value:function(e){var t=e.target instanceof HTMLTextAreaElement?e.target.value:"";this.setState((function(e,n){return{content:t}}))}},{key:"render",value:function(){var e=this;return r().createElement("div",{className:ln().editorContainer},r().createElement("textarea",{className:ln().textEditor,ref:function(t){return e.textarea=t},value:this.state.content,onChange:this.handleChange.bind(this)}),r().createElement("div",{className:cn().buttonContainer},r().createElement("div",{className:cn().save,onClick:this.save.bind(this)},r().createElement(v.Z,{id:"annotation.save"})),r().createElement("div",{className:cn().cancel,onClick:this.cancel.bind(this)},r().createElement(v.Z,{id:"annotation.cancel"}))))}}]),n}(r().Component),dn=(bt=n(19090),n.n(bt)),hn=(n(90504),bt=n(47670),n.n(bt)),pn=n(68415),fn=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"render",value:function(){return r().createElement("div",{className:hn().answer},r().createElement("p",{className:en().text,dangerouslySetInnerHTML:{__html:this.props.answer.content}}),r().createElement("p",{className:en().subTitle},r().createElement(v.Z,{id:"question.answeredBy"})," ",this.props.answer.name,","," ",r().createElement(pn.FormattedDate,{value:this.props.answer.created})))}}]),n}(r().Component),gn=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"render",value:function(){var e=z.t$+this.props.question.topicId,t=[],n=this.props.question.answers;console.log(n);for(var i=0;i<n.length;i++){var o=n[i];t.push(r().createElement(fn,{answer:o,key:"answer_"+o.created}))}var s=0<this.props.question.name.length?this.props.question.name:this.props.question.username;return r().createElement(we.Z,{className:f()(dn().question,en().padding),sx:{boxShadow:2}},r().createElement("span",{className:f()(dn().threadLink,en().text)},r().createElement("a",{href:e,target:"_blank"},r().createElement(v.Z,{id:"question.viewThread"}))),r().createElement("p",{className:en().text,dangerouslySetInnerHTML:{__html:this.props.question.content}}),r().createElement("p",{className:en().subTitle},s,","," ",r().createElement(pn.FormattedDate,{value:this.props.question.created})),t)}}]),n}(r().Component),mn=(bt=n(76600),n.n(bt)),vn=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this,e)).state={content:e.question.content},i}return(0,c.Z)(n,[{key:"save",value:function(){var e=this.textarea?this.textarea.value:"";this.props.saveQuestion(this.props.question,this.props.defaultTitle,e)}},{key:"cancel",value:function(){this.props.cancel()}},{key:"handleChange",value:function(e){var t=e.target instanceof HTMLTextAreaElement?e.target.value:"";this.setState((function(e,n){return{content:t}}))}},{key:"render",value:function(){var e=this;return r().createElement("div",{className:mn().editorContainer},r().createElement("div",null,this.props.questionQuote),r().createElement("textarea",{className:mn().textEditor,ref:function(t){return e.textarea=t},value:this.state.content,onChange:this.handleChange.bind(this)}),r().createElement("div",{className:cn().buttonContainer},r().createElement("div",{className:cn().save,onClick:this.save.bind(this)},r().createElement(v.Z,{id:"annotation.save"})),r().createElement("div",{className:cn().cancel,onClick:this.cancel.bind(this)},r().createElement(v.Z,{id:"annotation.cancel"}))))}}]),n}(r().Component),xn=(bt=n(91337),n.n(bt)),yn=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"render",value:function(){return r().createElement("div",{className:f()(xn().loading,en().text)},r().createElement(P(),{loaded:!1,scale:.25,position:"relative",top:"50%",left:"50%",lines:9,width:8,length:8,radius:14}),"Loading questions...")}}]),n}(r().Component),Tn=(bt=n(48499),n.n(bt)),bn=n(41733),En=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"delete",value:function(){this.props.delete&&this.props.delete(this.props.note)}},{key:"edit",value:function(){this.props.edit&&this.props.edit(this.props.note)}},{key:"render",value:function(){return r().createElement(we.Z,{className:Tn().note,sx:{boxShadow:2}},r().createElement("p",null,"Note:"),r().createElement("div",{className:Tn().header},r().createElement("h4",{className:Tn().info},this.props.note.creatorUser.name),this.props.delete&&r().createElement("div",{className:Tn().delete,onClick:this.delete.bind(this)},r().createElement(ue.Z,{"aria-label":"delete",size:"small"},r().createElement(bn.Z,{fontSize:"inherit"})))),r().createElement("div",{className:Tn().content,onClick:this.edit.bind(this)},this.props.note.content))}}]),n}(r().Component);function Sn(){return(Sn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function wn(e){return r().createElement("svg",Sn({viewBox:"0 0 30 40",fill:"currentColor"},e),rn=rn||r().createElement("path",{d:"M3 0h24v15H3z"}),sn=sn||r().createElement("path",{stroke:"currentColor",strokeWidth:3,d:"M0 20h8M11 20h8M22 20h8"}),an=an||r().createElement("path",{d:"M3 25h24v15H3z"}))}bt=n(41931);var In,On,kn,Zn,Cn,An=n.n(bt);function Rn(){return(Rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function Pn(e){return r().createElement("svg",Rn({viewBox:"0 0 24 24"},e),In=In||r().createElement("path",{d:"M3 18h12v-2H3v2zM3 6v2h18V6H3zm0 7h18v-2H3v2z"}),On=On||r().createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))}function Bn(){return(Bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function Wn(e){return r().createElement("svg",Bn({viewBox:"0 0 24 24",fill:"currentColor"},e),kn=kn||r().createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),Zn=Zn||r().createElement("path",{d:"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z"}))}function Ln(){return(Ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function Nn(e){return r().createElement("svg",Ln({viewBox:"0 0 512 512"},e),Cn=Cn||r().createElement("path",{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"}))}const Dn=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(){return(0,l.Z)(this,n),t.call(this)}return(0,c.Z)(n,[{key:"render",value:function(){var e=null!=this.props.addPageBreak,t=null!=this.props.addLineBreak;return r().createElement(r().Fragment,null,r().createElement("div",{className:An().header},r().createElement(b,{noBezel:!0,icon:r().createElement(Pn,{width:15,height:15,style:{fill:"#fff"}}),backgroundColor:"transparent",onClick:this.props.addNote,disabled:!this.props.addNote,align:"center",tooltipTitle:"Note",shortcut:"n"}),r().createElement(b,{noBezel:!0,icon:r().createElement(Wn,{width:15,height:15,style:{fill:"#fff"}}),onClick:this.props.addQuestion,disabled:!this.props.addQuestion,align:"left",backgroundColor:"transparent",tooltipTitle:"Question",shortcut:"q"}),r().createElement(b,{noBezel:!0,color:"#fff",fontSize:"".concat(15,"px"),icon:"¶",onClick:this.props.addLineBreak,disabled:!t,align:"left",backgroundColor:"transparent",tooltipTitle:"LineBreak",shortcut:"l"}),r().createElement(b,{noBezel:!0,icon:r().createElement(wn,{width:15,height:15,style:{fill:"#fff"}}),onClick:this.props.addPageBreak,disabled:!e,align:"left",backgroundColor:"transparent",tooltipTitle:"PageBreak",shortcut:"p"}),r().createElement(b,{onClick:this.props.editAnnotationHandler,backgroundColor:"transparent",noBezel:!0,icon:r().createElement(Nn,{width:15,height:15,style:{fill:"#fff"}}),tooltipTitle:"Edit",shortcut:"e"})))}}]),n}(r().Component);bt=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(e){return(0,l.Z)(this,n),(e=t.call(this,e)).controls=null,e.arrow=null,e.arrowDs=null,e}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){this.updatePosition()}},{key:"componentDidUpdate",value:function(){setTimeout(this.updatePosition.bind(this),0)}},{key:"updatePosition",value:function(){var e=this.getMeasurements();if(this.props.inline&&this.controls&&this.arrow&&e){var t=this.controls,n=t.offsetHeight,i=t.offsetWidth,o=this.arrow,r=e.bottomGap,s=r<0||n<r,a=e.top,l=e.viewPortWidth||0,c=e.left,u=c+e.width;if(o.style.display="none",this.props.selectedElementIds)for(var d=0,h=0,p=0;p<this.props.selectedElementIds.length;p++){var f,g,m=this.props.selectedElementIds[p];(m=document.getElementById(m))&&(g=(f=m.offsetLeft)+m.offsetWidth,f<d?(m.offsetTop,m.offsetHeight,c=f,u=h=g):h<g&&(h=g),f<c&&(c=f),u<g&&(u=g),d=f)}var v=u-c,x=3,y=!1,T=0;(y=!s&&r<n||y)?(o.className=en().arrowLeft,x=c-i-o.offsetWidth<0?4:2):(c-(s=i/2-v/2)<0&&(T=Math.abs(c-s)),l<u+s&&(T=l-(u+s))),3===x?(s=l=0,this.arrow&&(this.arrow.className=en().arrowTop,s=i/2-this.arrow.offsetWidth/2-T,this.arrow.style.left=(s=s<0?0:s)+"px",l=this.arrow.offsetHeight,this.arrow.style.top=0-l+"px"),t.style.top=a+e.height+l+"px",t.style.left=c+v/2-i/2+T+"px"):y?(o.className=en().arrowRight,s=o.offsetHeight,l=e.top+e.height/2-s/2,e.top+e.height+r-l<n&&(l=e.top+e.height+r-n),2===x?(o.style.left=i-2+"px",t.style.left=c-i-o.offsetWidth+"px"):(o.className=en().arrowLeft,o.style.left=-o.offsetWidth+"px",t.style.left=c+v+o.offsetWidth+"px"),o.style.top=e.top-l+e.height/2-s/2+"px",t.style.top=l+"px"):t.style.top=a+"px"}}},{key:"getMeasurements",value:function(){var e,t,n,i,o,r,s,a,l,c,u,d;return this.props.selectedElementIds?(u=this.props.selectedElementIds[this.props.selectedElementIds.length-1],u=document.getElementById(u),e=this.props.selectedElementIds[0],e=document.getElementById(e),t=this.props.splitTextRect,n=0,this.props.list&&this.props.list.Grid.state.scrollTop,this.props.pechaImageClass&&(n=document.getElementsByClassName(this.props.pechaImageClass)[0].offsetHeight),u?(n=u.offsetTop+n,i=u.offsetTop,o=u.offsetLeft,r=u.offsetWidth,s=u.offsetHeight,a=n,c=null,l=d=0,u&&t&&(u=u.getBoundingClientRect(),l=t.height+t.top-u.bottom,c=t.width),e&&t&&(u=e.getBoundingClientRect(),d=t.height-u.top),{top:n,textTop:i,rowTop:a,left:o,width:r,height:s,topGap:d,bottomGap:l,viewPortWidth:c}):(console.warn("no valid element found in getMeasurements, elementId: %s",this.props.selectedElementId),{top:0,textTop:0,rowTop:0,left:0,width:1,height:1,topGap:0,bottomGap:0,viewPortWidth:1})):null}},{key:"render",value:function(){var e,t,n=this,i=this.props,r=[],s=[],a=null,l=null,c=i.user.isLoggedIn||!1,u=!1,d=(i.activeAnnotation&&(i.activeAnnotation.isType(xt.DT.pageBreak)||i.activeAnnotation.isType(xt.DT.lineBreak))&&(u=!0),i.annotationsData?(i.annotationsData.map((function(e){var t,a=!1,l=!1;e.isTemporary?l=a=!0:i.temporaryAnnotation||e.annotation.uniqueId!=i.activeAnnotation.uniqueId||(l=!0),a?(t=o.createElement(Jt,{annotationData:e,key:e.annotation.uniqueId,isActive:l,saveAnnotationHandler:function(t){i.saveAnnotation(e.annotation,t)},cancelAnnotationHandler:function(){i.cancelEditAnnotation(e.annotation)},isLoggedIn:c,selectAnnotationHandler:function(){},editAnnotationHandler:function(){}}),s.push(t)):(t=o.createElement(Xt,{isWorkingSection:!1,fontSize:i.fontSize,annotationData:e,key:e.annotation.uniqueId,isActive:l,selectAnnotationHandler:function(){c&&!a&&i.didSelectAnnotation(e.annotation)},editAnnotationHandler:function(){c&&!a&&(n.annotation=e.annotation,i.editAnnotation(e.annotation))},isLoggedIn:c}),r.push(t))}),this),1==!i.user.isLoggedIn&&(a=o.createElement("div",{className:en().anonymousMessage,style:{position:"relative",width:"fit-content",border:"1px solid gray",paddingInline:10}},o.createElement(v.Z,{id:"annotations.loginMessage",values:{loginLink:o.createElement(o.Fragment,null,o.createElement(v.Z,{id:"annotations.loginLink"}))}})))):l=o.createElement("div",{className:en().nothingSelected},"Nothing Selected"),null),h=!this.props.selectedWitness.isWorking,p=null,m=!this.props.selectedWitness.isWorking,x=(c&&!this.props.selectedWitness.isWorking&&(e=[],t=[],this.props.availableAnnotations&&(e=this.props.availableAnnotations.filter((function(e){return e.type===xt.DT.pageBreak&&e.creatorWitness.id===n.props.selectedWitness.id})),t=this.props.availableAnnotations.filter((function(e){return e.type===xt.DT.lineBreak&&e.creatorWitness.id===n.props.selectedWitness.id}))),0<e.length&&(d=o.createElement("div",{className:en().breakButtons},o.createElement(b,{title:"Page Break",accessoryType:"DELETE",icon:o.createElement(wn,{width:20,height:20}),onClick:function(){n.props.deleteAnnotation(e[0])},isActive:!0,backgroundColor:g().activeButton})),h=!1),0<t.length&&(p=o.createElement("div",{className:en().breakButtons},o.createElement(b,{title:"Line Break",accessoryType:"DELETE",icon:"¶",onClick:function(){n.props.deleteAnnotation(t[0])},isActive:!0,backgroundColor:g().activeButton})),m=!1),(m=!!h&&m)||(h=!1)),null),y={},T=(i.temporaryNotes&&0<i.temporaryNotes.length&&(x=i.temporaryNotes.map((function(e){var t="NOTE_"+e.uniqueId;return e.basedOn&&(y[e.basedOn.uniqueId]=e.uniqueId),o.createElement(un,{note:e,key:t,saveNote:i.saveAnnotation,cancel:function(){return i.cancelEditAnnotation(e)}})}))),null),E=(i.notes&&0<i.notes.length&&(T=i.notes.filter((function(e){return!y.hasOwnProperty(e.uniqueId)})).map((function(e){var t="NOTE_"+e.uniqueId;return o.createElement(En,{note:e,key:t,delete:n.props.deleteAnnotation,edit:n.props.editNote})}))),null),S={},w=(i.temporaryQuestions&&0<i.temporaryQuestions.length&&i.questionQuote&&(E=i.temporaryQuestions.map((function(e){S[e.uniqueId]=e.uniqueId;var t="QUESTION_"+e.uniqueId;return o.createElement(vn,{question:e,questionQuote:i.questionQuote,defaultTitle:i.selectedWitness.text.name,key:t,saveQuestion:i.saveQuestion,cancel:function(){return i.cancelEditAnnotation(e)}})}))),[]),I=!1;if(i.questions&&0<i.questions.length){for(var O=[],k=0;k<i.questions.length;k++){var Z=i.questions[k];!S.hasOwnProperty(Z.uniqueId)&&i.questionsData.hasOwnProperty(Z.uniqueId)&&(i.questionsData[Z.uniqueId].loading&&(I=!0),O=O.concat(i.questionsData[Z.uniqueId].questions))}w=O.map((function(e){return e.annotationUniqueId,o.createElement(gn,{question:e,key:"question_"+e.annotationUniqueId})}))}var C=null,A=(0<w.length&&(C=o.createElement("h3",{className:en().sectionHeading},"Questions")),null),R=(I&&(A=o.createElement(yn,null)),0===i.questions.length&&0===i.temporaryQuestions.length),P=[en().annotationControls],B=(i.inline&&P.push(en().inline),!0);return(a||u)&&(B=!1),o.createElement("div",{className:f().apply(void 0,P),ref:function(e){return n.controls=e}},B&&o.createElement(Dn,{addPageBreak:h?i.addPageBreak:null,addLineBreak:m?i.addLineBreak:null,addNote:c&&!x?function(){return i.addNote()}:null,addQuestion:R?i.addQuestion:null,closeAnnotation:i.closeAnnotation,editAnnotationHandler:function(){var e=document.getElementById("editBtn");null!=e&&e.click()},userLoggedIn:c}),o.createElement("div",{className:en().annotationContent},a,l,!u&&s,!u&&r,d,p,x,T,C,E,A,w),o.createElement("div",{className:en().arrow,ref:function(e){return n.arrow=e}}))}}]),n}(o.Component),bt=o.memo(bt);var jn=n(97762);function _n(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){(0,Q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zn(e,t,n,i){var o=[],r=t.filter((function(e){return e.isWorking||e.isBase})).map((function(e){return e.name}));if(e){for(var s={},a=0;a<e.length;a++)!function(t){var n=e[t];t=n.content+n.start,n.isTemporary?(s[qn]={name:n.getSourceName(),content:n.content,id:n.uniqueId,isTemporary:!0,annotation:n},r=r.filter((function(e){return e!==n.getSourceName()})),t=qn):r=s[t]?(s[t].name+=" "+(0,A.Z)(n.getSourceName()),r.filter((function(e){return e!==n.getSourceName()}))):(s[t]={name:(0,A.Z)(n.getSourceName()),content:n.content,id:n.uniqueId,userCreated:n.userCreated,annotation:n},r.filter((function(e){return e!==n.getSourceName()}))),!n.userCreated&&n.creatorWitness.isWorking?s[t].isWorking=!0:s[t].isWorking=!1}(a);r.unshift(n);var l=r;"བྱང་ཆུབ་སེམས་དཔའི་སྤྱོད་པ་ལ་འཇུག་པ་བཞུགས་སོ།"!==(null==i?void 0:i.name)&&(l=r.filter((function(e){return"Dominant"!==e}))),o=Object.keys(s).reduce((function(e,t){return(t=s[t]).isWorking&&(t.name=l.reduce((function(e,t){return e+" "+(0,A.Z)(t,";")}),"")),e.push(t),e}),[])}return o}var qn=-3;const Vn=(0,t.connect)((function(e,t){var n=I.PR(e),o=I.ZT(e),s=t.activeAnnotation,a=t.inline,l=I.zt(e);if(l||o&&(l=I.NW(e,o.id)),!s||!l)return{annotationsData:null,activeAnnotation:null,baseAnnotation:null,availableAnnotations:null,user:n,temporaryAnnotation:null,inline:null,firstSelectedSegment:null,splitTextRect:null,selectedWitness:null};var c=function(e,t,n,i,o){return 0<(e=I.$v(e,n.id,i,o,t)).length?e[0]:null}(e,xt.DT.variant,l,s.start,s.length),u=function(e,t,n,o){var r=[],s=(n&&t.naturalId===n.naturalId||r.push(t),n&&r.push(n),e.getPositionOfAnnotation(t)),a=(s=(0,i.Z)(s,2))[0];if(s=s[1],a){s=a+s;var l,c=[];t.isInsertion?((l=o["i"+a])&&(c=c.concat(l)),(l=o[String(a)])&&(c=c.concat(l))):((l=o[String(a)])&&(c=l),(a=o[String(s)])&&(c=c.concat(a)));for(var u=0;u<c.length;u++){var d=c[u];d.start===t.start&&d.length===t.length?n&&d.naturalId===n.naturalId||r.push(d):e.activeWitness.isWorking||d.type!==xt.DT.pageBreak&&d.type!==xt.DT.lineBreak||r.push(d)}r=K().uniqWith(r,(function(e,t){return e.id===t.id}))}return r}(t.annotatedText,s,c,t.annotationPositions),d=u.filter((function(e){return e.type===xt.DT.variant})),h=(d=zn(d,p=I.e6(e),E=I.i0(e,"annotation.workingEdition","Working"),o),o=null,s.id==it.y9?o=s:(h=t.annotatedText.getPositionOfAnnotation(s),S=(h=(0,i.Z)(h,2))[0],h=h[1],d=null===S||null===h?null:(S=zn([o=t.annotatedText.getBaseAnnotation(S,h)],p,E),[].concat((0,be.Z)(S),(0,be.Z)(d)))),d&&d.sort((function(e,t){return e.isTemporary?-1:t.isTemporary?1:e.userCreated?-1:!t.userCreated&&e.annotation.id&&t.annotation.id?e.annotation.id-t.annotation.id:1})),u.filter((function(e){return e.type===xt.DT.note}))),p=I.$v(e,l.id,s.start,s.length,xt.DT.note),f=u.filter((function(e){return e.type===xt.DT.question})),g={};if(0<f.length)for(var m=0;m<f.length;m++){var v=f[m],x=(g[v.uniqueId]={},I.Ij(e,v));g[v.uniqueId].loading=x,x=I.tI(e,v.uniqueId),g[v.uniqueId].questions=x}var y,T,b,E,S=null,w=(0<(E=I.$v(e,l.id,s.start,s.length,xt.DT.question)).length&&(T=E[0],T=t.annotatedText.getPositionOfAnnotation(T),w=(T=(0,i.Z)(T,2))[0],T=T[1],w&&(w=t.annotatedText.segmentedText.extractTextAroundPosition(w,T=T||w+1,["།"," "]),w=(T=(0,i.Z)(w,3))[0],y=T[1],T=T[2],b=document.location.href,S=r().createElement("blockquote",null,w,r().createElement("a",{href:b},y),T))),(0,I.bK)(e));return{annotationsData:d,activeAnnotation:s,baseAnnotation:o,availableAnnotations:u,user:n,temporaryAnnotation:c,inline:a,firstSelectedSegment:t.firstSelectedSegment,splitTextRect:t.splitTextRect,selectedWitness:l,notes:h,temporaryNotes:p,questions:f,temporaryQuestions:E,questionsData:g,questionQuote:S,fontSize:w}}),null,(function(e,t,n){var o=t.dispatch;if(0<e.questions.length)for(var r=0;r<e.questions.length;r++){var s=e.questions[r],a=!0;(a=(!e.questionsData.hasOwnProperty(s.uniqueId)||!(0<e.questionsData[s.uniqueId].questions.length||e.questionsData[s.uniqueId].loading))&&a)&&o(new w.fkv(s))}function l(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(){var r=n.activeAnnotation,s=(r=new xt.ZP(null,r.witness,r.end+1,0,null,t,e.selectedWitness,e.user),I.gm(e.selectedWitness)),a=[];a.push(w.iAb(r)),a.push(w.oaZ(r.uniqueId,s)),i?a.push(w.Enf(r)):a.push(w.Enf(null)),o((0,_.$C)(a))}}function c(t,n){var i,r,s;t.isTemporary?(i=e.selectedWitness,i=I.gm(i),(n=new xt.ZP(t.id,t.witness,t.start,t.length,n,t.type,t.creatorWitness,e.user,t.uniqueId,t.basedOn)).isSaved=t.isSaved,r=[],s=null,s=n.isSaved?w.qTN:w.iAb,r.push(s(n)),r.push(w.uGD(t)),r.push(w.oaZ(n.uniqueId,i)),n.type===xt.DT.variant&&r.push(w.Enf(n)),o((0,_.$C)(r))):console.warn("Tried to save a non-temporary annotation: %o",t)}return Hn(Hn(Hn({},e),n),{},{closeAnnotation:function(){var t;e.activeAnnotation&&(t=w.Enf(null),o(t))},didSelectAnnotation:function(t){var n=t.id==it.y9?e.baseAnnotation:K().find(e.availableAnnotations,(function(e){return e.uniqueId==t.uniqueId}))||null,i=[],r=e.selectedWitness,s=I.gm(r);t.uniqueId!=e.activeAnnotation.uniqueId&&(r.isWorking?(t.id!=it.y9&&i.push(w.oaZ(n.uniqueId,s)),e.activeAnnotation.id!=it.y9&&i.push(w.OS1(e.activeAnnotation.uniqueId,s))):e.activeAnnotation.creatorWitness.id===r.id?(i.push(w.FFx(e.activeAnnotation.uniqueId,s)),n.id!==it.y9&&i.push(w.oaZ(n.uniqueId,s))):(n.creatorWitness.id===r.id?i.push(w.SDX(n.uniqueId,s)):n.id!==it.y9&&i.push(w.oaZ(n.uniqueId,s)),e.activeAnnotation.id!==it.y9&&i.push(w.OS1(e.activeAnnotation.uniqueId,s))),i.push(w.Enf(n)),o((0,_.$C)(i)))},editAnnotation:function(t){var n=t.isWorkingAnnotation||t.userCreated||t.id===it.y9?null:t;n=new xt.BN(n,t.witness,t.start,t.length,t.content,t.type,e.selectedWitness,e.user),t.userCreated&&(n.uniqueId=t.uniqueId,n.isSaved=t.isSaved),o(w.tBV(n,!0))},saveAnnotation:c,cancelEditAnnotation:function(e){var t;e.isTemporary?(t=w.uGD(e),o(t)):console.warn("Tried to call cancelEditAnnotation on a non-temporary annotation: %o",e)},deleteAnnotation:function(t){var n=e.selectedWitness,i=I.gm(n),r=[];r=t.userCreated?[w.aF7(t,n),w.OS1(t.uniqueId,i)]:[w.FFx(t.uniqueId,i)],e.activeAnnotation.uniqueId===t.uniqueId&&r.push(w.Enf(null)),o((0,_.$C)(r))},addNote:function(){var t=n.activeAnnotation;t=new xt.BN(null,t.witness,t.start,t.length,"",xt.DT.note,e.selectedWitness,e.user),o(w.tBV(t,!0))},editNote:function(t){t=new xt.BN(t,t.witness,t.start,t.length,t.content,xt.DT.note,e.selectedWitness,e.user),o(w.tBV(t,!0))},addPageBreak:l(xt.DT.pageBreak),addLineBreak:l(xt.DT.lineBreak),addQuestion:function(){var t=n.activeAnnotation;t=new xt.BN(null,t.witness,t.start,t.length,"",xt.DT.question,e.selectedWitness,e.user),o(w.tBV(t,!0))},saveQuestion:function(t,r,s){var a=n.annotatedText.getPositionOfAnnotation(t);(a=(0,i.Z)(a,2))[0],a[1],a=jn.renderToStaticMarkup(e.questionQuote)+s,c(t,s),s=w.LxW(t,r,a),o(s)}})}))(bt);bt=n(9438);var Mn=n.n(bt),Fn=(bt=n(8438),n.n(bt)),Un=(bt=n(92794),n.n(bt));const Qn=(0,o.memo)((0,s.ZP)((function(e){var t=[],n="",i="",o=[];return e.witnesses&&e.activeWitness&&(i=e.witnesses.findIndex((function(t){return t.id===e.activeWitness.id})),(t=e.witnesses.map((function(e){return e}))).sort((function(e,t){return e.isWorking?-1:t.isWorking?1:e.isBase?-1:t.isBase?1:0})),t=t.sort((function(e,t){return e.id-t.id}))),0===t.length?null:r().createElement(ve.Z,{onChange:function(n){K().isEmpty(t)||e.onSelectedWitness(t[n.target.value])},className:Un().selectVersion,value:i,label:"Version",classes:{root:Un().selectEmpty,select:Un().selectOptions}},t.map((function(t,i){return t.id===e.activeWitness.id&&o.push(Un().selected),n=t.source.name,t.isWorking&&(n="en"===e.intl.locale?"User"===(null==(t=e.user)?void 0:t.name)?"Working":"My Edition":"མཉམ་འབྲེལ་པར་མ།"),r().createElement("option",{key:"versionSelect-".concat(i),value:i,className:Un().selectOptions},n)})))})));bt=n(21709);var Gn=n.n(bt);s=r().memo((function(e){var t=(0,o.useRef)(e.texts),n=(0,o.useState)(t.current),s=(n=(0,i.Z)(n,2))[0],a=n[1],l=(n=(0,o.useState)(null),(n=(0,i.Z)(n,2))[0]),c=n[1],u=e.onSelectedText,d=(n=e.selectedText,e=(0,o.useState)(!1),(e=(0,i.Z)(e,2))[0]),h=e[1],p=(e=null==n?void 0:n.name,(0,o.useRef)(new Ee.t1({fixedHeight:!0,defaultHeight:40}))),g=[Gn().textlist],m=((0,o.useEffect)((function(){var e;""===l&&a((0,be.Z)(t.current)),null!==l&&""!==l&&(e=t.current.filter((function(e){return e.name.includes(l)})),a((0,be.Z)(e)))}),[l]),r().useCallback((function(e){var t=e.key,n=e.index,i=e.style,o=(e=e.parent,s[n]);return r().createElement(Ee.Z8,{key:"optionvalues-".concat(t),cache:p.current,parent:e,columnIndex:0,rowIndex:n},r().createElement("div",{style:i,onClick:function(){h(!1),u(o)}},r().createElement(we.Z,{sx:{overflow:"hidden",textOverflow:"ellipsis",width:"13rem",paddingLeft:2,fontSize:{lg:12,md:11,sm:10,xs:10},color:"text.primary"},component:"div"},r().createElement(Ie.Z,{noWrap:!0},(0,A.Z)(o.name)))))}),[s]));return r().createElement(Oe.Z,{onClickAway:function(){return h(!1)}},r().createElement("div",{style:{position:"relative",marginLeft:10}},r().createElement(ke.Z,{onClick:function(){h((function(e){return!e})),!1===d&&g.push(Gn().open)},component:"div",variant:"outlined",sx:{overflow:"hidden",textOverflow:"ellipsis",width:"10rem",height:"100%",color:"text.primary"}},r().createElement(Ie.Z,{noWrap:!0},e)),r().createElement(Ze.Z,{in:d},r().createElement(we.Z,{className:f()(g),sx:{position:"absolute",bgcolor:"heading.main",zIndex:1}},r().createElement(Ce.Z,{onChange:function(e){e=e.target.value,c(e)},id:"standard-basic",label:"filter",variant:"standard",style:{width:"100%"}}),r().createElement(Ee.qj,null,(function(e){var t=e.width;return e=e.height,r().createElement(Ee.aV,{width:t,height:e,rowHeight:40,deferredMeasurementCache:p.current,rowCount:s.length,rowRenderer:m})}))))))})),bt=(0,t.connect)((function(e){return{texts:I.r6(e),selectedText:I.ZT(e)}}),(function(e){return{onSelectedText:function(t){e(w.kPP(t))}}}))(s);const Yn=r().memo(bt);function Kn(e){e=e.isSecondWindowOpen;var t=(0,o.useCallback)((function(){var e=document.getElementById("updateList");e&&e.click()}),[e]);return(0,o.useEffect)((function(){var e=setTimeout((function(){t()}),500);return function(){return clearTimeout(e)}}),[e]),r().createElement(ue.Z,{variant:"text",size:"small",disableRipple:!0,onClick:t},r().createElement(Ge.Z,null))}function $n(e){return e=e.handleWindowSearch,r().createElement(ue.Z,{size:"small",variant:"text",onClick:e},r().createElement(ze.Z,null))}function Xn(e){var t=(0,o.useState)(!1),n=(t=(0,i.Z)(t,2))[0],s=t[1],a=(t=(0,We.Z)("WindowOneFont","Tibetan"),(t=(0,i.Z)(t,2))[0]),l=t[1];return(0,o.useEffect)((function(){document.body.style.setProperty("--tibetan-fonts",a)}),[]),r().createElement(Oe.Z,{onClickAway:function(){return s(!1)}},r().createElement(we.Z,{position:"relative"},r().createElement(ue.Z,{onClick:function(){s((function(e){return!e}))},size:"small",variant:"text"},r().createElement(Be,{height:20,width:20,fill:"currentColor"})),r().createElement(Ze.Z,{in:n},r().createElement(Ne.Z,{dense:!0,sx:{position:"absolute",right:0,zIndex:2,top:40,bgcolor:"heading.main"}},r().createElement(Te,{max:20,min:7,initialvalue:e.textFontSize,changeSize:e.onChangedFontSize}),r().createElement(De.Z,null),r().createElement(Jn,{selectFont:function(e){l(e),document.body.style.setProperty("--tibetan-fonts","".concat(e));var t=document.getElementById("updateList");setTimeout((function(){t.click()}),800),s(!1)},selectedfont:a}),r().createElement(je.Z,{onClick:function(){return e.onExport()}},r().createElement(Ie.Z,{variant:"subtitle2"},"Export Document"))))))}var Jn=function(e){var t=e.selectFont,n=(e=e.selectedfont,z.yn||[]);return r().createElement(we.Z,{textAlign:"center"},r().createElement("span",null,"Font:")," ",r().createElement("select",{onChange:function(e){return t(e.target.value)},value:e},n.map((function(e,t){return r().createElement("option",{key:t+"-fontselect",value:e},e)}))))};function ei(e){var t=e.changeShowTableContent,n=e.showTableContent;return r().createElement(r().Fragment,null,r().createElement(ue.Z,{onClick:function(){t(!n)}},n?r().createElement(Me.Z,null):r().createElement(Ve.Z,null)))}var ti=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(e){return(0,l.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.string,n=t,i=this.props.stringClass||"";if(this.props.searchTerm){var r=this.props.searchTerm,s=(new(B())).splitGraphemes(t),a=t.indexOf(r),l=a+r.length,c=0,u="";if(-1<a)for(var d=0;d<s.length;d++){var h=s[d];a<=c&&c<l&&(u+=h),c+=h.length}0<u.length&&(n=W()(t,u,(function(t,n){return o.createElement("span",{className:e.props.highlightClass,key:"highlight-".concat(n)},t)})))}return o.createElement("span",{className:i},n)}}]),n}(o.Component),ni=(s=n(45871),n.n(s));function ii(e){function t(e){var t=e.key,o=e.index,a=e.parent,c=(e=e.style,s[o]);return r().createElement(Ee.Z8,{key:"listkeys2-".concat(t),cache:l.current,parent:a,columnIndex:0,rowIndex:o},r().createElement("div",{style:e},0<s.length&&r().createElement("div",{className:ni().searchListItem,onClick:function(){return n(c[0])}},r().createElement(ti,{string:c[1],highlightClass:ni().highlight,searchTerm:i}))))}var n=e.handleListItemClick,i=e.searchValue,s=e.results,a=(e.selectedText,(0,o.useRef)()),l=(0,o.useRef)(new Ee.t1({fixedWidth:!0,defaultHeight:100}));return s?r().createElement(r().Fragment,null,r().createElement(Ee.qj,null,(function(e){var n=e.height;return e=e.width,r().createElement(Ee.aV,{ref:a,height:n,rowCount:null==s?void 0:s.length,rowHeight:l.current.rowHeight,deferredMeasurementCache:l.current,rowRenderer:t,width:e,overscanRowCount:1})}))):null}function oi(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(n),!0).forEach((function(t){(0,Q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}bt=r().memo((function(e){var t=(0,o.useState)(""),n=(t=(0,i.Z)(t,2))[0],s=t[1],a=(t=(0,o.useState)(!1),(t=(0,i.Z)(t,2))[0]),l=t[1],c=(t=(0,o.useState)(!1),(t=(0,i.Z)(t,2))[0]),u=t[1],d=(t=(0,o.useRef)(),(0,o.useRef)()),h=r().useRef(K().debounce((function(t){e.searchChanged(t)}),1e3)).current,p=(0,o.useCallback)((function(e){e.preventDefault(),h(n),u(!0)}),[n]),f=(0,o.useCallback)((function(){!1===a&&h(null),l(!a)}),[a]),g=((0,o.useEffect)((function(){!0===a&&d.current.focus(),!1===a&&h(null)}),[a]),(0,o.useCallback)((function(){u(!1),h(null),s("")}),[])),m=(0,o.useMemo)((function(){return K().isObject(e.searchResults)&&e.searchResults.hasOwnProperty(e.selectedText.id)}),[e.searchResults,e.selectedText]),v=m?e.searchResults[e.selectedText.id].results:[];return r().createElement(Ue.Z,{ref:t,direction:"column",spacing:1,sx:{paddingInline:{md:1,xs:0},paddingBlock:{md:1,xs:0},bgcolor:"heading.main",color:"text.primary"}},r().createElement(Ue.Z,{direction:"row",spacing:1,justifyContent:"space-between"},r().createElement(we.Z,{sx:{display:"flex",gap:{md:2,sx:0},flexDirection:{md:"row",xs:"column"}}},r().createElement(Yn,null),r().createElement(Qn,{witnesses:e.witnesses,activeWitness:e.selectedWitness,onSelectedWitness:e.onSelectedWitness,user:e.user})),r().createElement(Qe.Z,{size:"small",sx:{position:"relative",display:"flex",height:"fit-content",alignItems:"center",justifyContent:"center",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderRadius:1,bgcolor:"background.paper",color:"text.secondary","& svg":{m:1},"& hr":{mx:.5}},className:Fn().button_group_menu},r().createElement(Kn,{isSecondWindowOpen:e.isSecondWindowOpen}),r().createElement(De.Z,{orientation:"vertical",variant:"middle",flexItem:!0}),r().createElement($n,{handleWindowSearch:f}),r().createElement(Xn,{textFontSize:e.textFontSize,onChangedFontSize:e.onChangedFontSize,onExport:e.onExport,isPanelLinked:e.isPanelLinked}),r().createElement(ei,{changeShowTableContent:e.changeShowTableContent,showTableContent:e.showTableContent}))),r().createElement($.Z,{in:a,mountOnEnter:!0,unmountOnExit:!0},r().createElement("form",{onSubmit:p},r().createElement(Ue.Z,{direction:"row",spacing:2,position:"relative"},r().createElement(Ce.Z,{hiddenLabel:!0,id:"filled-hidden-label-small",inputProps:{style:{height:25,padding:"0 14px"}},style:{height:25,flex:1},fullWidth:!0,inputRef:d,value:n,onChange:function(e){return s(e.target.value)}}),r().createElement(ke.Z,{variant:"outlined",size:"small",onClick:p,style:{height:25}},"Search"),e.searchResults&&c&&r().createElement(we.Z,{sx:(0,Q.Z)({position:"absolute",top:35,right:0,zIndex:1,bgcolor:"heading.main",height:350,width:350,boxShadow:3,overflowX:"hidden"},"boxShadow",3)},0===v.length&&r().createElement("p",null,"no such word present"),m&&0<v.length&&r().createElement(ii,{handleListItemClick:function(t){e.changeSelectSyncId(t)},searchValue:e.searchValue,results:v,selectedText:e.selectedText}),r().createElement(ue.Z,{"aria-label":"closeButton",onClick:g,size:"small",sx:{right:15,top:0,position:"absolute"}},r().createElement(le.Z,{fontSize:"inherit"})))))))}));const si=(0,t.connect)((function(e){var t,n,i=I.ZT(e),o=I.an(e),r=[],s=!1,a=(i&&(r=I.hX(e,i.id),(a=I.R8(e,i.id))?(t=I.mh(e,a),s=I.dp(e,a)):t=I.NW(e,i.id)),o&&(n=(a=I.y6(e,o.id))?I.vp(e,a):I.S9(e,o.id)),I.bK(e)),l=I.SI(e);return{witnesses:r,selectedText:i,selectedText2:o,selectedWitness:t,selectedWitness2:n,textFontSize:a,exportingWitness:s,searchValue:l,showTableContent:I.Q(e),searchResults:I.BP(e,l)}}),null,(function(e,t,n){var i=t.dispatch,o=e.selectedText;return ri(ri(ri({},n),e),{},((0,Q.Z)(n={navigationButtonClicked:function(){t.dispatch(w.DaN(!e.textListIsVisible))},onSelectedWitness:function(e){i(w.ygg(null==o?void 0:o.id,null==e?void 0:e.id))},onChangedFontSize:function(e){i(w.$4v(e))},onChangeWindowOpen:function(e,t){i(w.rE3(e,t))},onExport:function(){i(w.mUt(e.selectedWitness.id,"docx"))}},"navigationButtonClicked",(function(){i(w.DaN(!e.textListIsVisible))})),(0,Q.Z)(n,"changeIsAnnotating",(function(e){i(w.zBT(e)),!1===e&&(e=w.Enf(null),i(e),i(w.Enf(null)))})),(0,Q.Z)(n,"searchChanged",(function(e){i(w.QuB(e))})),(0,Q.Z)(n,"changeShowTableContent",(function(e){i(w.G0K(e))})),(0,Q.Z)(n,"changeSelectSyncId",(function(e){i(w.kzv(e))})),n))}))(bt);s=n(58628);var ai=n.n(s),li=(0,p.ZP)("div")((function(e){return e=e.theme,(0,Q.Z)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:(0,lt.Fq)(e.palette.common.white,.15),"&:hover":{backgroundColor:(0,lt.Fq)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"})})),ci=(0,p.ZP)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),ui=(0,p.ZP)(ct.ZP)((function(e){return e=e.theme,{color:"inherit","& .MuiInputBase-input":(0,Q.Z)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"0",cursor:"pointer","&:focus":{width:"20ch"}})}}));const di=r().memo((function(){var e=[{Id:1,Title:"chapter 1",segment_id:0},{Id:2,Title:"chapter 2",segment_id:400}];return e.length,r().createElement(we.Z,{className:ai().TableContent,sx:{bgcolor:"heading.main",color:"text.primary",width:"100%",height:"100%",paddingInline:2}},r().createElement(ut.Z,{sx:{justifyContent:"space-between",paddingLeft:"0 !important",margin:0}},r().createElement(Ie.Z,{textTransform:"uppercase",component:"h6"},"Table Of Content"),r().createElement(li,null,r().createElement(ci,null,r().createElement(ze.Z,null)),r().createElement(ui,{placeholder:"Search…",inputProps:{"aria-label":"search"}}))),r().createElement(we.Z,null,e.map((function(e,t){return r().createElement(we.Z,{key:"TableContent-"+t,sx:{cursor:"pointer",width:"fit-content","&:hover":{fontWeight:"bold"}}},e.Title)}))))}));bt=n(90147);var hi=n.n(bt);function pi(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pi(Object(n),!0).forEach((function(t){(0,Q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gi(e){return"s_"+e.start}function mi(e){return"ds_"+e.start}function vi(e){return"i_"+e.start}function xi(e){return"p_"+(e.end+1)}function yi(e){return"l_"+(e.end+1)}var Ti=String.fromCharCode(182),bi=jn.renderToStaticMarkup(r().createElement(wn,null));s=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this,e)).textAlignmentById=[],i.state={segmentedText:e.segmentedText},i.textAlignmentById=i.props.textAlignmentById,i._renderedSegments=null,i._renderedHtml=null,i.rangeSelect=[],i.theme=e.theme,i}return(0,c.Z)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState((function(t,n){return fi(fi({},t),{},{segmentedText:e.segmentedText})}))}},{key:"annotationsForSegment",value:function(e){var t=[],n=this.props.annotationPositions[String(e.start)],i=this.props.annotationPositions[it.Rs+e.start]||[],o=this.props.annotationPositions[it.eH+e.start]||[],r=this.props.annotationPositions[it.Iv+(e.end+1)]||[];return e=this.props.annotationPositions[it.FQ+(e.end+1)]||[],(t=n||t).concat(i,o,r,e)}},{key:"segmentsContainSegment",value:function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.start===t.start&&i.text===t.text)return!0}return!1}},{key:"selectedElement",value:function(e){if("DIV"===e.tagName)this.props.selectedSegmentId("");else{var t=[],n=[],i=document.getSelection(),o=parseInt(e.id.replace("s_",""));if(this.props.changeSyncIdOnClick(o),null!=e&&e.id.includes("s_")&&this.props.condition){this.props.changeScrollToId({id:null,from:null});var r=parseInt(e.id.replace("s_","")),s=(0,Y.find)(this.textAlignmentById,(function(e){return r>=e.start&&r<e.end}));if(s){for(var a=s.start;a<s.end;a++)t.push(a);for(var l=s.TStart;l<s.TEnd;l++)n.push(l);this.props.changeSelectedRange({source:t,target:n})}}i&&"Range"===i.type||(this.props.selectedSegmentId(e.id),e.id||this.props.changeSelectedRange({source:[],target:[]}))}}},{key:"generateHtml",value:function(e,t){var n=t.segmentedText.segments,o=hi().textLine,r='<p class="'+o+'">';if(0===n.length)return{__html:r};for(var s=hi().insertion,a=n[n.length-1].end+1,l=(e.annotationPositions[it.Rs+a]&&(t=new vt.Z(a,""),n.push(t)),e.annotationPositions[it.Iv+a]&&(t=new vt.Z(a,""),n.push(t)),e.annotationPositions[it.FQ+a]&&(t=new vt.Z(a,""),n.push(t)),e.activeAnnotations||{}),c=hi().highlight,u=hi().activeHighlight,d=null,h={},p=0;p<n.length;p++){var g=n[p],m="",v=[],x=this.annotationsForSegment(g),y=null,T=!1,b=!1,E=!1,S=!1,w=null;if(x){for(var I,O=[],k=[],Z=[],C=[],A=0,R=x.length;A<R;A++){var P,B=x[A];B.isInsertion?B.uniqueId in l?O.push(B):(P=B.start,h.hasOwnProperty(P)||(k.push(B),h[P]=B)):B.isDeletion?B.uniqueId in l&&C.push(B):B.type!==xt.DT.pageBreak||e.activeWitness.isWorking?B.type!==xt.DT.lineBreak||e.activeWitness.isWorking?Z.push(B):S=B:w=B}0===O.length&&0<k.length&&(W=k[0],I=vi(g),L=s,e.activeAnnotation&&e.activeAnnotation.isInsertion&&e.activeAnnotation.start===W.start&&(L+=" "+hi().selectedAnnotation),r+="<span id="+I+" key="+I+' class="'+L+'">'+W.content+"</span>"),0<C.length&&(I=C[0],y=e.getBaseAnnotation(I).content,e.activeAnnotation&&e.activeAnnotation.isDeletion&&e.activeAnnotation.start===I.start&&e.activeAnnotation.length===I.length&&0===g.length&&(T=!0)),w&&e.activeAnnotation&&e.activeAnnotation.uniqueId===w.uniqueId&&(b=!0),S&&e.activeAnnotation&&e.activeAnnotation.uniqueId===S.uniqueId&&(E=!0),(0<Z.length||0<O.length)&&v.push(hi().annotation)}if(g.start===a)break;var W,L=null,N=(0===g.length?(L=mi(g),v.push(hi().removedByAnnotation),y&&(g=new vt.Z(g.start,y))):L=gi(g),(this.segmentsContainSegment(e.selectedAnnotatedSegments,g)||T)&&v.push(hi().selectedAnnotation),e.selectedSourceRange.includes(g.start)&&e.condition&&(W="light"===e.theme.palette.mode?hi().selectedRangelight:hi().selectedRangeDark,v.push(W)),0<v.length&&(m='class="'+f().apply(void 0,v)+'"'),g.text);if(e.searchStringPositions){var D=g.start,j=D,_=(N="",c);e.selectedSearchResult&&e.selectedSearchResult.start<=j&&e.selectedSearchResult.start+e.selectedSearchResult.length>j&&(_=u);for(var H=0;H<g.text.length;H++){var z,q,V,M=g.text.charAt(H);j=D+H,d?(z=d,(z=(0,i.Z)(z,2))[0],0===H&&(N+='<span class="'+_+'">'),j===z[1]?(N+=M+"</span>",d=null):H===g.text.length-1?N+=M+"</span>":N+=M):j in e.searchStringPositions?(q=(z=(0,i.Z)(e.searchStringPositions[j],2))[0],V=z[1],N+='<span class="'+_+'">'+M,H!==g.text.length-1&&j!==V||(N+="</span>"),j<V&&(d=[q,V])):N+=M}}r+="<span id="+L+" key="+L+" "+m+">"+N+"</span>",w&&(y=[hi().pageBreak],b&&y.push(hi().selectedAnnotation),T=' class="'+y.join(" ")+'" ',r+="<span id="+xi(g)+" key="+xi(g)+T+">"+bi+"</span>"),S&&(v=[hi().lineBreak],E&&v.push(hi().selectedAnnotation),m=' class="'+v.join(" ")+'" ',r=r+"<span id="+yi(g)+" key="+yi(g)+m+">"+Ti+'</span></p><p class="'+o+'">')}return this._renderedSegments=n,{__html:r+="</p>"}}},{key:"shouldComponentUpdate",value:function(e,t){return t=this.generateHtml(e,t),this.props.fontSize!==e.fontSize||(!this._renderedHtml||t.__html!==this._renderedHtml.__html)&&(this._renderedHtml=t,!0)}},{key:"componentDidUpdate",value:function(){this.textAlignmentById=this.props.textAlignmentById}},{key:"render",value:function(){var e=this,t=[hi().text],n=(0===this.props.row&&t.push(hi().textFirstRow),this._renderedHtml||this.generateHtml(this.props,this.state));return this._renderedHtml||(this._renderedHtml=n),r().createElement("div",{className:hi().textContainer},r().createElement("div",{className:f().apply(void 0,t),id:"text1",dangerouslySetInnerHTML:n,style:{fontSize:this.props.fontSize,fontFamily:"var(--tibetan-fonts)"},onClick:function(t){e.selectedElement(t.target)}}))}}]),n}(r().Component);const Ei=(0,gt.Z)(s);p=n(43842);var Si=n.n(p);function wi(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function Ii(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(n),!0).forEach((function(t){(0,Q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}parseInt(en().inlineWidth);var Oi,ki,Zi,Ci,Ai={},Ri=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this,e)).textAlignmentById=[],i.childRef=o.createRef("0"),i.list=null,i.splitText=null,i.cache=new Z.t1({fixedWidth:!0}),i.imageAlignmentById=i.props.imageAlignmentById,i.changeImageScrollId=i.props.changeImageScrollId,i.splitTextRef=o.createRef(null),i.rowRenderer=i.rowRenderer.bind((0,O.Z)(i)),i.textListVisible=e.textListVisible,i.editMenuVisible=e.editMenuVisible,i.isPanelLinked=e.isPanelLinked,i.activeSelection=null,i.selectedNodes=null,i._mouseDown=!1,i._activeWitness=null,i._didSetInitialScrollPosition=!1,i._modifyingSelection=!1,i.imageHeight=null,i.imageWidth=null,i.calculatedImageHeight=null,i.processProps(e),i.changeScrollToId=e.changeScrollToId,i.changeSyncIdOnClick=e.changeSyncIdOnClick,i.closeAnnotation=e.closeAnnotation,i.scrollJump=e.scrollJump,i.textAlignmentById=[],i.scrollEvent=i.scrollEvent.bind((0,O.Z)(i)),i.selectedWindow=e.selectedWindow,i.changeImageScrollId=e.changeImageScrollId,i.imageData=e.imageData,i}return(0,c.Z)(n,[{key:"scrollEvent",value:function(e){if(2===this.selectedWindow)return null;var t,n;1===this.selectedWindow&&this.isPanelLinked&&(t=[],n=[],this.textAlignmentById.map((function(e){var n=document.getElementById("s_"+e.start);n&&102<n.getBoundingClientRect().top&&t.push({id:e.id,start:e.start,target:e.TStart})})),this.imageAlignmentById.map((function(e){var t=document.getElementById("s_"+(null==e?void 0:e.start));t&&102<t.getBoundingClientRect().top&&n.push({id:e.id,start:e.start,end:e.end})})),K().isEmpty(t)&&K().isEmpty(n)||1===this.selectedWindow&&this.debouncedScroll(t,n))}},{key:"updateList",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(this.props.showImages&&!this.calculatedImageHeight&&this.imageHeight&&this.imageWidth&&(this.calculatedImageHeight=this.calculateImageHeight()),this.list){var n=this.list;if(e)if(null!==t)if(Array.isArray(t)){if(Array.isArray(t))for(var i=0;i<t.length;i++){var o=t[i];this.cache.clear(o)}}else this.cache.clear(t);else this.cache.clearAll(),n.measureAllRows(),n.recomputeRowHeights(0);n.forceUpdateGrid()}}},{key:"mouseDown",value:function(){this._mouseDown=!0}},{key:"mouseUp",value:function(){var e;this._mouseDown=!1,this.activeSelection&&(e=(e=this.processSelection(this.activeSelection))||[],this.props.didSelectSegmentIds(e),this.activeSelection=null)}},{key:"handleSelection",value:function(e){this._modifyingSelection?(e.stopPropagation(),this._modifyingSelection=!1):(this.activeSelection=document.getSelection(),this._mouseDown||this.mouseUp())}},{key:"processSelection",value:function(e){if(0===e.rangeCount||e.isCollapsed||"Caret"===e.type)return this.selectedNodes=null;var t=(e=e.getRangeAt(0)).startContainer;if(!(t=this.getNodeSegmentSpan(t))||!t.parentNode)return null;var n=this.getRangeNodes(e,t.parentNode),i=(0<n.length&&(i=n[0],e.startOffset===i.textContent.length&&n.shift()),e.endContainer);return(i=this.getNodeSegmentSpan(i))&&i.parentNode?(i&&t.parentNode!==i.parentNode?n=n.concat(this.getRangeNodes(e,i.parentNode)):0===e.endOffset&&n.pop(),t=[],(this.selectedNodes=n).reduce((function(e,t){return t instanceof Element&&e.push(t.id),e}),t),t):null}},{key:"getNodeSegmentSpan",value:function(e){for(var t=e,n=null,i=/^(i|s|ds)_/;!n&&t.parentNode;)t instanceof Element&&i.test(t.id)&&(n=t),t=t.parentNode;return n}},{key:"getRangeNodes",value:function(e,t){for(var n=[],i=0,o=t.childNodes.length;i<o;i++){var r=t.childNodes[i];e.intersectsNode(r)&&n.push(r)}return n}},{key:"getControlsMeasurements",value:function(e){if(!this.splitText)return null;var t=this.splitText,n=null,o=null,r=null,s=null,a=null,l=[],c=0;if(e.activeAnnotation){var u=e.activeAnnotation,d=e.splitText.annotatedText.getPositionOfAnnotation(u);if(null===(c=(0,i.Z)(d,1)[0]))return console.warn("No startPos in getControlsMeasurements"),null;u.type===xt.DT.pageBreak&&--c,u.type===xt.DT.lineBreak&&--c,d=c+u.length,0<u.length&&--d,n=e.splitText.getTextIndexOfPosition(d),s=t.getBoundingClientRect()}var h=[];if(e.selectedAnnotatedSegments&&0<e.selectedAnnotatedSegments.length){h=e.selectedAnnotatedSegments;for(var p=0;p<h.length;p++){var f=h[p];if(null===o&&f instanceof vt.Z){o=f;break}}o&&(a=0===o.length&&e.activeAnnotation&&e.activeAnnotation.isInsertion?(r=vi(o),vi):(r=gi(o),gi))}else e.activeAnnotation&&(e.activeAnnotation.isDeletion?(r=mi(u=new vt.Z(c,"")),a=mi,h=[o=u]):e.activeAnnotation.isInsertion?(d=e.splitText.annotatedText.getPositionOfAnnotation(e.activeAnnotation),(t=(0,i.Z)(d,1)[0])&&(r=vi(u=new vt.Z(t,"")),a=vi,h=[o=u])):e.activeAnnotation.type===xt.DT.pageBreak?(h=[o=new vt.Z(c+1,"")],l=[r=xi(new vt.Z(c,""))]):e.activeAnnotation.type===xt.DT.lineBreak&&(h=[o=new vt.Z(c+1,"")],l=[r=yi(new vt.Z(c,""))]));if(a)for(var g=0;g<h.length;g++){var m=h[g];m instanceof vt.Z&&(m=a(m),l.push(m))}return null!=n&&o&&r&&s?{selectedTextIndex:n,firstSelectedSegment:o,selectedElementId:r,splitTextRect:s,selectedElementIds:l}:null}},{key:"shouldResetListCache",value:function(e,t){return!(e.showImages===t.showImages&&!this.pageBreaksChanged(e,t))}},{key:"pageBreaksChanged",value:function(e,t){return e=e.splitText.getTextsFinalPositions(),t=t.splitText.getTextsFinalPositions(),e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}},{key:"lineBreaksChanges",value:function(e,t){var n=e.activeAnnotation,i=t.activeAnnotation,o=!1;return n&&n.isType(xt.DT.lineBreak)&&t.activeAnnotations&&!t.activeAnnotations.hasOwnProperty(n.uniqueId)&&(o=!0),!(!(i&&i.isType(xt.DT.lineBreak)&&e.activeAnnotations)||e.activeAnnotations.hasOwnProperty(i.uniqueId))||o}},{key:"selectedListRow",value:function(e){return e.activeAnnotation?e.splitText.getTextIndexOfPosition(e.activeAnnotation.start):null}},{key:"processProps",value:function(e){var t=this,n=!1,i=((!this.props.selectedWitness||e.selectedWitness&&e.selectedWitness.id!==this.props.selectedWitness.id)&&(this._didSetInitialScrollPosition=!(n=!0)),!e.selectedSearchResult||this.props.selectedSearchResult&&e.selectedSearchResult.start===this.props.selectedSearchResult.start&&e.selectedSearchResult.textId===this.props.selectedSearchResult.textId||(console.log("resetting scroll position from search result"),this._didSetInitialScrollPosition=!1),this._filteredSelectedAnnotatedSegments=e.selectedAnnotatedSegments.reduce((function(e,t){return t instanceof vt.Z&&e.push(t),e}),[]),this.getControlsMeasurements(e));if(i&&(this.selectedTextIndex=i.selectedTextIndex,this.firstSelectedSegment=i.firstSelectedSegment,this.splitTextRect=i.splitTextRect,this.selectedElementId=i.selectedElementId,this.selectedElementIds=i.selectedElementIds),e.textListVisible!==this.textListVisible||e.editMenuVisible!==this.editMenuVisible)setTimeout((function(){t.textListVisible=e.textListVisible,t.editMenuVisible=e.editMenuVisible,t.updateList(!0)}),500);else if(n)this.updateList(!0);else if(this.pageBreaksChanged(this.props,e)){var o=null;if(i=this.selectedListRow(this.props),n=this.selectedListRow(e),i&&n){o=[];for(var r=n<i?n:i,s=this.props.splitText.texts.length;r<s;r++)o.push(r)}this.updateList(!0,o)}else if(this.lineBreaksChanges(this.props,e)){n=(n=this.selectedListRow(e))||this.selectedListRow(this.props),i=this.props.splitText.texts;var a=[];if(null!==n){for(var l=n,c=i.length;l<c;l++)a.push(l);this.updateList(!0,a)}}else this.props.fontSize!==e.fontSize?this.updateList(!0):this.props.activeAnnotation&&e.activeAnnotation&&this.annotationsInSameLocation(this.props.activeAnnotation,e.activeAnnotation)?this.updateList(!0,this.selectedListRow(e)):this.updateList(this.shouldResetListCache(this.props,e))}},{key:"annotationsInSameLocation",value:function(e,t){return e.start===t.start&&e.length===t.length}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.processProps(e)}},{key:"componentDidMount",value:function(){var e=this;this.resizeHandler=K().throttle((function(){e.calculatedImageHeight=null,e.updateList()}),600).bind(this),this.debouncedScroll=K().debounce((function(t,n){t.length&&e.changeScrollToId({id:null==(t=t[0])?void 0:t.start,from:1}),n.length&&e.changeImageScrollId({id:{start:null==(t=n[0])?void 0:t.start,end:null==(t=n[0])?void 0:t.end},from:1})}),1e3),window.addEventListener("resize",this.resizeHandler),this.selectionHandler=K().debounce((function(t){e.handleSelection(t)}),200).bind(this),document.addEventListener("selectionchange",this.selectionHandler),document.addEventListener("mousedown",this.mouseDown.bind(this),!0),document.addEventListener("mouseup",this.mouseUp.bind(this),!0),this.processProps(this.props),this.timer=setTimeout((function(){e.resizeHandler()}),2e3),this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(e){var t,n,i,o,r,s,a,l,c,u,d=this,h=(this.imageData=this.props.imageData,this.imageData!==(null==e?void 0:e.imageData)&&(this.calculatedImageHeight=null,this.updateList(!0)),this.props.textAlignment),p=(this.imageAlignmentById=this.props.imageAlignmentById,this.SearchSyncId=this.props.syncIdOnSearch||null,this.condition=this.props.condition,this.props.scrollToId),f=this.list;((null==e?void 0:e.searchResults)!==(null==(c=this.props)?void 0:c.searchResults)||(null==e?void 0:e.syncIdOnSearch)!==(null==(c=this.props)?void 0:c.syncIdOnSearch))&&this.props.searchResults&&this.SearchSyncId&&(t=this.props.splitText.getTextIndexOfPosition(this.SearchSyncId),setTimeout((function(){f.scrollToRow(t),setTimeout((function(){f.scrollToPosition(f.props.scrollTop-300)}),0)}),100)),this.textAlignmentById=this.props.textAlignmentById,this.isPanelLinked=this.props.isPanelLinked,this.selectedWindow=this.props.selectedWindow,this.targetId=this.props.syncIdOnClick,this.selectedNodes&&0<this.selectedNodes.length&&(n=this.selectedNodes,i=this.props.selectedAnnotatedSegments,setTimeout((function(){var e=document.createRange(),t=n[0],o=n[n.length-1],r=i[i.length-1];r instanceof vt.Z&&(r=document.getElementById(gi(r)))&&(o=r),t instanceof Element&&o instanceof Element&&(t=document.getElementById(t.id),o=document.getElementById(o.id),t&&o&&(e.setStart(t,0),e.setEnd(o,o.childNodes.length),(r=document.getSelection())&&(d._modifyingSelection=!0,r.removeAllRanges(),r.addRange(e),d.selectedNodes=null)))}),0)),!this._didSetInitialScrollPosition&&this.list&&(o=this.list,(this.props.activeAnnotation||this.props.selectedSearchResult)&&(r=this.getSelectedTextIndex(),setTimeout((function(){o.scrollToRow(r),setTimeout((function(){o.scrollToPosition(o.props.scrollTop-300)}),0)}),100)),this._didSetInitialScrollPosition=!0),"video"==p.from&&p.id&&(e=p.id,s=this.props.splitText.getTextIndexOfPosition(e),setTimeout((function(){f.scrollToRow(s),setTimeout((function(){f.scrollToPosition(f.props.scrollTop-300)}),0)}),100)),2===this.selectedWindow&&2==p.from&&this.isPanelLinked&&this.condition&&null!==p.id&&(a=this.list,this.textAlignmentById=this.props.textAlignmentById||[],this.splitText.style.scrollBehavior="smooth",h&&this.isPanelLinked&&null!==(e=null==(c=this.textAlignmentById.find((function(e){return e.TStart===p.id})))?void 0:c.start)&&(l=this.props.splitText.getTextIndexOfPosition(e),setTimeout((function(){a.scrollToRow(l),setTimeout((function(){a.scrollToPosition(a.props.scrollTop-300)}),0)}),100))),this.targetId&&"ua"===p.from&&2===this.selectedWindow&&"ua"===p.id&&(h=null==(c=h.alignment.find((function(e){return d.targetId>=e.target_segment.start&&d.targetId<e.target_segment.end})))||null==(e=c.source_segment)?void 0:e.start,u=this.props.splitText.getTextIndexOfPosition(h),setTimeout((function(){f.scrollToRow(u),setTimeout((function(){f.scrollToPosition(f.props.scrollTop-300)}),0)}),100))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this),document.removeEventListener("mouseup",this),window.removeEventListener("resize",this.resizeHandler),document.removeEventListener("selectionchange",this.selectionHandler),clearTimeout(this.timer)}},{key:"calculateImageHeight",value:function(){var e,t,n=null;return this.imageHeight&&this.imageWidth&&(e=this.imageWidth/this.imageHeight,t=Si().pechaImage,0<(t=document.getElementsByClassName(t)).length&&(n=t[0].offsetWidth/e)),n}},{key:"getSelectedTextIndex",value:function(){var e,t=null;return this.props.activeAnnotation?(e=this.props.splitText.annotatedText.getPositionOfAnnotation(this.props.activeAnnotation),t=(0,i.Z)(e,1)[0]):this.props.selectedSearchResult&&((e=this.props.splitText.annotatedText.segmentAtOriginalPosition(this.props.selectedSearchResult.start))instanceof vt.Z?t=e.start:"number"==typeof e&&(t=e)),t?this.props.splitText.getTextIndexOfPosition(t):0}},{key:"getBaseAnnotation",value:function(e){var t=this.props.splitText.annotatedText.getPositionOfAnnotation(e);return t=(0,i.Z)(t,1)[0],this.props.splitText.annotatedText.getBaseAnnotation(t=null===t?0:t,e.content.length)}},{key:"render",value:function(){var e=this,t=this.props,n=this.rowRenderer,i=this.cache,r=t.selectedWitness?t.selectedWitness.id:0;return o.createElement("div",{className:Si().splitText,ref:function(t){return e.splitText=t},key:r},o.createElement("button",{id:"updateList",style:{display:"none"},onClick:this.resizeHandler}),o.createElement(k.q,{disableWidth:!0},(function(r){return r=r.height,o.createElement(C.aV,{width:1,ref:function(t){return e.list=t},height:r,rowCount:t.splitText.texts.length,rowHeight:i.rowHeight,rowRenderer:n,overscanRowCount:0,deferredMeasurementCache:i,onScroll:e.scrollEvent,scrollToAlignment:"start",containerStyle:{width:"100%",maxWidth:"100%"},style:{width:"100%"}})})))}},{key:"getImageUrl",value:function(e){var t,n,i;return this.props.selectedWitness&&this.props.selectedWitness.properties?(t=(n=this.props.selectedWitness.properties)[z.f1],i=n[z.oB],n=n[z.Ey],i=Number(i)+e,z.v5+t+i+"."+n+z.WL):""}},{key:"getStringPositions",value:function(e,t,n){var i=this.props.splitText.annotatedText.getUniqueId();if((Ai=Ai.hasOwnProperty(i)?Ai:(0,Q.Z)({},i,{}))[i].hasOwnProperty(t)||(Ai[i]=(0,Q.Z)({},t,{})),Ai[i][t].hasOwnProperty(n))return Ai[i][t][n];for(var o=new(B()),r=e.getText(),s=null==(e=e.segments[0])?void 0:e.start,a=[],l=r.indexOf(t);-1!==l;)a.push(l),l=r.indexOf(t,l+1);var c={};if(0<a.length)for(var u=o.splitGraphemes(r),d=0,h=null,p=0;p<u.length;p++){var f=u[p],g=d+(f.length-1);null!==h?h+(t.length-1)<=g&&(c[h+s]=[h+s,g+s],h=null):-1!==a.indexOf(d)?t.length===f.length?c[d+s]=[d+s,g+s]:t.length>f.length&&(h=d):h=null,d+=f.length}return Ai[i][t][n]=c}},{key:"rowRenderer",value:function(e){var t=e.key,n=e.index,i=e.parent,r=(e=e.style,this.props),s=this.cache,a=this,l=r.showImages?Si().pechaImage:null,c="",u=(r.selectedWitness&&r.selectedWitness.properties&&r.selectedWitness.properties.hasOwnProperty(z.f1)&&(c=this.getImageUrl(n)),{}),d=this.props.searchValue,h=(d&&0<d.length&&r.splitText&&(u=this.getStringPositions(r.splitText.texts[n],d,n)),{});return r.showImages&&l&&this.calculatedImageHeight&&(h.height=this.calculatedImageHeight+"px"),e=Ii(Ii({},e),{},{height:e.height+10,cursor:this.props.isAnnotating?"text":"pointer"}),o.createElement(Z.Z8,{columnIndex:0,key:t,parent:i,rowIndex:n,cache:s},o.createElement("div",{key:t,style:e,className:Si().splitTextRow,ref:this.splitTextRef,id:"index_".concat(n)},o.createElement("div",{className:Si().splitTextRowContent},r.showImages&&o.createElement("div",{className:l,style:h},o.createElement("img",{alt:"Text related Image",className:Si().image,src:c,width:"100%",height:"100%",loading:"lazy",decoding:"async",onLoad:function(e){e.target&&null===a.imageWidth&&(a.imageWidth=e.target.naturalWidth,a.imageHeight=e.target.naturalHeight,a.calculatedImageHeight=null,window.setTimeout(a.updateList.bind(a),0))}})),o.createElement(Ei,{ref:this.childRef,segmentedText:r.splitText.texts[n],annotations:r.annotations,activeAnnotations:r.activeAnnotations,activeAnnotation:r.activeAnnotation,row:n,selectedSegmentId:r.selectedSegmentId,annotationPositions:r.annotationPositions,selectedAnnotatedSegments:this._filteredSelectedAnnotatedSegments,getBaseAnnotation:this.getBaseAnnotation.bind(this),activeWitness:this.props.selectedWitness,searchValue:d,selectedSearchResult:this.props.selectedSearchResult,searchStringPositions:u,fontSize:r.fontSize,changeSyncIdOnClick:this.props.changeSyncIdOnClick,changeScrollToId:this.props.changeScrollToId,textAlignmentById:this.props.textAlignmentById,selectedSourceRange:this.props.selectedSourceRange,selectedTargetRange:this.props.selectedTargetRange,changeSelectedRange:this.props.changeSelectedRange,condition:this.condition})),this.props.isAnnotating&&this.selectedTextIndex===n&&this.props.activeAnnotation&&o.createElement(Vn,{annotationPositions:r.annotationPositions,annotatedText:r.splitText.annotatedText,activeAnnotation:r.activeAnnotation,inline:!0,firstSelectedSegment:this.firstSelectedSegment,splitTextRect:this.splitTextRect,selectedElementId:this.selectedElementId,pechaImageClass:l,splitText:r.splitText,selectedElementIds:this.selectedElementIds,list:this.list})))}}]),n}(o.PureComponent),Pi=0,Bi=(ct=function(e){(0,u.Z)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,h.Z)(e);return n=t?(n=(0,h.Z)(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments),(0,d.Z)(this,n)}}(n);function n(){var e;return(0,l.Z)(this,n),(e=t.call(this)).key=Pi++,e.ref=r().createRef(),e.selectedWindow=null,e}return(0,c.Z)(n,[{key:"mouseEnter",value:function(){2===this.selectedWindow&&this.props.changeSelectedWindow(1)}},{key:"componentDidMount",value:function(){this.ref.current.addEventListener("mouseenter",this.mouseEnter.bind(this))}},{key:"componentDidUpdate",value:function(){this.selectedWindow=this.props.selectedWindow}},{key:"render",value:function(){this.props.text&&this.props.text;var e,t,n=null;return n=[this.props.annotatedText&&this.props.text&&!this.props.loading?(e=this.props.paginated?(e=this.props.pageBreaks,0===(t=(0,be.Z)(e))[0]&&t.shift(),function(e){return t}):(0,rt.Z)(1e3,/^།[\s]+(?!།[\s]+)/,2,5),n=new ot(this.props.annotatedText,e),r().createElement(Ri,{splitText:n,annotations:this.props.annotations,activeAnnotations:this.props.activeAnnotations,activeAnnotation:this.props.activeAnnotation,limitWidth:!1,didSelectSegmentIds:this.props.didSelectSegmentIds,selectedSegmentId:this.props.selectedSegmentId,annotationPositions:this.props.annotationPositions,selectedAnnotatedSegments:this.props.selectedAnnotatedSegments,syncIdOnClick:this.props.syncIdOnClick,textListVisible:this.props.textListVisible,showImages:this.props.pageImagesVisible,imagesBaseUrl:this.props.imagesBaseUrl,selectedWitness:this.props.selectedWitness,selectedWitness2:this.props.selectedWitness2,key:this.key,selectedSearchResult:this.props.selectedSearchResult,searchValue:this.props.searchValue,fontSize:this.props.fontSize,isSecondWindowOpen:this.props.isSecondWindowOpen,changeScrollToId:this.props.changeScrollToId,changeSyncIdOnClick:this.props.changeSyncIdOnClick,imageData:this.props.imageData,isPanelLinked:this.props.isPanelLinked,selectedImage:this.props.selectedImage,changeSelectedImage:this.props.changeSelectedImage,isAnnotating:this.props.isAnnotating,closeAnnotation:this.props.closeAnnotation,textAlignment:this.props.textAlignment,textAlignmentById:this.props.textAlignmentById,isPanelVisible:this.props.isPanelVisible,scrollToId:this.props.scrollToId,selectedWindow:this.selectedWindow,selectedSourceRange:this.props.selectedSourceRange,selectedTargetRange:this.props.selectedTargetRange,changeSelectedRange:this.props.changeSelectedRange,searchResults:this.props.searchResults,showTableContent:this.props.showTableContent,selectedText:this.props.text,syncIdOnSearch:this.props.syncIdOnSearch,imageAlignmentById:this.props.imageAlignmentById,changeImageScrollId:this.props.changeImageScrollId,imageScrollId:this.props.imageScrollId,condition:this.props.condition})):r().createElement("div",{key:this.key})],r().createElement(we.Z,{sx:{height:"100%",flex:1,bgcolor:"navbar.main",color:"texts.main"},className:f()(Mn().textDetail,U().flex,U().flexColumn),key:this.key,ref:this.ref},r().createElement(si,null),r().createElement(De.Z,null),r().createElement(P(),{loaded:!this.props.loading,zIndex:5}),r().createElement(we.Z,{style:{display:"flex",height:"100%",width:"100%",position:"relative"}},r().createElement(we.Z,{style:{flex:1},className:f()(Mn().textContainer,U().flex)},this.props.loading?r().createElement("div",null):n),r().createElement(at.Z,{direction:"left",in:this.props.showTableContent,container:this.ref.current,unmountOnExit:!0,mountOnEnter:!0},r().createElement(we.Z,{sx:{position:"absolute",height:"100%",minWidth:"50%",right:0}},r().createElement(di,null)))))}}]),n}(r().Component),n(47311));function Wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Li(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function Ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Li(Object(n),!0).forEach((function(t){(0,Q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Li(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Di(e){return[e.start,e.length].join("-")}function ji(e,t){var n=[];if(K().forIn(e,(function(e){return n.push(e.start)})),n=n.sort((function(e,t){return e-t})),t){var i=[];if(K().forIn(t,(function(e){return i.push(e.start)})),i=i.sort((function(e,t){return e-t})),0===n.length)return i;if(n.length/i.length<.9)for(var o=n[n.length-1],r=0,s=i.length;r<s;r++){var a=i[r];o<a&&n.push(a)}console.log(n)}return n}var _i=null;bt=(0,t.connect)((function(e){var t=(0,I.PR)(e),n=e.data.loadingWitnesses||e.data.loadingAnnotations,o=(0,I.Tq)(e),r=I.tt(e),s=I.LZ(e);if(n)return{text:null,witnesses:null,baseWitness:null,annotations:null,loading:n,paginated:null,pageImagesVisible:!0,annotatedText:null,selectedAnnotatedSegments:null,annotationPositions:null,activeAnnotations:null,activeAnnotation:null,user:t,textListVisible:o,fontSize:z.$M,isPanelLinked:r,textAlignmentById:s,imageAlignmentById:(0,I.d6)(e)};var a,l,c,u=(0,I.ZT)(e),d={},h=(u&&(a=(0,I.NW)(e,u.id),l=(0,I.dG)(e,u.id)),(0,I.zL)(e)),p={},f=[],g=null,m=(0,I.Z9)(e),v=[],x={},y=[],T="",b=(0,I.SI)(e),E=!1,S=!1,w=(0,I.bK)(e);if(a&&u&&e.data.witnessAnnotationsById.hasOwnProperty(a.id)){d=(0,I.hX)(e,u.id);var O=((c=(O=(0,I.R8)(e,u.id))?(0,I.mh)(e,O):c)||(O=(c=a).id),c.id!==a.id&&(E=!0,S=(0,I.Hn)(e)),g=Bi.Mz(e,c.id),Bi.CI(e,c,a));if(x=(O=(0,i.Z)(O,2))[0],f=O[1],g&&(p=function(e,t){if(e===Oi&&t===ki&&e.version===Ci)return Zi;for(var n={},o={},r=0;r<t.length;r++)!function(r){var s=t[r],a=(r=e.getPositionOfAnnotation(s),(r=(0,i.Z)(r,2))[0]),l=r[1];if(null!=a)if(0===l){if(s.isInsertion){if(r=Di(s),r=o[r])return r.map((function(e){return n[e].push(s)}));a=it.Rs+a}s.isDeletion&&0<s.length&&(a=it.eH+a),s.type===xt.DT.pageBreak&&(a=it.Iv+a),s.type===xt.DT.lineBreak&&(a=it.FQ+a),void 0===n[a]&&(n[a]=[]),-1===n[a].indexOf(s)&&n[a].push(s)}else{for(var c=[],u=a;u<a+l;u++)void 0===n[u]&&(n[u]=[]),-1===n[u].indexOf(s)&&n[u].push(s),c.push(u);s.isInsertion&&(r=Di(s),o[r]=c)}}(r);return ki=t,Zi=n,Ci=(Oi=e).version,n}(g,Object.values(f))),m&&g&&(m=_i&&_i.id===c.id?m:g.getAnnotation(m.start,m.length))&&(v=g.segmentsForAnnotation(m)),c&&l&&g){O=g.getAnnotationsOfType(xt.DT.pageBreak)||{};var k=null;c.id!==l.id&&(k=(0,I.CO)(e,a.id,xt.DT.pageBreak,l.id));for(var Z=0,C=(y=ji(O,k)).length;Z<C;Z++){var A=y[Z];(A=g.segmentAtOriginalPosition(A))instanceof vt.Z?y[Z]=A.start:A instanceof Number&&(y[Z]=A)}E&&(T="/static/images/texts/"+u.name+"/"+c.source.name+"/")}}_i=c,O=I.Hd(e),k=I.X3(e);var R=I.UO(e),P=I.pt(e),B=I.VD(e),W=I.Al(e),L=(0,I.n$)(e),N=I.qB(e),D=(null==k||null==(D=k.source)?void 0:D.witness)===(null==(D=c)?void 0:D.id)&&N&&(null==k||null==(D=k.target)?void 0:D.witness)===(null==B?void 0:B.id)&&r;return{text:u,witnesses:d,workingWitness:a,baseWitness:l,annotations:f,loading:n,paginated:E,pageImagesVisible:S,annotatedText:g,selectedAnnotatedSegments:v,annotationPositions:p,activeAnnotations:Ni({},x),activeAnnotation:m,pageBreaks:y,imagesBaseUrl:T,user:t,textListVisible:o,selectedWitness:c,selectedSearchResult:h,searchValue:b,fontSize:w,isSecondWindowOpen:N,imageData:L,isPanelLinked:r,selectedImage:(0,I.Px)(e),isImagePortrait:(0,I.Cb)(e),isPanelVisible:(0,I.K2)(e),isAnnotating:I.pf(e),textAlignment:k,textAlignmentById:s,scrollToId:O,syncIdOnClick:R,selectedWindow:P,selectedSourceRange:(0,I.xX)(e),selectedTargetRange:(0,I.rv)(e),searchResults:(0,I.BP)(e,b),showTableContent:(0,I.Q)(e),syncIdOnSearch:I.lz(e),imageAlignmentById:(0,I.d6)(e),imageScrollId:(0,I.Jh)(e),selectedMedia:W,condition:D}}),null,(function(e,t,n){function o(e,t,n){var o=[],r=[],s=[];(e=h[e])&&(o=e.filter((function(e){return e.type===xt.DT.variant})),r=e.filter((function(e){return e.type===xt.DT.pageBreak})),s=e.filter((function(e){return e.type===xt.DT.lineBreak}))),e=K().intersectionWith(o.concat(r,s),d.annotations,(function(e,t){return e.toString()==t.toString()})),r=null,r=0<e.length?e[0]:o&&0<o.length?(s=function(e){for(var t=null,n=0;n<e.length;n++){var i=e[n];(!t||i.length>t.length)&&(t=i)}return t}(o),e=d.getPositionOfAnnotation(s),e=(o=(0,i.Z)(e,2))[0],o=o[1],s&&s.isInsertion&&(o=0),d.getBaseAnnotation(e,o)):d.getBaseAnnotation(t,n),u((0,w.Enf)(r))}function r(e){return-1!==e.indexOf("i_")}function s(e){return-1!==e.indexOf("ds_")}function a(e){return-1!==e.indexOf("p_")}function l(e){return-1!==e.indexOf("l_")}function c(e){return!r(e)&&s(e)?e.substr(3):e.substr(2)}var u=t.dispatch,d=e.annotatedText,h=e.annotationPositions;return Ni(Ni(Ni({},e),n),{},{didSelectSegmentIds:function(t){if(0!==t.length){var n,o=[],a=[],l=function(e,t){var n,i,o,r,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return i=!(n=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return n=e.done,e},e:function(e){i=!0,o=e},f:function(){try{n||null==s.return||s.return()}finally{if(i)throw o}}};if(Array.isArray(e)||(s=function(e,t){var n;if(e)return"string"==typeof e?Wi(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wi(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);try{for(l.s();!(n=l.n()).done;){var p,f,g,m=n.value;s(m)||r(m)||(p=c(m),f=d.segmentedText.segmentAtPosition(p),a.push(f),(g=h[f.start])&&(o=o.concat(g)))}}catch(t){l.e(t)}finally{l.f()}o=K().uniqWith(o,(function(e,t){return e.toString()==t.toString()}));var v,x,y=K().intersectionWith(o,d.annotations,(function(e,t){return e.toString()==t.toString()})),T=function(e,t,n,o){if(0===e.length)return null;for(var r=e[0],s=(e=e[e.length-1],r.start),a=e.end,l=null,c=null,u=0;u<n.length;u++){var d=n[u],h=null,p=o.getPositionOfAnnotation(d),f=(p=(0,i.Z)(p,2))[0];p=p[1],-1!==t.indexOf(d)?(f&&f<s&&(s=f,l=d),(h=f+p-1)&&a<h&&(c=a=h)):a<(h=f+p-1)&&(a=h)}return{start:s,length:a-s+1,annotation:l&&c&&l===c?l:null}}(a,y,o,e.annotatedText);T?(v=d.getBaseAnnotation(T.start,T.length),x=T.annotation||(0<y.length?(y=d.segmentedText.segmentsInRange(T.start,T.length).reduce((function(e,t){return e+t.text}),""),e.selectedWitness||console.log("no stateProps.selectedWitness: %o",e.selectedWitness),new xt.ZP(it.Ii,function(e){var t=new Ut.Z(it.Ii,Ut.T);return e=new Gt.Z(e.id,e.name),new Qt.Z(it.Ii,e,t,"",!1)}(e.text),v.start,v.length,y,xt.DT.variant,e.selectedWitness,e.user)):v),u((0,w.Enf)(x))):console.warn("No range for selected segment ids: %o",t)}},selectedSegmentId:function(t){var n,i=c(t),p=i;r(t)?p=it.Rs+i:s(t)?p=it.eH+i:a(t)?p=it.Iv+i:l(t)&&(p=it.FQ+i),h[p],""===t?e.activeAnnotation&&(n=w.Enf(null),u(n)):r(t)||s(t)||a(t)||l(t)?o(p,i,0):(n=Number(c(t)),(p=d.segmentedText.segmentAtPosition(n))&&o(p.start,p.start,p.length))},changeScrollToId:function(e){return u(w.VZO(e))},changeSyncIdOnClick:function(e){return u(w.a_O(e))},changeSelectedImage:function(e){u(w.XmY(e))},changeSelectedWindow:function(e){u(w.skj(e))},changeSelectedRange:function(e){u(w.S7E(e))},changeShowTableContent:function(e){u(w.G0K(e))},closeAnnotation:function(){var e=w.Enf(null);u(e)},changeImageScrollId:function(e){u(w.d7c(e))}})}))(ct);const Hi=r().memo(bt);function zi(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zi(Object(n),!0).forEach((function(t){(0,Q.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Vi=(0,t.connect)((function(e){return{isSecondWindowOpen:I.qB(e),Media:I.Al(e)}}),null,(function(e,t,n){return t.dispatch,qi(qi({},n),e)}))((function(e){function t(e){var t=l.current.clientWidth,n=l.current.clientHeight;a(n<t)}var n=(0,o.useState)(!0),s=(n=(0,i.Z)(n,2))[0],a=n[1],l=(0,o.useRef)(null);return(0,o.useEffect)((function(){return t(),window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),r().createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"hidden",position:"relative"}},r().createElement(M.Z,{split:s?"vertical":"horizontal",size:e.isSecondWindowOpen?"50%":"100%",resizerClassName:f()(fe().Resizer,(0,Q.Z)({},fe().vertical,s),(0,Q.Z)({},fe().horizontal,!s)),onDragFinished:function(e){0<e&&window.dispatchEvent(new Event("resize"))}},r().createElement(pe,null,r().createElement(Hi,null)),r().createElement(pe,null,e.isSecondWindowOpen&&r().createElement(Vt,null))),e.Media.isPanelVisible&&r().createElement(pe,null,r().createElement(he,null)))}));var Mi=n(73445),Fi=n(42572),Ui=n(85779),Qi=n(97608),Gi=n(66186),Yi=n(51797),Ki=n(40512),$i=n(49185),Xi=n(62254),Ji=n(18377);const eo=(0,t.connect)((function(e){var t,n,i=I.ZT(e),o=I.an(e);return i&&(I.hX(e,i.id),t=(t=I.R8(e,i.id))?I.mh(e,t):I.NW(e,i.id)),o&&(I.Dl(e,o.id),n=(n=I.y6(e,o.id))?I.vp(e,n):I.S9(e,o.id)),-1===!e.user.userId&&(user=e.user),{selectedText:i,selectedWitness:t,selectedText2:o,selectedWitness2:n,title:I.i0(e,"header.title"),page:e.page,isAnnotating:I.pf(e),isSecondWindowOpen:I.qB(e),theme:I.gh(e),isPanelLinked:I.tt(e),textListIsVisible:I.Tq(e)}}),(function(e){return{onChangedTextWidth:function(t){e(w.tOq(t))},onChangedTextListVisible:function(t){e(w.DaN(t))},changeIsAnnotating:function(t){e(w.zBT(t)),!1===t&&(t=w.Enf(null),e(t),e(w.Enf(null)))},onChangeWindowOpen:function(t,n){e(w.rE3(t,n))},onChangePanelLink:function(t){e(w.jpX(t))}}}))((function(e){function t(e,t){"clickaway"!==t&&l(!1)}var n=[F().listContainer],s=(z.fq,z.zA,(0,o.useState)(!1)),a=(s=(0,i.Z)(s,2))[0],l=s[1];return z.j6,e.textListWidth,e.textListIsVisible?n.push(F().showListContainer):n.push(F().hideListContainer),s="calc(100vh - "+q().headerHeight+")",n=[{icon:r().createElement(Yi.Z,{htmlColor:e.isAnnotating?"#ff7961":void 0}),name:"Annotate",condition:e.isAnnotating,function:function(){return e.changeIsAnnotating(!e.isAnnotating)}},{icon:r().createElement(Ki.Z,{htmlColor:e.isPanelLinked?"#ff7961":void 0}),name:"Link Panel",condition:e.isPanelLinked,function:function(){return e.onChangePanelLink(!e.isPanelLinked)}},{icon:r().createElement($i.Z,null),name:"Share",function:function(){var t=e.selectedText,n=e.selectedText2,i=e.selectedWitness,o=e.selectedWitness2,r=n&&o?window.location.origin+"/texts/".concat(t.id,"/witnesses/").concat(null==i?void 0:i.id,"/texts2/").concat(n.id,"/witnesses2/").concat(o.id):window.location.origin+"/texts/".concat(t.id,"/witnesses/").concat(null==i?void 0:i.id);navigator.clipboard.writeText(r).then().catch((function(e){return console.log(e.message)})).finally((function(){return l(!0)}))}},{icon:r().createElement(Xi.Z,{htmlColor:e.isSecondWindowOpen?"#ff7961":void 0}),name:"Split Window",condition:e.isSecondWindowOpen,function:function(){return e.onChangeWindowOpen(!e.isSecondWindowOpen,140)}}],(0,o.useEffect)((function(){var e=setTimeout((function(){window.dispatchEvent(new Event("resize"))}),1e3);return function(){return clearTimeout(e)}}),[e.textListIsVisible]),r().createElement("div",{className:f()(F().interface,U().flex)},r().createElement(M.Z,{size:"fit-content",onDragFinished:function(e){0<e&&window.dispatchEvent(new Event("resize"))},resizerStyle:{display:"none"},style:{height:"auto",position:"static"}},r().createElement($.Z,{sx:{height:"100%"},orientation:"horizontal",in:e.textListIsVisible,mountOnEnter:!0,unmountOnExit:!0},r().createElement(V.Z,null)),r().createElement(Ji.Z,{sx:{height:"100vh",width:"100%"}},r().createElement(Vi,{bodyHeight:s}))),r().createElement(Mi.Z,{ariaLabel:"SpeedDial basic",sx:{position:"absolute",bottom:60,right:16},icon:r().createElement(Fi.Z,null)},n.map((function(e){return r().createElement(Ui.Z,{key:e.name,icon:e.icon,tooltipTitle:e.name,onClick:e.function,open:e.condition})}))),r().createElement(Qi.Z,{open:a,autoHideDuration:6e3,onClose:t},r().createElement(Gi.Z,{onClose:t,severity:"success",sx:{width:"100%"}},"The Url Copied to Clipboard !")))}))},43929:e=>{e.exports={container:"EditorContainer---container",interface:"EditorContainer---interface",listContainer:"EditorContainer---listContainer",showListContainer:"EditorContainer---showListContainer",hideListContainer:"EditorContainer---hideListContainer"}},26292:e=>{e.exports={Resizer:"resizerStyle---Resizer",horizontal:"resizerStyle---horizontal",vertical:"resizerStyle---vertical",disabled:"resizerStyle---disabled"}},99706:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b","ThirdWindow-Height":"300px","header-Height":"35px",mainTint:"#024279",activeButton:"#00746b",ThirdWindowHeight:"250px",ThirdWindow:"Image---ThirdWindow",ThirdWindowPortrait:"Image---ThirdWindowPortrait",header:"Image---header",listOfImages:"Image---listOfImages",ImageStyle:"Image---ImageStyle",imageSection:"Image---imageSection"}},57787:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",MediaOption:"MediaOptions---MediaOption",header:"MediaOptions---header",closeBtn:"MediaOptions---closeBtn"}},89674:e=>{e.exports={highlight:"SearchStyle---highlight",searchListItem:"SearchStyle---searchListItem"}},23199:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",selectVersion:"SelectVersion---selectVersion",selectEmpty:"SelectVersion---selectEmpty",selectOptions:"SelectVersion---selectOptions","styled-select":"SelectVersion---styled-select"}},64726:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"SplitText---annotationControls",annotationContent:"SplitText---annotationContent",subTitle:"SplitText---subTitle",title:"SplitText---title",sectionHeading:"SplitText---sectionHeading",text:"SplitText---text",padding:"SplitText---padding",arrowTop:"SplitText---arrowTop",arrowLeft:"SplitText---arrowLeft",arrowRight:"SplitText---arrowRight",inline:"SplitText---inline",arrow:"SplitText---arrow",arrowDs:"SplitText---arrowDs",nothingSelected:"SplitText---nothingSelected",anonymousMessage:"SplitText---anonymousMessage",noNotes:"SplitText---noNotes",breakButtons:"SplitText---breakButtons",splitText2:"SplitText---splitText2",splitTextRowContent:"SplitText---splitTextRowContent",splitTextRow:"SplitText---splitTextRow",pechaImage:"SplitText---pechaImage",controlsPlaceholder:"SplitText---controlsPlaceholder",pageNumber:"SplitText---pageNumber"}},97007:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",paddingSide:"20px",maxWidth:"600px",text:"Text2---text",textFirstRow:"Text2---textFirstRow",textLine:"Text2---textLine",textline:"Text2---textline",limitWidth:"Text2---limitWidth",textContainer:"Text2---textContainer",annotation:"Text2---annotation",removedByAnnotation:"Text2---removedByAnnotation",insertion:"Text2---insertion",highlight:"Text2---highlight",activeHighlight:"Text2---activeHighlight",lineBreak:"Text2---lineBreak",pageBreak:"Text2---pageBreak",syncIdClass:"Text2---syncIdClass",selectedRangelight:"Text2---selectedRangelight",selectedRangeDark:"Text2---selectedRangeDark"}},91308:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textDetail2:"TextDetail---textDetail2",textContainer2:"TextDetail---textContainer2"}},14960:e=>{e.exports={textlist:"TextList---textlist",open:"TextList---open"}},52925:e=>{e.exports={button_group_menu:"textDetailHeading---button_group_menu"}},56096:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",button:"AddButton---button"}},17084:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"AnnotationControls---annotationControls",annotationContent:"AnnotationControls---annotationContent",subTitle:"AnnotationControls---subTitle",title:"AnnotationControls---title",sectionHeading:"AnnotationControls---sectionHeading",text:"AnnotationControls---text",padding:"AnnotationControls---padding",arrowTop:"AnnotationControls---arrowTop",arrowLeft:"AnnotationControls---arrowLeft",arrowRight:"AnnotationControls---arrowRight",inline:"AnnotationControls---inline",arrow:"AnnotationControls---arrow",arrowDs:"AnnotationControls---arrowDs",nothingSelected:"AnnotationControls---nothingSelected",anonymousMessage:"AnnotationControls---anonymousMessage",noNotes:"AnnotationControls---noNotes",breakButtons:"AnnotationControls---breakButtons"}},41931:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",header:"AnnotationControlsHeader---header",Anotation_closeBtn:"AnnotationControlsHeader---Anotation_closeBtn",edit:"AnnotationControlsHeader---edit"}},17716:e=>{e.exports={heading:"AnnotationControlsHeading---heading",title:"AnnotationControlsHeading---title",button:"AnnotationControlsHeading---button"}},9908:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",annotationDetail:"AnnotationDetail---annotationDetail",active:"AnnotationDetail---active",annotationHeader:"AnnotationDetail---annotationHeader",activeIcon:"AnnotationDetail---activeIcon",editing:"AnnotationDetail---editing",actionButtons:"AnnotationDetail---actionButtons",edit:"AnnotationDetail---edit",editImage:"AnnotationDetail---editImage",save:"AnnotationDetail---save",cancel:"AnnotationDetail---cancel"}},47670:e=>{e.exports={name:"AnswerView---name",answer:"AnswerView---answer"}},84512:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",save:"Button---save",cancel:"Button---cancel",buttonContainer:"Button---buttonContainer"}},45871:e=>{e.exports={highlight:"SearchStyle---highlight",searchListItem:"SearchStyle---searchListItem"}},48499:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",note:"Note---note",header:"Note---header",info:"Note---info",content:"Note---content",delete:"Note---delete"}},18141:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",editorContainer:"NoteEditor---editorContainer",textEditor:"NoteEditor---textEditor"}},76600:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",editorContainer:"QuestionEditor---editorContainer",textEditor:"QuestionEditor---textEditor"}},19090:e=>{e.exports={question:"QuestionView---question",threadLink:"QuestionView---threadLink"}},91337:e=>{e.exports={loading:"QuestionsLoading---loading"}},92794:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",selectVersion:"SelectVersion---selectVersion",selectEmpty:"SelectVersion---selectEmpty",selectOptions:"SelectVersion---selectOptions","styled-select":"SelectVersion---styled-select"}},43842:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",inlineWidth:"280px",annotationControls:"SplitText---annotationControls",annotationContent:"SplitText---annotationContent",subTitle:"SplitText---subTitle",title:"SplitText---title",sectionHeading:"SplitText---sectionHeading",text:"SplitText---text",padding:"SplitText---padding",arrowTop:"SplitText---arrowTop",arrowLeft:"SplitText---arrowLeft",arrowRight:"SplitText---arrowRight",inline:"SplitText---inline",arrow:"SplitText---arrow",arrowDs:"SplitText---arrowDs",nothingSelected:"SplitText---nothingSelected",anonymousMessage:"SplitText---anonymousMessage",noNotes:"SplitText---noNotes",breakButtons:"SplitText---breakButtons",splitText:"SplitText---splitText",splitTextRowContent:"SplitText---splitTextRowContent",splitTextRow:"SplitText---splitTextRow",pechaImage:"SplitText---pechaImage",image:"SplitText---image",controlsPlaceholder:"SplitText---controlsPlaceholder",hide:"SplitText---hide",pageNumber:"SplitText---pageNumber","image-loading":"SplitText---image-loading"}},58628:e=>{e.exports={TableContent:"TableOfContent---TableContent"}},90147:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",paddingSide:"20px",maxWidth:"600px",text:"Text---text",syncIdClass:"Text---syncIdClass",textFirstRow:"Text---textFirstRow",textLine:"Text---textLine",textline:"Text---textline",limitWidth:"Text---limitWidth",textContainer:"Text---textContainer",annotation:"Text---annotation",selectedAnnotation:"Text---selectedAnnotation",removedByAnnotation:"Text---removedByAnnotation",insertion:"Text---insertion",highlight:"Text---highlight",activeHighlight:"Text---activeHighlight",lineBreak:"Text---lineBreak",pageBreak:"Text---pageBreak",selectedRangelight:"Text---selectedRangelight",selectedRangeDark:"Text---selectedRangeDark",selectedImage:"Text---selectedImage"}},9438:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textDetail:"TextDetail---textDetail",textContainer:"TextDetail---textContainer",tableContent:"TextDetail---tableContent"}},21709:e=>{e.exports={textlist:"TextList---textlist",open:"TextList---open"}},8438:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",button_group_menu:"textDetailHeading---button_group_menu"}},30329:e=>{e.exports={container:"LoadMore---container"}},66424:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",textList:"TextList---textList",textListRow:"TextList---textListRow",selectedRow:"TextList---selectedRow",textNameRow:"TextList---textNameRow",textName:"TextList---textName",highlight:"TextList---highlight",searchResults:"TextList---searchResults",searchResult:"TextList---searchResult",selectedSearchResult:"TextList---selectedSearchResult",searchTotal:"TextList---searchTotal",textListLoader:"TextList---textListLoader",searching:"TextList---searching",loadMore:"TextList---loadMore"}},91082:e=>{e.exports={tab:"TextListTab---tab",showTab:"TextListTab---showTab",hideTab:"TextListTab---hideTab"}},76644:e=>{e.exports={textsSearchContainer:"TextsSearch---textsSearchContainer",textsSearch:"TextsSearch---textsSearch",minify:"TextsSearch---minify"}},12733:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b",accessory:"Accessory---accessory"}},69646:e=>{e.exports={button:"Button---button",buttonNoBezel:"Button---buttonNoBezel",active:"Button---active",leftAlign:"Button---leftAlign",title:"Button---title",icon:"Button---icon"}},44490:e=>{e.exports={inputRanges:"Slider---inputRanges",inputRange:"Slider---inputRange"}},75740:e=>{e.exports={"green-tint":"#88af8e","blue-tint":"#024279","active-button":"#00746b",mainTint:"#024279",activeButton:"#00746b"}}}]);